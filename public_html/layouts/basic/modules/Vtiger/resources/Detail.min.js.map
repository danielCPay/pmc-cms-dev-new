{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_Detail_Js',\n\t{\n\t\tdetailInstance: false,\n\t\tgetInstance: function () {\n\t\t\tif (Vtiger_Detail_Js.detailInstance == false) {\n\t\t\t\tlet moduleClassName = app.getModuleName() + '_' + app.getViewName() + '_Js',\n\t\t\t\t\tinstance;\n\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\tinstance = new window[moduleClassName]();\n\t\t\t\t} else {\n\t\t\t\t\tinstance = new Vtiger_Detail_Js();\n\t\t\t\t}\n\t\t\t\tVtiger_Detail_Js.detailInstance = instance;\n\t\t\t}\n\t\t\treturn Vtiger_Detail_Js.detailInstance;\n\t\t},\n\t\t/*\n\t\t * function to trigger Detail view actions\n\t\t * @params: Action url\n\t\t */\n\t\ttriggerAjaxAction: function (moduleName, action) {\n\t\t\tlet detailInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tlet actionParams = {\n\t\t\t\ttype: 'POST',\n\t\t\t\tmodule: moduleName,\n\t\t\t\taction: action,\n\t\t\t\trecord: detailInstance.getRecordId()\n\t\t\t};\n\n\t\t\tAppConnector.request(actionParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.result.notify) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: data.result.notify.text,\n\t\t\t\t\t\t\ttype: data.result.notify.type\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: err\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to trigger Detail view actions\n\t\t * @params: Action url , callback function.\n\t\t */\n\t\ttriggerDetailViewAction: function (detailActionUrl, callBackFunction) {\n\t\t\tlet detailInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tlet selectedIds = [];\n\t\t\tselectedIds.push(detailInstance.getRecordId());\n\t\t\tlet postData = {\n\t\t\t\tselected_ids: JSON.stringify(selectedIds)\n\t\t\t};\n\t\t\tlet actionParams = {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: detailActionUrl,\n\t\t\t\tdataType: 'html',\n\t\t\t\tdata: postData\n\t\t\t};\n\n\t\t\tAppConnector.request(actionParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, { 'text-align': 'left' });\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t},\n\t\t/*\n\t\t * function to trigger send Sms\n\t\t * @params: send sms url , module name.\n\t\t */\n\t\ttriggerSendSms: function (detailActionUrl, module) {\n\t\t\tVtiger_Detail_Js.triggerDetailViewAction(detailActionUrl);\n\t\t},\n\t\ttriggerTransferOwnership: function (massActionUrl) {\n\t\t\tlet thisInstance = this;\n\t\t\tthisInstance.getRelatedModulesContainer = false;\n\t\t\tlet actionParams = {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: massActionUrl,\n\t\t\t\tdataType: 'html',\n\t\t\t\tdata: {}\n\t\t\t};\n\t\t\tAppConnector.request(actionParams).done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tlet callback = function (data) {\n\t\t\t\t\t\tlet params = app.validationEngineOptions;\n\t\t\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\tif (form.attr('name') == 'changeOwner') {\n\t\t\t\t\t\t\t\t\tthisInstance.transferOwnershipSave(form);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tjQuery('#changeOwner').validationEngine(app.validationEngineOptions);\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, function (data) {\n\t\t\t\t\t\tlet selectElement = thisInstance.getRelatedModuleContainer();\n\t\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(selectElement, 'select2');\n\t\t\t\t\t\tif (typeof callback == 'function') {\n\t\t\t\t\t\t\tcallback(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\ttransferOwnershipSave: function (form) {\n\t\t\tlet transferOwner = jQuery('#transferOwnerId').val();\n\t\t\tlet relatedModules = jQuery('#related_modules').val();\n\t\t\tlet recordId = jQuery('#recordId').val();\n\t\t\tlet params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'TransferOwnership',\n\t\t\t\trecord: recordId,\n\t\t\t\ttransferOwnerId: transferOwner,\n\t\t\t\trelated_modules: relatedModules\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tif (data.success) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_RECORDS_TRANSFERRED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t};\n\t\t\t\t\tlet oldvalue = jQuery('.assigned_user_id').val();\n\t\t\t\t\tlet element = jQuery('.assigned_user_id ');\n\n\t\t\t\t\telement.find('option[value=\"' + oldvalue + '\"]').removeAttr('selected');\n\t\t\t\t\telement.find('option[value=\"' + transferOwner + '\"]').attr('selected', 'selected');\n\t\t\t\t\telement.trigger('liszt:updated');\n\t\t\t\t\tlet Fieldname = element.find('option[value=\"' + transferOwner + '\"]').data('picklistvalue');\n\t\t\t\t\telement\n\t\t\t\t\t\t.closest('.row-fluid')\n\t\t\t\t\t\t.find('.value')\n\t\t\t\t\t\t.html(\n\t\t\t\t\t\t\t'<a href=\"index.php?module=Users&amp;parent=Settings&amp;view=Detail&amp;record=' +\n\t\t\t\t\t\t\t\ttransferOwner +\n\t\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t\tFieldname +\n\t\t\t\t\t\t\t\t'</a>'\n\t\t\t\t\t\t);\n\n\t\t\t\t\tapp.showNotify(params);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to get the related module container\n\t\t */\n\t\tgetRelatedModuleContainer: function () {\n\t\t\tif (this.getRelatedModulesContainer == false) {\n\t\t\t\tthis.getRelatedModulesContainer = jQuery('#related_modules');\n\t\t\t}\n\t\t\treturn this.getRelatedModulesContainer;\n\t\t},\n\t\treloadRelatedList: function () {\n\t\t\tlet detailInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tlet params = {};\n\t\t\tif (jQuery('[name=\"currentPageNum\"]').length > 0) {\n\t\t\t\tparams.page = jQuery('[name=\"currentPageNum\"]').val();\n\t\t\t}\n\t\t\tdetailInstance.loadRelatedList(params);\n\t\t},\n\t\trunRecordChanger: function (id) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\taction: 'Save',\n\t\t\t\tmode: 'recordChanger',\n\t\t\t\tid: id\n\t\t\t})\n\t\t\t\t.done(function () {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t})\n\t\t\t\t.fail(function (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: textStatus\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tshowWorkflowTriggerView: function (instance) {\n\t\t\t$(instance).popover('hide');\n\t\t\tconst detailInstance = Vtiger_Detail_Js.getInstance(),\n\t\t\t\tcallback = function (data) {\n\t\t\t\t\tlet treeInstance = data.find('#treeWorkflowContents');\n\t\t\t\t\ttreeInstance.jstree({\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(data.find('.js-tree-workflow-data').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\t\t\ticons: false\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmultiple: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: ['search']\n\t\t\t\t\t});\n\t\t\t\t\tdata.find('[type=\"submit\"]').one('click', function () { app.callOnce(function () {\n\t\t\t\t\t\tlet tasks = {};\n\t\t\t\t\t\tlet selected = treeInstance.jstree('get_selected', true);\n\t\t\t\t\t\t$.each(selected, function (index, treeElement) {\n\t\t\t\t\t\t\tif (treeElement.original.attr === 'record') {\n\t\t\t\t\t\t\t\ttasks[treeElement.id] = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$.each(selected, function (index, treeElement) {\n\t\t\t\t\t\t\tif (tasks[treeElement.parent] !== '#' && treeElement.original.attr === 'task') {\n\t\t\t\t\t\t\t\ttasks[treeElement.parent].push(treeElement.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (Object.keys(tasks).length === 0) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_INFORMATION'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_NOT_SELECTED_WORKFLOW_TRIGGER'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_STARTED_PERFORM_WORKFLOW'),\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\taction: 'Workflow',\n\t\t\t\t\t\t\t\tmode: 'execute',\n\t\t\t\t\t\t\t\tuser: data.find('[name=\"user\"]').val(),\n\t\t\t\t\t\t\t\trecord: detailInstance.getRecordId(),\n\t\t\t\t\t\t\t\ttasks: JSON.stringify(tasks)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_COMPLETED_PERFORM_WORKFLOW'),\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tdetailInstance.reloadTabContent();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR_DURING_TRIGGER_OF_WORKFLOW'),\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}); });\n\t\t\t\t};\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'WorkflowTrigger',\n\t\t\t\trecord: detailInstance.getRecordId()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tapp.showModalWindow(data, '', callback);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\ttargetPicklistChange: false,\n\t\ttargetPicklist: false,\n\t\tdetailViewContentHolder: false,\n\t\tdetailViewForm: false,\n\t\tdetailViewDetailsTabLabel: 'LBL_RECORD_DETAILS',\n\t\tdetailViewSummaryTabLabel: 'LBL_RECORD_SUMMARY',\n\t\tdetailViewRecentCommentsTabLabel: 'ModComments',\n\t\tdetailViewRecentActivitiesTabLabel: 'Activities',\n\t\tdetailViewRecentUpdatesTabLabel: 'LBL_UPDATES',\n\t\tdetailViewRecentDocumentsTabLabel: 'Documents',\n\t\tfieldUpdatedEvent: 'Vtiger.Field.Updated',\n\t\t//Filels list on updation of which we need to upate the detailview header\n\t\tupdatedFields: ['company', 'designation', 'title'],\n\t\t//Event that will triggered before saving the ajax edit of fields\n\t\tfieldPreSave: 'Vtiger.Field.PreSave',\n\t\ttempData: [],\n\t\treferenceFieldNames: {\n\t\t\tCalendar: {\n\t\t\t\tAccounts: 'link',\n\t\t\t\tLeads: 'link',\n\t\t\t\tVendors: 'link',\n\t\t\t\tOSSEmployees: 'link',\n\t\t\t\tContacts: 'linkextend',\n\t\t\t\tCampaigns: 'process',\n\t\t\t\tHelpDesk: 'process',\n\t\t\t\tProjects: 'process',\n\t\t\t\tServiceContracts: 'process'\n\t\t\t},\n\t\t\tOutsourcedProducts: {\n\t\t\t\tLeads: 'parent_id',\n\t\t\t\tAccounts: 'parent_id',\n\t\t\t\tContacts: 'parent_id'\n\t\t\t},\n\t\t\tAssets: {\n\t\t\t\tAccounts: 'parent_id',\n\t\t\t\tContacts: 'parent_id'\n\t\t\t},\n\t\t\tOSSOutsourcedServices: {\n\t\t\t\tLeads: 'parent_id',\n\t\t\t\tAccounts: 'parent_id',\n\t\t\t\tContacts: 'parent_id'\n\t\t\t},\n\t\t\tOSSSoldServices: {\n\t\t\t\tAccounts: 'parent_id',\n\t\t\t\tContacts: 'parent_id'\n\t\t\t}\n\t\t},\n\t\t//constructor\n\t\tinit: function () {},\n\t\tloadWidgetsEvents: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tapp.event.on('DetailView.Widget.AfterLoad', function (e, widgetContent, relatedModuleName, instance) {\n\t\t\t\tif (relatedModuleName === 'Calendar') {\n\t\t\t\t\tthisInstance.reloadWidgetActivitesStats(widgetContent.closest('.activityWidgetContainer'));\n\t\t\t\t}\n\t\t\t\tif (relatedModuleName === 'ModComments') {\n\t\t\t\t\tthisInstance.registerCommentEventsInDetail(widgetContent.closest('.updatesWidgetContainer'));\n\t\t\t\t}\n\t\t\t\tif (widgetContent.find('[name=\"relatedModule\"]').length) {\n\t\t\t\t\tthisInstance.registerShowSummary(widgetContent);\n\t\t\t\t}\n\t\t\t\tif (relatedModuleName === 'OSSMailView') {\n\t\t\t\t\tVtiger_Index_Js.registerMailButtons(widgetContent);\n\t\t\t\t\twidgetContent.find('.showMailModal').on('click', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\t\t\tapp.showModalWindow('', $(e.currentTarget).data('url') + '&noloadlibs=1', function (data) {\n\t\t\t\t\t\t\tVtiger_Index_Js.registerMailButtons(data);\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.registerEmailEvents(widgetContent);\n\t\t\t\tif (relatedModuleName === 'DetailView') {\n\t\t\t\t\tthisInstance.registerBlockStatusCheckOnLoad();\n\t\t\t\t}\n\t\t\t\tthisInstance.registerCollapsiblePanels(widgetContent.closest('.js-detail-widget'));\n\t\t\t\tthisInstance.registerAutoCompleteFields(widgetContent);\n\t\t\t});\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tlet container = this.getForm();\n\t\t\tlet widgetList = jQuery('[class^=\"widgetContainer_\"]');\n\t\t\tlet length = widgetList.length;\n\t\t\twidgetList.each((index, widget) => {\n\t\t\t\twidget = $(widget);\n\t\t\t\tif (widget.is(':visible')) {\n\t\t\t\t\tthis.loadWidget(widget);\n\t\t\t\t}\n\t\t\t\tif (length === index + 1) {\n\t\t\t\t\tcontainer.validationEngine('detach');\n\t\t\t\t\tcontainer.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.registerRelatedModulesRecordCount();\n\t\t},\n\t\tloadWidget: function (widgetContainer, params) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontentContainer = $('.js-detail-widget-content', widgetContainer);\n\t\t\tlet relatedModuleName;\n\t\t\tthis.registerFilterForAddingModuleRelatedRecordFromSummaryWidget(widgetContainer);\n\t\t\tif (widgetContainer.find('[name=\"relatedModule\"]').length) {\n\t\t\t\trelatedModuleName = widgetContainer.find('[name=\"relatedModule\"]').val();\n\t\t\t} else {\n\t\t\t\trelatedModuleName = widgetContainer.data('name');\n\t\t\t}\n\t\t\tif (params === undefined) {\n\t\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\t\tif (urlParams == undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet queryParameters = urlParams.split('&'),\n\t\t\t\t\tkeyValueMap = {},\n\t\t\t\t\tindex;\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParamComponents = queryParameters[index].split('=');\n\t\t\t\t\tkeyValueMap[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t}\n\t\t\t\tparams = keyValueMap;\n\t\t\t}\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tcontentContainer.progressIndicator({});\n\t\t\tAppConnector.request({\n\t\t\t\ttype: 'POST',\n\t\t\t\tasync: false,\n\t\t\t\tdataType: 'html',\n\t\t\t\tdata: params\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tcontentContainer.html(data);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tapp.registerModal(contentContainer);\n\t\t\t\t\tApp.Components.DropFile.register(contentContainer);\n\t\t\t\t\tif (relatedModuleName) {\n\t\t\t\t\t\tlet relatedController = Vtiger_RelatedList_Js.getInstanceByUrl(\n\t\t\t\t\t\t\twidgetContainer.data('url'),\n\t\t\t\t\t\t\tthisInstance.getSelectedTab()\n\t\t\t\t\t\t);\n\t\t\t\t\t\trelatedController.setRelatedContainer(contentContainer);\n\t\t\t\t\t\trelatedController.registerRelatedEvents();\n\t\t\t\t\t\tthisInstance.widgetRelatedRecordView(widgetContainer, true);\n\t\t\t\t\t\tlet chart = contentContainer.find('[name=\"typeChart\"]');\n\t\t\t\t\t\tif (chart.length && typeof window['Vtiger_Widget_Js'] !== 'undefined') {\n\t\t\t\t\t\t\tlet widgetInstance = Vtiger_Widget_Js.getInstance(contentContainer, chart.val());\n\t\t\t\t\t\t\twidgetInstance.init(contentContainer);\n\t\t\t\t\t\t\twidgetInstance.loadChart();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tapp.event.trigger('DetailView.Widget.AfterLoad', contentContainer, relatedModuleName, thisInstance);\n\t\t\t\t\taDeferred.resolve(params);\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\twidgetRelatedRecordView: function (container, load) {\n\t\t\tlet cacheKey = this.getRecordId() + '_' + container.data('id');\n\t\t\tlet relatedRecordCacheID = app.moduleCacheGet(cacheKey);\n\t\t\tif (relatedRecordCacheID !== null) {\n\t\t\t\tlet newActive = container.find(\".js-carousel-item[data-id = '\" + relatedRecordCacheID + \"']\");\n\t\t\t\tif (newActive.length) {\n\t\t\t\t\tcontainer.find('.js-carousel-item.active').removeClass('active');\n\t\t\t\t\tcontainer.find(\".js-carousel-item[data-id = '\" + relatedRecordCacheID + \"']\").addClass('active');\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet controlBox = container.find('.control-widget');\n\t\t\tlet prev = controlBox.find('.prev');\n\t\t\tlet next = controlBox.find('.next');\n\t\t\tlet active = container.find('.js-carousel-item.active');\n\t\t\tif (container.find('.js-carousel-item').length <= 1 || !active.next().length) {\n\t\t\t\tnext.addClass('disabled');\n\t\t\t} else {\n\t\t\t\tnext.removeClass('disabled');\n\t\t\t}\n\t\t\tif (container.find('.js-carousel-item').length <= 1 || !active.prev().length) {\n\t\t\t\tprev.addClass('disabled');\n\t\t\t} else {\n\t\t\t\tprev.removeClass('disabled');\n\t\t\t}\n\t\t\tif (load) {\n\t\t\t\tnext.on('click', function () {\n\t\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet active = container.find('.js-carousel-item.active');\n\t\t\t\t\tactive.removeClass('active');\n\t\t\t\t\tlet nextElement = active.next();\n\t\t\t\t\tnextElement.addClass('active');\n\t\t\t\t\tif (!nextElement.next().length) {\n\t\t\t\t\t\tnext.addClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t\tif (active.prev()) {\n\t\t\t\t\t\tprev.removeClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t\tapp.moduleCacheSet(cacheKey, nextElement.data('id'));\n\t\t\t\t});\n\t\t\t\tprev.on('click', function () {\n\t\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet active = container.find('.js-carousel-item.active');\n\t\t\t\t\tactive.removeClass('active');\n\t\t\t\t\tlet prevElement = active.prev();\n\t\t\t\t\tprevElement.addClass('active');\n\t\t\t\t\tif (!prevElement.prev().length) {\n\t\t\t\t\t\tprev.addClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t\tif (active.next()) {\n\t\t\t\t\t\tnext.removeClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t\tapp.moduleCacheSet(cacheKey, prevElement.data('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tloadContents: function (url, data) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet aDeferred = jQuery.Deferred();\n\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tlet params = url;\n\t\t\tif (typeof data !== 'undefined') {\n\t\t\t\tparams = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = data;\n\t\t\t}\n\t\t\tAppConnector.requestPjax(params).done(function (responseData) {\n\t\t\t\tdetailContentsHolder.html(responseData);\n\t\t\t\tresponseData = detailContentsHolder.html();\n\t\t\t\t//thisInstance.triggerDisplayTypeEvent();\n\t\t\t\tthisInstance.registerBlockStatusCheckOnLoad();\n\t\t\t\t//Make select box more usability\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(detailContentsHolder);\n\t\t\t\t//Attach date picker event to date fields\n\t\t\t\tApp.Fields.Date.register(detailContentsHolder);\n\t\t\t\tthisInstance.getForm().validationEngine();\n\t\t\t\tapp.event.trigger('DetailView.LoadContents.AfterLoad', responseData);\n\t\t\t\taDeferred.resolve(responseData);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetUpdateFieldsArray: function () {\n\t\t\treturn this.updatedFields;\n\t\t},\n\t\t/**\n\t\t * Function to return related tab.\n\t\t * @return : jQuery Object.\n\t\t */\n\t\tgetTabByLabel: function (tabLabel) {\n\t\t\tlet tabs = this.getTabs();\n\t\t\tlet targetTab = false;\n\t\t\ttabs.each(function (index, element) {\n\t\t\t\tlet tab = jQuery(element);\n\t\t\t\tlet labelKey = tab.data('labelKey');\n\t\t\t\tif (labelKey == tabLabel) {\n\t\t\t\t\ttargetTab = tab;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn targetTab;\n\t\t},\n\t\tgetTabByModule: function (moduleName, relationId = '') {\n\t\t\tlet tabs = this.getTabs();\n\t\t\tlet targetTab = false;\n\t\t\ttabs.each(function (index, element) {\n\t\t\t\tlet tab = jQuery(element);\n\t\t\t\tif (\n\t\t\t\t\ttab.data('reference') == moduleName &&\n\t\t\t\t\t(!relationId || (relationId && relationId == tab.data('relation-id')))\n\t\t\t\t) {\n\t\t\t\t\ttargetTab = tab;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn targetTab;\n\t\t},\n\t\tselectModuleTab: function () {\n\t\t\tlet relatedTabContainer = this.getTabContainer();\n\t\t\tlet moduleTab = relatedTabContainer.find('li.module-tab');\n\t\t\tthis.deSelectAllrelatedTabs();\n\t\t\tthis.markTabAsSelected(moduleTab);\n\t\t},\n\t\tdeSelectAllrelatedTabs: function () {\n\t\t\tthis.getTabs().removeClass('active');\n\t\t},\n\t\tmarkTabAsSelected: function (tabElement) {\n\t\t\ttabElement.addClass('active');\n\t\t\t$(\n\t\t\t\t'.related .dropdown [data-reference=\"' +\n\t\t\t\t\ttabElement.data('reference') +\n\t\t\t\t\t'\"][data-relation-id=\"' +\n\t\t\t\t\ttabElement.data('relation-id') +\n\t\t\t\t\t'\"]'\n\t\t\t).addClass('active');\n\t\t},\n\t\treloadTabContent: function () {\n\t\t\tthis.getSelectedTab().trigger('click');\n\t\t},\n\t\tgetSelectedTab: function () {\n\t\t\tlet tabContainer = this.getTabContainer();\n\t\t\treturn tabContainer.find('.js-detail-tab.active:not(.d-none)');\n\t\t},\n\t\tgetTabContainer: function () {\n\t\t\treturn jQuery('div.related');\n\t\t},\n\t\tgetTabs: function () {\n\t\t\tlet topTabs = this.getTabContainer().find('li.baseLink:not(.d-none)');\n\t\t\tlet dropdownMenuTabs = this.getTabContainer().find('li:not(.baseLink)');\n\t\t\tdropdownMenuTabs.each(function (n, e) {\n\t\t\t\tlet currentTarget = jQuery(this);\n\t\t\t\tlet iteration = currentTarget.data('iteration');\n\t\t\t\tlet className = currentTarget.hasClass('mainNav') ? 'mainNav' : 'relatedNav';\n\t\t\t\tif (\n\t\t\t\t\titeration != undefined &&\n\t\t\t\t\ttopTabs.filter('.' + className + '[data-iteration=\"' + iteration + '\"]').length < 1\n\t\t\t\t) {\n\t\t\t\t\ttopTabs.push(currentTarget.get(0));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn topTabs;\n\t\t},\n\t\tgetContentHolder: function () {\n\t\t\tif (this.detailViewContentHolder == false) {\n\t\t\t\tthis.detailViewContentHolder = jQuery('div.details div.contents');\n\t\t\t}\n\t\t\treturn this.detailViewContentHolder;\n\t\t},\n\t\t/**\n\t\t * Function which will give the detail view form\n\t\t * @return : jQuery element\n\t\t */\n\t\tgetForm: function () {\n\t\t\tif (this.detailViewForm == false) {\n\t\t\t\tthis.detailViewForm = jQuery('#detailView');\n\t\t\t}\n\t\t\treturn this.detailViewForm;\n\t\t},\n\t\tgetRecordId: function () {\n\t\t\treturn app.getRecordId();\n\t\t},\n\t\tgetRelatedModuleName: function () {\n\t\t\tif (jQuery('.relatedModuleName', this.getContentHolder()).length == 1) {\n\t\t\t\treturn jQuery('.relatedModuleName', this.getContentHolder()).val();\n\t\t\t}\n\t\t},\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\n\t\t\tlet recordId = this.getRecordId();\n\n\t\t\tlet data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tdata['record'] = recordId;\n\t\t\tdata['module'] = app.getModuleName();\n\t\t\tdata['action'] = 'SaveAjax';\n\n\t\t\tconst params = {};\n\t\t\tparams.data = data;\n\t\t\tparams.async = false;\n\t\t\tparams.dataType = 'json';\n\t\t\tthis.preSaveValidation(JSON.parse(JSON.stringify(params)), this.getForm()).then((response) => {\n\t\t\t\tif (response === true) {\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function (responseData) {\n\t\t\t\t\t\t\taDeferred.resolve(responseData);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail((jqXHR, textStatus, errorThrown) => {\n\t\t\t\t\t\t\taDeferred.reject(jqXHR, textStatus, errorThrown);\n\t\t\t\t\t\t\tapp.errorLog(jqXHR, textStatus, errorThrown);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tpreSaveValidation: function (params, form) {\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tif (form.find('#preSaveValidation').val()) {\n\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tparams.data.mode = 'preSaveValidation';\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\tfor (let i = 0; i < response.length; i++) {\n\t\t\t\t\t\t\tif (response[i].result !== true) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: response[i].message ? response[i].message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.result.length <= 0) {\n\t\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\taDeferred.resolve(true);\n\t\t\t}\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelatedListCurrentPageNum: function () {\n\t\t\treturn jQuery('input[name=\"currentPageNum\"]', this.getContentHolder()).val();\n\t\t},\n\t\t/**\n\t\t * function to hide comment block.\n\t\t */\n\t\tremoveCommentBlock: function () {\n\t\t\t$('.js-add-comment-block', $('.js-comments-body', this.getContentHolder())).remove();\n\t\t},\n\n\t\t/**\n\t\t * function to hide button action.\n\t\t */\n\t\thideButtonAction: function () {\n\t\t\t$('.js-hb__container').removeClass('u-hidden-block__opened');\n\t\t},\n\n\t\t/**\n\t\t * function to show comment block.\n\t\t */\n\t\tshowCommentBlock: function () {\n\t\t\t$('.js-add-comment-block', $('.js-comments-body', this.getContentHolder())).show();\n\t\t},\n\n\t\t/**\n\t\t * function to get the Comment thread for the given parent.\n\t\t * params: Url to get the Comment thread\n\t\t */\n\t\tgetCommentThread: function (url) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to save comment\n\t\t */\n\t\tsaveCommentAjax: function (\n\t\t\telement,\n\t\t\tcommentMode,\n\t\t\tcommentContentValue,\n\t\t\teditCommentReason,\n\t\t\tcommentId,\n\t\t\tparentCommentId,\n\t\t\taDeferred\n\t\t) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({});\n\t\t\tlet commentInfoBlock = element.closest('.js-comment-single');\n\t\t\tlet relatedTo = commentInfoBlock.find('.related_to').val();\n\t\t\tif (!relatedTo) {\n\t\t\t\trelatedTo = thisInstance.getRecordId();\n\t\t\t}\n\t\t\tlet postData = {\n\t\t\t\tcommentcontent: commentContentValue,\n\t\t\t\trelated_to: relatedTo,\n\t\t\t\tmodule: 'ModComments'\n\t\t\t};\n\n\t\t\tif (commentMode == 'edit') {\n\t\t\t\tpostData['record'] = commentId;\n\t\t\t\tpostData['reasontoedit'] = editCommentReason;\n\t\t\t\tpostData['parent_comments'] = parentCommentId;\n\t\t\t\tpostData['mode'] = 'edit';\n\t\t\t\tpostData['action'] = 'Save';\n\t\t\t} else if (commentMode == 'add') {\n\t\t\t\tpostData['parent_comments'] = commentId;\n\t\t\t\tpostData['action'] = 'SaveAjax';\n\t\t\t}\n\t\t\tAppConnector.request(postData)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (commentMode == 'add') {\n\t\t\t\t\t\tthisInstance.addRelationBetweenRecords(\n\t\t\t\t\t\t\t'ModComments',\n\t\t\t\t\t\t\tdata.result.id,\n\t\t\t\t\t\t\tthisInstance.getTabByLabel(thisInstance.detailViewRecentCommentsTabLabel),\n\t\t\t\t\t\t\t{ relationId: null }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tapp.event.trigger('DetailView.SaveComment.AfterAjax', commentInfoBlock, postData, data);\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\telement.removeAttr('disabled');\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t},\n\t\tsaveComment: function (e) {\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tcurrentTarget = jQuery(e.currentTarget),\n\t\t\t\tcommentMode = currentTarget.data('mode'),\n\t\t\t\tclosestCommentBlock = currentTarget.closest('.js-add-comment-block'),\n\t\t\t\tcommentContent = closestCommentBlock.find('.js-comment-content'),\n\t\t\t\tcommentContentValue = commentContent.html(),\n\t\t\t\terrorMsg,\n\t\t\t\teditCommentReason;\n\t\t\tif ('' === commentContentValue) {\n\t\t\t\terrorMsg = app.vtranslate('JS_LBL_COMMENT_VALUE_CANT_BE_EMPTY');\n\t\t\t\tcommentContent.validationEngine('showPrompt', errorMsg, 'error', 'bottomLeft', true);\n\t\t\t\taDeferred.reject(errorMsg);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tif ('edit' === commentMode) {\n\t\t\t\teditCommentReason = closestCommentBlock.find('[name=\"reasonToEdit\"]').val();\n\t\t\t}\n\t\t\tlet element = jQuery(e.currentTarget),\n\t\t\t\tcommentInfoHeader = closestCommentBlock.closest('.js-comment-details').find('.js-comment-info-header'),\n\t\t\t\tcommentId = commentInfoHeader.data('commentid'),\n\t\t\t\tparentCommentId = commentInfoHeader.data('parentcommentid');\n\t\t\tthis.saveCommentAjax(\n\t\t\t\telement,\n\t\t\t\tcommentMode,\n\t\t\t\tcommentContentValue,\n\t\t\t\teditCommentReason,\n\t\t\t\tcommentId,\n\t\t\t\tparentCommentId,\n\t\t\t\taDeferred\n\t\t\t);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * function to return the UI of the comment.\n\t\t * return html\n\t\t */\n\t\tgetCommentUI: function (commentId) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet postData = {\n\t\t\t\tview: 'DetailAjax',\n\t\t\t\tmodule: 'ModComments',\n\t\t\t\trecord: commentId\n\t\t\t};\n\t\t\tAppConnector.request(postData)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * function to return cloned add comment block\n\t\t * return jQuery Obj.\n\t\t */\n\t\tgetCommentBlock: function () {\n\t\t\tlet clonedCommentBlock = jQuery('.basicAddCommentBlock', this.getContentHolder())\n\t\t\t\t.clone(true, true)\n\t\t\t\t.removeClass('basicAddCommentBlock d-none')\n\t\t\t\t.addClass('js-add-comment-block');\n\t\t\tclonedCommentBlock\n\t\t\t\t.find('.commentcontenthidden')\n\t\t\t\t.removeClass('commentcontenthidden')\n\t\t\t\t.addClass('js-comment-content');\n\t\t\treturn clonedCommentBlock;\n\t\t},\n\t\t/**\n\t\t * function to return cloned edit comment block\n\t\t * return jQuery Obj.\n\t\t */\n\t\tgetEditCommentBlock: function () {\n\t\t\tlet clonedCommentBlock = jQuery('.basicEditCommentBlock', this.getContentHolder())\n\t\t\t\t.clone(true, true)\n\t\t\t\t.removeClass('basicEditCommentBlock d-none')\n\t\t\t\t.addClass('js-add-comment-block');\n\t\t\tclonedCommentBlock\n\t\t\t\t.find('.commentcontenthidden')\n\t\t\t\t.removeClass('commentcontenthidden')\n\t\t\t\t.addClass('js-comment-content');\n\t\t\tnew App.Fields.Text.Completions(clonedCommentBlock.find('.js-completions'), {\n\t\t\t\temojiPanel: false\n\t\t\t});\n\t\t\treturn clonedCommentBlock;\n\t\t},\n\t\t/*\n\t\t * Function to register the submit event for Send Sms\n\t\t */\n\t\tregisterSendSmsSubmitEvent: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tjQuery('body').on('submit', '#massSave', function (e) {\n\t\t\t\tlet form = jQuery(e.currentTarget);\n\t\t\t\tlet smsTextLength = form.find('#message').html().length;\n\t\t\t\tif (smsTextLength > 160) {\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate('LBL_SMS_MAX_CHARACTERS_ALLOWED'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tapp.showNotify(params);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet submitButton = form.find(':submit');\n\t\t\t\tsubmitButton.attr('disabled', 'disabled');\n\t\t\t\tthisInstance.SendSmsSave(form);\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to Save and sending the Sms and hide the modal window of send sms\n\t\t */\n\t\tSendSmsSave: function (form) {\n\t\t\tlet progressInstance = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet SendSmsUrl = form.serializeFormData();\n\t\t\tAppConnector.request(SendSmsUrl)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tprogressInstance.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t},\n\t\t/**\n\t\t * Function which will register events to update the record name in the detail view when any of\n\t\t * the name field is changed\n\t\t */\n\t\tregisterNameAjaxEditEvent: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tdetailContentsHolder.on(thisInstance.fieldUpdatedEvent, '.nameField', function (e, params) {\n\t\t\t\tlet form = thisInstance.getForm();\n\t\t\t\tlet nameFields = form.data('nameFields');\n\t\t\t\tlet recordLabel = '';\n\t\t\t\tfor (let index in nameFields) {\n\t\t\t\t\tif (index != 0) {\n\t\t\t\t\t\trecordLabel += ' ';\n\t\t\t\t\t}\n\n\t\t\t\t\tlet nameFieldName = nameFields[index];\n\t\t\t\t\trecordLabel += form.find('[name=\"' + nameFieldName + '\"]').val();\n\t\t\t\t}\n\t\t\t\tlet recordLabelElement = detailContentsHolder.closest('.contentsDiv').find('.recordLabel');\n\t\t\t\trecordLabelElement.text(recordLabel);\n\t\t\t});\n\t\t},\n\t\tupdateHeaderNameFields: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tlet form = thisInstance.getForm();\n\t\t\tlet nameFields = form.data('nameFields');\n\t\t\tlet recordLabelElement = detailContentsHolder.closest('.contentsDiv').find('.recordLabel');\n\t\t\tlet title = '';\n\t\t\tfor (let index in nameFields) {\n\t\t\t\tlet nameFieldName = nameFields[index];\n\t\t\t\tlet nameField = form.find('[name=\"' + nameFieldName + '\"]');\n\t\t\t\tif (nameField.length > 0) {\n\t\t\t\t\tlet recordLabel = nameField.val();\n\t\t\t\t\ttitle += recordLabel + ' ';\n\t\t\t\t\trecordLabelElement.find('[class=\"' + nameFieldName + '\"]').text(recordLabel);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet salutatioField = recordLabelElement.find('.salutation');\n\t\t\tif (salutatioField.length > 0) {\n\t\t\t\tlet salutatioValue = salutatioField.text();\n\t\t\t\ttitle = salutatioValue + title;\n\t\t\t}\n\t\t\trecordLabelElement.attr('title', title);\n\t\t},\n\t\tregisterAjaxEditEvent: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tdetailContentsHolder.on(thisInstance.fieldUpdatedEvent, 'input,select,textarea', function (e) {\n\t\t\t\tthisInstance.updateHeaderValues(jQuery(e.currentTarget));\n\t\t\t});\n\t\t},\n\t\tupdateHeaderValues: function (currentElement) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (currentElement.hasClass('nameField')) {\n\t\t\t\tthisInstance.updateHeaderNameFields();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tlet name = currentElement.attr('name');\n\t\t\tlet updatedFields = this.getUpdateFieldsArray();\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tif (jQuery.inArray(name, updatedFields) != '-1') {\n\t\t\t\tlet recordLabel = currentElement.val();\n\t\t\t\tlet recordLabelElement = detailContentsHolder.closest('.contentsDiv').find('.' + name + '_label');\n\t\t\t\trecordLabelElement.text(recordLabel);\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * Function to register the click event of email field\n\t\t */\n\t\tregisterEmailFieldClickEvent: function () {\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tdetailContentsHolder.on('click', '.emailField', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the click event of phone field\n\t\t */\n\t\tregisterPhoneFieldClickEvent: function () {\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tdetailContentsHolder.on('click', '.phoneField', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the click event of url field\n\t\t */\n\t\tregisterUrlFieldClickEvent: function () {\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tdetailContentsHolder.on('click', '.urlField', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register event for related list row click\n\t\t */\n\t\tregisterRelatedRowClickEvent: function () {\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tdetailContentsHolder.on('click', '.listViewEntries', function (e) {\n\t\t\t\tlet targetElement = jQuery(e.target, jQuery(e.currentTarget));\n\t\t\t\tif (targetElement.is('td:first-child') && targetElement.children('input[type=\"checkbox\"]').length > 0) return;\n\t\t\t\tif (jQuery(e.target).is('input[type=\"checkbox\"]')) return;\n\t\t\t\tlet elem = jQuery(e.currentTarget);\n\t\t\t\tlet recordUrl = elem.data('recordurl');\n\t\t\t\tif (typeof recordUrl !== 'undefined') {\n\t\t\t\t\twindow.location.href = recordUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tloadRelatedList: function (params) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tif (params == undefined) {\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tlet relatedListInstance = Vtiger_RelatedList_Js.getInstance(\n\t\t\t\tthis.getRecordId(),\n\t\t\t\tapp.getModuleName(),\n\t\t\t\tthis.getSelectedTab(),\n\t\t\t\tthis.getRelatedModuleName()\n\t\t\t);\n\t\t\trelatedListInstance\n\t\t\t\t.loadRelatedList(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register Event for Sorting\n\t\t */\n\t\tregisterEventForRelatedList: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tlet relatedModuleName = thisInstance.getRelatedModuleName();\n\t\t\tif (relatedModuleName) {\n\t\t\t\tlet relatedController = Vtiger_RelatedList_Js.getInstance(\n\t\t\t\t\tthisInstance.getRecordId(),\n\t\t\t\t\tapp.getModuleName(),\n\t\t\t\t\tthisInstance.getSelectedTab(),\n\t\t\t\t\trelatedModuleName\n\t\t\t\t);\n\t\t\t\trelatedController.setRelatedContainer(detailContentsHolder);\n\t\t\t\trelatedController.registerRelatedEvents();\n\t\t\t}\n\t\t\tdetailContentsHolder.find('.detailViewBlockLink').each(function (n, block) {\n\t\t\t\tblock = $(block);\n\t\t\t\tlet blockContent = block.find('.blockContent');\n\n\t\t\t\tif (blockContent.is(':visible')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\ttype: 'GET',\n\t\t\t\t\t\tdataType: 'html',\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\turl: block.data('url')\n\t\t\t\t\t}).done(function (response) {\n\t\t\t\t\t\tblockContent.html(response);\n\t\t\t\t\t\tlet relatedController = Vtiger_RelatedList_Js.getInstanceByUrl(\n\t\t\t\t\t\t\tblock.data('url'),\n\t\t\t\t\t\t\tthisInstance.getSelectedTab()\n\t\t\t\t\t\t);\n\t\t\t\t\t\trelatedController.setRelatedContainer(blockContent);\n\t\t\t\t\t\trelatedController.registerRelatedEvents();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.find('.detailViewBlockLink .blockHeader').on('click', function (e) {\n\t\t\t\tconst target = $(e.target);\n\t\t\t\tif (\n\t\t\t\t\ttarget.is('input') ||\n\t\t\t\t\ttarget.is('button') ||\n\t\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst block = $(this).closest('.js-toggle-panel');\n\t\t\t\tconst blockContent = block.find('.blockContent');\n\t\t\t\tconst isEmpty = blockContent.is(':empty');\n\t\t\t\tlet url = block.data('url');\n\t\t\t\tif (blockContent.is(':visible') && url) {\n\t\t\t\t\tblockContent.progressIndicator();\n\t\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\t\tblockContent.html(response);\n\t\t\t\t\t\tconst relatedController = Vtiger_RelatedList_Js.getInstanceByUrl(url, thisInstance.getSelectedTab());\n\t\t\t\t\t\trelatedController.setRelatedContainer(blockContent);\n\t\t\t\t\t\tif (isEmpty) {\n\t\t\t\t\t\t\trelatedController.registerRelatedEvents();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trelatedController.registerPostLoadEvents();\n\t\t\t\t\t\t\trelatedController.registerListEvents();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBlockStatusCheckOnLoad: function () {\n\t\t\tlet blocks = this.getContentHolder().find('.js-toggle-panel');\n\t\t\tlet module = app.getModuleName();\n\t\t\tblocks.each(function (index, block) {\n\t\t\t\tlet currentBlock = jQuery(block);\n\t\t\t\tlet dynamicAttr = currentBlock.attr('data-dynamic');\n\t\t\t\tif (typeof dynamicAttr !== typeof undefined && dynamicAttr !== false) {\n\t\t\t\t\tlet headerAnimationElement = currentBlock.find('.js-block-toggle').not('.d-none');\n\t\t\t\t\tlet bodyContents = currentBlock.closest('.js-toggle-panel').find('.blockContent');\n\t\t\t\t\tlet blockId = headerAnimationElement.data('id');\n\t\t\t\t\tlet cacheKey = module + '.' + blockId;\n\t\t\t\t\tlet value = app.cacheGet(cacheKey, null);\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tif (value == 1) {\n\t\t\t\t\t\t\theaderAnimationElement.addClass('d-none');\n\t\t\t\t\t\t\tcurrentBlock.find(\"[data-mode='show']\").removeClass('d-none');\n\t\t\t\t\t\t\tbodyContents.removeClass('d-none');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\theaderAnimationElement.addClass('d-none');\n\t\t\t\t\t\t\tcurrentBlock.find(\"[data-mode='hide']\").removeClass('d-none');\n\t\t\t\t\t\t\tbodyContents.addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to handle the ajax edit for detailview and summary view fields\n\t\t * which will expects the currentTdElement\n\t\t */\n\t\tajaxEditHandling: function (currentTdElement) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet readRecord = $('.setReadRecord'),\n\t\t\t\tdetailViewValue = $('.value', currentTdElement),\n\t\t\t\teditElement = $('.edit', currentTdElement),\n\t\t\t\tactionElement = $('.js-detail-quick-edit', currentTdElement),\n\t\t\t\tfieldElement = $('.fieldname', editElement);\n\t\t\treadRecord.prop('disabled', true);\n\t\t\t$(fieldElement).each(function (index, element) {\n\t\t\t\tlet fieldName = $(element).val(),\n\t\t\t\t\telementTarget = $(element),\n\t\t\t\t\telementName =\n\t\t\t\t\t\t$.inArray(elementTarget.data('type'), [\n\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t'multiListFields',\n\t\t\t\t\t\t\t'multiDomain',\n\t\t\t\t\t\t\t'mailScannerFields',\n\t\t\t\t\t\t\t'mailScannerActions'\n\t\t\t\t\t\t]) != -1\n\t\t\t\t\t\t\t? fieldName + '[]'\n\t\t\t\t\t\t\t: fieldName;\n\t\t\t\tlet fieldElement = $('[name=\"' + elementName + '\"]:not([type=\"hidden\"]),[name=\"' + elementName + '\"][type=\"hidden\"][data-fieldtype=\"reference\"]', editElement);\n\t\t\t\tif (fieldElement.attr('disabled') == 'disabled') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (editElement.length <= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (editElement.is(':visible')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (fieldElement.attr('data-inputmask')) {\n\t\t\t\t\tfieldElement.inputmask();\n\t\t\t\t}\n\t\t\t\tdetailViewValue.addClass('d-none');\n\t\t\t\tactionElement.addClass('d-none');\n\t\t\t\teditElement\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('input[type!=\"hidden\"]input[type!=\"image\"],select')\n\t\t\t\t\t.filter(':first')\n\t\t\t\t\t.focus();\n\t\t\t\tlet saveHandler = function (e) {\n\t\t\t\t\t// detect click in modal and ignore tpl-Modals-RecordsListHeader\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\tlet selectReference = $('.tpl-Modals-RecordsListHeader')[0];\n\t\t\t\t\t\tif (selectReference && $.contains(selectReference, e.target)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet createReference = $('.quickCreateContainer')[0];\n\t\t\t\t\t\tif (createReference && $.contains(createReference, e.target)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.registerNameAjaxEditEvent();\n\t\t\t\t\tlet element = $(e.target);\n\t\t\t\t\tif ($(e.currentTarget).find('.dateTimePickerField').length) {\n\t\t\t\t\t\tif (element.closest('.drp-calendar').length || element.hasClass('drp-calendar')) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\telement.closest('.fieldValue').is(currentTdElement) ||\n\t\t\t\t\t\telement.hasClass('select2-selection__choice__remove') ||\n\t\t\t\t\t\telement.closest('.select2-container--open').length ||\n\t\t\t\t\t\telement.parents('.clockpicker-popover').length\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentTdElement.removeAttr('tabindex');\n\t\t\t\t\tcurrentTdElement.removeClass('is-edit-active');\n\t\t\t\t\tlet previousValue = elementTarget.data('prevValue'),\n\t\t\t\t\t\teditElement = elementTarget.closest('.edit'),\n\t\t\t\t\t\tajaxEditNewValue =\n\t\t\t\t\t\t\teditElement.find('[name=\"' + elementName + '\"]').length > 0\n\t\t\t\t\t\t\t\t? editElement.find('[name=\"' + elementName + '\"]').val()\n\t\t\t\t\t\t\t\t: editElement.find('[name=\"' + fieldName + '\"]').val(),\n\t\t\t\t\t\tfieldInfo = Vtiger_Field_Js.getInstance(fieldElement.data('fieldinfo')),\n\t\t\t\t\t\tdateTimeField = [],\n\t\t\t\t\t\tdateTime = false;\n\t\t\t\t\tif (editElement.find('[data-fieldinfo]').length == 2) {\n\t\t\t\t\t\teditElement.find('[data-fieldinfo]').each(function () {\n\t\t\t\t\t\t\tlet field = {\n\t\t\t\t\t\t\t\tname: $(this).attr('name'),\n\t\t\t\t\t\t\t\ttype: $(this).data('fieldinfo').type\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (field['type'] == 'datetime') {\n\t\t\t\t\t\t\t\tdateTime = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdateTimeField.push(field);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldElement.is('input:checkbox')) {\n\t\t\t\t\t\tif (fieldElement.is(':checked')) {\n\t\t\t\t\t\t\tajaxEditNewValue = '1';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tajaxEditNewValue = '0';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfieldElement = fieldElement.filter('[type=\"checkbox\"]');\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldElement.validationEngine('validate')) {\n\t\t\t\t\t\tif (fieldElement.attr('data-inputmask')) {\n\t\t\t\t\t\t\tfieldElement.inputmask();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfunction toStr(v) {\n\t\t\t\t\t\treturn v === undefined || v === null ? '' : v + '';\n\t\t\t\t\t}\n\t\t\t\t\tfieldElement.validationEngine('hide');\n\t\t\t\t\tif (toStr(previousValue) === toStr(ajaxEditNewValue)) {\n\t\t\t\t\t\teditElement.addClass('d-none');\n\t\t\t\t\t\tdetailViewValue.removeClass('d-none');\n\t\t\t\t\t\tactionElement.removeClass('d-none');\n\t\t\t\t\t\treadRecord.prop('disabled', false);\n\t\t\t\t\t\teditElement.off('clickoutside');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet preFieldSaveEvent = jQuery.Event(thisInstance.fieldPreSave),\n\t\t\t\t\t\t\tfieldNameValueMap = {};\n\t\t\t\t\t\tfieldElement.trigger(preFieldSaveEvent, {\n\t\t\t\t\t\t\tfieldValue: ajaxEditNewValue,\n\t\t\t\t\t\t\trecordId: thisInstance.getRecordId()\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (preFieldSaveEvent.isDefaultPrevented()) {\n\t\t\t\t\t\t\treadRecord.prop('disabled', false);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentTdElement.progressIndicator();\n\t\t\t\t\t\teditElement.addClass('d-none');\n\t\t\t\t\t\tfieldNameValueMap['value'] = ajaxEditNewValue;\n\t\t\t\t\t\tfieldNameValueMap['field'] = fieldName;\n\t\t\t\t\t\tfieldNameValueMap = thisInstance.getCustomFieldNameValueMap(fieldNameValueMap);\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.saveFieldValues(fieldNameValueMap)\n\t\t\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\t\t\teditElement.off('clickoutside');\n\t\t\t\t\t\t\t\treadRecord.prop('disabled', false);\n\t\t\t\t\t\t\t\tcurrentTdElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tdetailViewValue.removeClass('d-none');\n\t\t\t\t\t\t\t\tactionElement.removeClass('d-none');\n\t\t\t\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst postSaveRecordDetails = response.result;\n\t\t\t\t\t\t\t\t// iterate all fields, update success === true\n\t\t\t\t\t\t\t\tlet text = '';\n\t\t\t\t\t\t\t\tlet moduleName = app.getModuleName();\n\t\t\t\t\t\t\t\tfor (const fieldName of Object.keys(response.result)) {\n\t\t\t\t\t\t\t\t\tlet success = postSaveRecordDetails[fieldName].success,\n\t\t\t\t\t\t\t\t\tdisplayValue = postSaveRecordDetails[fieldName].display_value,\n\t\t\t\t\t\t\t\t\tprevDisplayValue = postSaveRecordDetails[fieldName].prev_display_value,\n\t\t\t\t\t\t\t\t\tlabel = postSaveRecordDetails[fieldName].label;\n\n\t\t\t\t\t\t\t\t\tif (!success) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// find element\n\t\t\t\t\t\t\t\t\tdetailViewValue = $('div#' + moduleName + '_detailView_fieldValue_' + fieldName + ' .value');\n\t\t\t\t\t\t\t\t\tdetailViewValue.html(displayValue);\n\n\t\t\t\t\t\t\t\t\ttext += '<b>' +\n\t\t\t\t\t\t\t\t\tlabel +\n\t\t\t\t\t\t\t\t\t'</b><br>' +\n\t\t\t\t\t\t\t\t\t'<b>' +\n\t\t\t\t\t\t\t\t\tapp.vtranslate('JS_SAVED_FROM') +\n\t\t\t\t\t\t\t\t\t'</b>: ' +\n\t\t\t\t\t\t\t\t\tprevDisplayValue +\n\t\t\t\t\t\t\t\t\t'<br> ' +\n\t\t\t\t\t\t\t\t\t'<b>' +\n\t\t\t\t\t\t\t\t\tapp.vtranslate('JS_SAVED_TO') +\n\t\t\t\t\t\t\t\t\t'</b>: ' +\n\t\t\t\t\t\t\t\t\tdisplayValue + '<br>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\t\ttextTrusted: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (postSaveRecordDetails['_isViewable'] === false) {\n\t\t\t\t\t\t\t\t\tlet urlObject = app.convertUrlToObject(window.location.href);\n\t\t\t\t\t\t\t\t\tif (window !== window.parent) {\n\t\t\t\t\t\t\t\t\t\twindow.parent.location.href = 'index.php?module=' + urlObject['module'] + '&view=ListPreview';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\twindow.location.href = 'index.php?module=' + urlObject['module'] + '&view=List';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\tpostSaveRecordDetails['_isEditable'] === false ||\n\t\t\t\t\t\t\t\t\tpostSaveRecordDetails['_reload'] === true\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t$.progressIndicator({\n\t\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (window !== window.parent) {\n\t\t\t\t\t\t\t\t\t\twindow.location.href = window.location.href.indexOf('view=DetailPreview') !== -1 ? window.location.href : window.location.href.replace('view=Detail', 'view=DetailPreview');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// check if workflow trigger button should be shown or hidden; set in SaveAjax action\n\t\t\t\t\t\t\t\tif ('_workflowTrigger' in postSaveRecordDetails) {\n\t\t\t\t\t\t\t\t\tif (postSaveRecordDetails['_workflowTrigger'] > 0) {\n\t\t\t\t\t\t\t\t\t\t$('.js-workflow-trigger-btn').removeClass('d-none');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-workflow-trigger-btn').addClass('d-none');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfieldElement.trigger(thisInstance.fieldUpdatedEvent, {\n\t\t\t\t\t\t\t\t\told: previousValue,\n\t\t\t\t\t\t\t\t\tnew: ajaxEditNewValue\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tajaxEditNewValue = ajaxEditNewValue === undefined ? '' : ajaxEditNewValue; //data cannot be undefined\n\t\t\t\t\t\t\t\telementTarget.data('prevValue', ajaxEditNewValue);\n\t\t\t\t\t\t\t\tfieldElement.data('selectedValue', ajaxEditNewValue);\n\t\t\t\t\t\t\t\tif (thisInstance.targetPicklistChange) {\n\t\t\t\t\t\t\t\t\tif ($('.js-widget-general-info', thisInstance.getForm()).length > 0) {\n\t\t\t\t\t\t\t\t\t\tthisInstance.targetPicklist.find('.js-detail-quick-edit').trigger('click');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthisInstance.targetPicklist.trigger('click');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.targetPicklistChange = false;\n\t\t\t\t\t\t\t\t\tthisInstance.targetPicklist = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet selectedTabElement = thisInstance.getSelectedTab();\n\t\t\t\t\t\t\t\tif (selectedTabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\t\t\t\t\t\t\tthisInstance.reloadTabContent();\n\t\t\t\t\t\t\t\t\tthisInstance.registerSummaryViewContainerEvents(detailContentsHolder);\n\t\t\t\t\t\t\t\t\tthisInstance.registerEventForPicklistDependencySetup(thisInstance.getForm());\n\t\t\t\t\t\t\t\t\tthisInstance.registerEventForRelatedList();\n\t\t\t\t\t\t\t\t} else if (selectedTabElement.data('linkKey') == thisInstance.detailViewDetailsTabLabel) {\n\t\t\t\t\t\t\t\t\tthisInstance.registerEventForPicklistDependencySetup(thisInstance.getForm());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.updateRecordsPDFTemplateBtn(thisInstance.getForm());\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t\t\teditElement.addClass('d-none');\n\t\t\t\t\t\t\t\tdetailViewValue.removeClass('d-none');\n\t\t\t\t\t\t\t\tactionElement.removeClass('d-none');\n\t\t\t\t\t\t\t\teditElement.off('clickoutside');\n\t\t\t\t\t\t\t\treadRecord.prop('disabled', false);\n\t\t\t\t\t\t\t\tcurrentTdElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_SAVE_NOTIFY_FAIL'),\n\t\t\t\t\t\t\t\t\ttext: textStatus\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\teditElement.on('clickoutside', saveHandler);\n\t\t\t});\n\t\t},\n\t\ttriggerDisplayTypeEvent: function () {\n\t\t\tlet widthType = app.cacheGet('widthType', 'narrowWidthType');\n\t\t\tif (widthType) {\n\t\t\t\tlet elements = jQuery('#detailView').find('td');\n\t\t\t\telements.addClass(widthType);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function updates the hidden elements which is used for creating relations\n\t\t */\n\t\taddElementsToQuickCreateForCreatingRelation: function (container, customParams) {\n\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" >').appendTo(container);\n\t\t\tjQuery.each(customParams, function (index, value) {\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + index + '\" value=\"' + value + '\" >').appendTo(container);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register event for activity widget for adding\n\t\t * event and task from the widget\n\t\t */\n\t\tregisterEventForActivityWidget: function () {\n\t\t\tlet thisInstance = this;\n\n\t\t\t/*\n\t\t\t * Register click event for add button in Related Activities widget\n\t\t\t */\n\t\t\tjQuery('.createActivity').on('click', function (e) {\n\t\t\t\tlet referenceModuleName = 'Calendar';\n\t\t\t\tlet recordId = thisInstance.getRecordId();\n\t\t\t\tlet module = app.getModuleName();\n\t\t\t\tlet element = jQuery(e.currentTarget);\n\n\t\t\t\tlet customParams = {};\n\t\t\t\tcustomParams['sourceModule'] = module;\n\t\t\t\tcustomParams['sourceRecord'] = recordId;\n\t\t\t\tif (\n\t\t\t\t\tmodule != '' &&\n\t\t\t\t\treferenceModuleName != '' &&\n\t\t\t\t\ttypeof thisInstance.referenceFieldNames[referenceModuleName] !== 'undefined' &&\n\t\t\t\t\ttypeof thisInstance.referenceFieldNames[referenceModuleName][module] !== 'undefined'\n\t\t\t\t) {\n\t\t\t\t\tlet relField = thisInstance.referenceFieldNames[referenceModuleName][module];\n\t\t\t\t\tcustomParams[relField] = recordId;\n\t\t\t\t}\n\t\t\t\tlet fullFormUrl = element.data('url');\n\t\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\t\tthisInstance.addElementsToQuickCreateForCreatingRelation(data, customParams);\n\t\t\t\t\tlet taskGoToFullFormButton = data.find('[class^=\"CalendarQuikcCreateContents\"]').find('.js-full-editlink');\n\t\t\t\t\tlet eventsGoToFullFormButton = data.find('[class^=\"EventsQuikcCreateContents\"]').find('.js-full-editlink');\n\t\t\t\t\tlet taskFullFormUrl = taskGoToFullFormButton.data('url') + '&' + fullFormUrl;\n\t\t\t\t\tlet eventsFullFormUrl = eventsGoToFullFormButton.data('url') + '&' + fullFormUrl;\n\t\t\t\t\ttaskGoToFullFormButton.data('url', taskFullFormUrl);\n\t\t\t\t\teventsGoToFullFormButton.data('url', eventsFullFormUrl);\n\t\t\t\t};\n\t\t\t\tlet callbackFunction = function () {\n\t\t\t\t\tthisInstance.getFiltersDataAndLoad(e);\n\t\t\t\t\tthisInstance.loadWidget($('.widgetContentBlock[data-type=\"Updates\"]'));\n\t\t\t\t};\n\t\t\t\tlet QuickCreateParams = {};\n\t\t\t\tQuickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\t\tQuickCreateParams['callbackFunction'] = callbackFunction;\n\t\t\t\tQuickCreateParams['data'] = Object.assign({}, customParams);\n\t\t\t\tQuickCreateParams['noCache'] = false;\n\t\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, QuickCreateParams);\n\t\t\t});\n\t\t},\n\t\tgetEndDate: function (startDate) {\n\t\t\tlet dateTab = startDate.split('-');\n\t\t\tlet date = new Date(dateTab[0], dateTab[1], dateTab[2]);\n\t\t\tlet newDate = new Date();\n\n\t\t\tnewDate.setDate(date.getDate() + 2);\n\t\t\treturn app.getStringDate(newDate);\n\t\t},\n\t\tgetSingleEventType: function (modDay, id, type) {\n\t\t\tlet dateStartEl = jQuery('[name=\"date_start\"]');\n\t\t\tlet dateStartVal = jQuery(dateStartEl).val();\n\t\t\tlet dateStartFormat = jQuery(dateStartEl).data('date-format');\n\t\t\tlet validDateFromat = Vtiger_Helper_Js.convertToDateString(dateStartVal, dateStartFormat, modDay, type);\n\t\t\tlet map = jQuery.extend({}, ['#b6a996,black']);\n\n\t\t\tlet params = {\n\t\t\t\tmodule: 'Calendar',\n\t\t\t\taction: 'Feed',\n\t\t\t\tstart: validDateFromat,\n\t\t\t\tend: this.getEndDate(validDateFromat),\n\t\t\t\ttype: type,\n\t\t\t\tmapping: map\n\t\t\t};\n\n\t\t\tAppConnector.request(params).done(function (events) {\n\t\t\t\tlet testDate = Vtiger_Helper_Js.convertToDateString(dateStartVal, dateStartFormat, modDay);\n\t\t\t\tif (!jQuery.isEmptyObject(events)) {\n\t\t\t\t\tif (events[0]['activitytype'] === 'Task') {\n\t\t\t\t\t\tfor (let ev in events) {\n\t\t\t\t\t\t\tif (events[ev]['start'].indexOf(testDate) > -1) {\n\t\t\t\t\t\t\t\tjQuery('#' + id + ' .table').append(\n\t\t\t\t\t\t\t\t\t'<tr><td><a target=\"_blank\" href=\"' +\n\t\t\t\t\t\t\t\t\t\tevents[ev]['url'] +\n\t\t\t\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t\t\t\tevents[ev]['title'] +\n\t\t\t\t\t\t\t\t\t\t'</a></td></tr>'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0; i < events[0].length; i++) {\n\t\t\t\t\t\t\tif (events[0][i]['start'].indexOf(testDate) > -1) {\n\t\t\t\t\t\t\t\tjQuery('#' + id + ' .table').append(\n\t\t\t\t\t\t\t\t\t'<tr><td><a target=\"_blank\" href=\"' +\n\t\t\t\t\t\t\t\t\t\tevents[0][i]['url'] +\n\t\t\t\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t\t\t\tevents[0][i]['title'] +\n\t\t\t\t\t\t\t\t\t\t'</a></td></tr>'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to add module related record from summary widget\n\t\t */\n\t\tregisterFilterForAddingModuleRelatedRecordFromSummaryWidget: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tcontainer\n\t\t\t\t.find('.createRecordFromFilter')\n\t\t\t\t.off()\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\t\tlet summaryWidgetContainer = currentElement.closest('.js-detail-widget');\n\t\t\t\t\tlet referenceModuleName = summaryWidgetContainer.data('moduleName');\n\t\t\t\t\tlet quickcreateUrl = currentElement.data('url');\n\t\t\t\t\tlet quickCreateParams = {};\n\t\t\t\t\tlet autoCompleteFields = currentElement.data('acf');\n\t\t\t\t\tlet moduleName = currentElement.closest('.js-detail-widget-header').find('[name=\"relatedModule\"]').val();\n\t\t\t\t\tlet relatedParams = {};\n\t\t\t\t\tlet postQuickCreateSave = function (data) {\n\t\t\t\t\t\tthisInstance.postSummaryWidgetAddRecord(data, currentElement);\n\t\t\t\t\t\tif (referenceModuleName == 'ProjectTask') {\n\t\t\t\t\t\t\tthisInstance.loadModuleSummary();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif (typeof autoCompleteFields !== 'undefined') {\n\t\t\t\t\t\t$.each(autoCompleteFields, function (index, value) {\n\t\t\t\t\t\t\trelatedParams[index] = value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (Object.keys(relatedParams).length > 0) {\n\t\t\t\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\t\t\t}\n\t\t\t\t\tquickCreateParams['noCache'] = true;\n\t\t\t\t\tquickCreateParams['callbackFunction'] = postQuickCreateSave;\n\t\t\t\t\tlet progress = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlet quickCreate;\n\t\t\t\t\tif (window !== window.parent) {\n\t\t\t\t\t\tquickCreate = window.parent.App.Components.QuickCreate;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquickCreate = App.Components.QuickCreate;\n\t\t\t\t\t}\n\t\t\t\t\tquickCreate.getForm(quickcreateUrl, moduleName, quickCreateParams).done(function (data) {\n\t\t\t\t\t\tquickCreate.showModal(data, quickCreateParams);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcontainer\n\t\t\t\t.find('button.selectRelation')\n\t\t\t\t.off('click')\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tlet summaryWidgetContainer = jQuery(e.currentTarget).closest('.js-detail-widget');\n\t\t\t\t\tlet referenceModuleName = summaryWidgetContainer.data('moduleName');\n\t\t\t\t\tlet restrictionsField = $(this).data('rf');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tmodule: referenceModuleName,\n\t\t\t\t\t\tsrc_module: app.getModuleName(),\n\t\t\t\t\t\tsrc_record: thisInstance.getRecordId(),\n\t\t\t\t\t\tmulti_select: true,\n\t\t\t\t\t\trelationId: summaryWidgetContainer.data('relationId')\n\t\t\t\t\t};\n\t\t\t\t\tif (restrictionsField && Object.keys(restrictionsField).length > 0) {\n\t\t\t\t\t\tparams['search_key'] = restrictionsField.key;\n\t\t\t\t\t\tparams['search_value'] = restrictionsField.name;\n\t\t\t\t\t}\n\t\t\t\t\tapp.showRecordsList(params, (modal, instance) => {\n\t\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t.addRelationBetweenRecords(referenceModuleName, Object.keys(responseData), null, {\n\t\t\t\t\t\t\t\t\trelationId: params.relationId\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tthisInstance.loadWidget(summaryWidgetContainer.find('.widgetContentBlock'));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tregisterAddingInventoryRecords: function () {\n\t\t\tjQuery('.createInventoryRecordFromFilter').on('click', function (e) {\n\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\tlet createUrl = currentElement.data('url');\n\t\t\t\tlet autoCompleteFields = currentElement.data('acf');\n\t\t\t\tlet addidtionalParams = '';\n\t\t\t\tif (typeof autoCompleteFields !== 'undefined') {\n\t\t\t\t\t$.each(autoCompleteFields, function (index, value) {\n\t\t\t\t\t\taddidtionalParams = '&' + index + '=' + value;\n\t\t\t\t\t\tcreateUrl = createUrl.concat(addidtionalParams);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\twindow.location.href = createUrl;\n\t\t\t});\n\t\t},\n\t\tregisterEmailEvent: function () {\n\t\t\tthis.getContentHolder()\n\t\t\t\t.find('.resetRelationsEmail')\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_EMAIL_RESET_RELATIONS_CONFIRMATION')\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: 'OSSMailView',\n\t\t\t\t\t\t\taction: 'Relation',\n\t\t\t\t\t\t\tmoduleName: app.getModuleName(),\n\t\t\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t\t\t}).done(function (d) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({ text: d.result });\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tgetFiltersDataAndLoad: function (e, params) {\n\t\t\tlet data = this.getFiltersData(e, params);\n\t\t\tthis.loadWidget(data['container'], data['params']);\n\t\t},\n\t\tgetFiltersData: function (e, params) {\n\t\t\tlet currentElement;\n\t\t\tif (e.currentTarget) {\n\t\t\t\tcurrentElement = jQuery(e.currentTarget);\n\t\t\t} else {\n\t\t\t\tcurrentElement = e;\n\t\t\t}\n\t\t\tlet summaryWidgetContainer = currentElement.closest('.js-detail-widget');\n\t\t\tlet widget = summaryWidgetContainer.find('.widgetContentBlock');\n\t\t\tlet url = '&' + widget.data('url');\n\t\t\tlet urlParams = {};\n\t\t\turl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n\t\t\t\turlParams[key] = value;\n\t\t\t});\n\t\t\tlet urlNewParams = [];\n\t\t\tsummaryWidgetContainer.find('.js-switch, .js-filter_field').each(function (n, item) {\n\t\t\t\tlet value = '';\n\t\t\t\tlet element = jQuery(item);\n\t\t\t\tlet name = element.data('urlparams');\n\t\t\t\tif (element.attr('type') == 'radio') {\n\t\t\t\t\tif (element.prop('checked')) {\n\t\t\t\t\t\tvalue = typeof element.data('on-val') !== 'undefined' ? element.data('on-val') : element.data('off-val');\n\t\t\t\t\t\tlet additionalParams = element.data('params');\n\t\t\t\t\t\tif (typeof additionalParams !== typeof undefined && additionalParams !== false) {\n\t\t\t\t\t\t\t$.each(additionalParams, function (paramName, paramValue) {\n\t\t\t\t\t\t\t\tif (paramName in urlNewParams) {\n\t\t\t\t\t\t\t\t\turlNewParams[paramName].push(paramValue);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\turlNewParams[paramName] = paramValue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet selectedFilter = element.find('option:selected').val();\n\t\t\t\t\tlet fieldlable = element.data('fieldlable');\n\t\t\t\t\tlet filter = element.data('filter');\n\t\t\t\t\tif (element.data('return') === 'value') {\n\t\t\t\t\t\tvalue = selectedFilter;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (selectedFilter != fieldlable) {\n\t\t\t\t\t\t\tvalue = [[filter, 'e', selectedFilter]];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (name && value) {\n\t\t\t\t\tif (element.data('return') === 'value') {\n\t\t\t\t\t\turlNewParams[name] = value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (name in urlNewParams) {\n\t\t\t\t\t\t\turlNewParams[name].push(value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turlNewParams[name] = [value];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (params != undefined) {\n\t\t\t\t$.extend(urlNewParams, params);\n\t\t\t}\n\t\t\treturn { container: $(widget), params: $.extend(urlParams, urlNewParams) };\n\t\t},\n\t\tregisterChangeFilterForWidget: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tjQuery('.js-switch').on('change', function (e, state) {\n\t\t\t\t$(e.currentTarget).closest('.js-switch__btn').addClass('active').siblings().removeClass('active');\n\t\t\t\tthisInstance.getFiltersDataAndLoad(e);\n\t\t\t});\n\t\t\tjQuery('.js-filter_field').on('select2:select', function (e, state) {\n\t\t\t\tthisInstance.getFiltersDataAndLoad(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register all the events related to summary view widgets\n\t\t */\n\t\tregisterSummaryViewContainerEvents: function (summaryViewContainer) {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.registerEventForActivityWidget();\n\t\t\tthis.registerChangeFilterForWidget();\n\t\t\tthis.registerAddingInventoryRecords();\n\t\t\tthis.registerEmailEvent();\n\t\t\t/**\n\t\t\t * Function to handle the ajax edit for summary view fields\n\t\t\t */\n\t\t\tsummaryViewContainer.off('click').on('click', '.row .js-detail-quick-edit', function (e) {\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget);\n\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\tlet currentTdElement = currentTarget.closest('.fieldValue');\n\t\t\t\tthisInstance.ajaxEditHandling(currentTdElement);\n\t\t\t});\n\t\t\t/**\n\t\t\t * Function to handle actions after ajax save in summary view\n\t\t\t */\n\t\t\tsummaryViewContainer.on(thisInstance.fieldUpdatedEvent, '.js-widget-general-info', function () {\n\t\t\t\tlet updatesWidget = summaryViewContainer.find(\"[data-type='Updates']\"),\n\t\t\t\t\tparams;\n\t\t\t\tif (updatesWidget.length) {\n\t\t\t\t\tparams = thisInstance.getFiltersData(updatesWidget);\n\t\t\t\t\tupdatesWidget.find('.btnChangesReviewedOn').parent().remove();\n\t\t\t\t\tthisInstance.loadWidget(updatesWidget, params['params']);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsummaryViewContainer.on('click', '.editDefaultStatus', function (e) {\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget);\n\t\t\t\tcurrentTarget.popover('hide');\n\t\t\t\tlet url = currentTarget.data('url');\n\t\t\t\tif (url) {\n\t\t\t\t\tif (currentTarget.hasClass('showEdit')) {\n\t\t\t\t\t\tlet quickCreate = App.Components.QuickCreate;\n\t\t\t\t\t\tif (window !== window.parent) {\n\t\t\t\t\t\t\tquickCreate = window.parent.App.Components.QuickCreate;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tquickCreate.getForm(url, 'Calendar', { noCache: true }).done((data) => {\n\t\t\t\t\t\t\tquickCreate.showModal(data, {\n\t\t\t\t\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\t\t\t\t\tlet widget = currentTarget.closest('.widgetContentBlock');\n\t\t\t\t\t\t\t\t\tif (widget.length) {\n\t\t\t\t\t\t\t\t\t\tthisInstance.loadWidget(widget);\n\t\t\t\t\t\t\t\t\t\tlet updatesWidget = thisInstance.getContentHolder().find(\"[data-type='Updates']\");\n\t\t\t\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.loadWidget(updatesWidget);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthisInstance.loadRelatedList();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.registerRelatedModulesRecordCount();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showModalWindow(null, url);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * Register the event to edit Description for related activities\n\t\t\t */\n\t\t\tsummaryViewContainer.on('click', '.editDescription', function (e) {\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget),\n\t\t\t\t\tcurrentDiv = currentTarget.closest('.activityDescription'),\n\t\t\t\t\teditElement = currentDiv.find('.edit'),\n\t\t\t\t\tdetailViewElement = currentDiv.find('.value'),\n\t\t\t\t\tdescriptionText = currentDiv.find('.js-description-text'),\n\t\t\t\t\tdescriptionEmpty = currentDiv.find('.js-no-description'),\n\t\t\t\t\tsaveButton = currentDiv.find('.js-save-description'),\n\t\t\t\t\tcloseButton = currentDiv.find('.js-close-description'),\n\t\t\t\t\tactivityButtonContainer = currentDiv.find('.js-activity-buttons__container'),\n\t\t\t\t\tfieldnameElement = jQuery('.fieldname', editElement),\n\t\t\t\t\tfieldName = fieldnameElement.val(),\n\t\t\t\t\tfieldElement = jQuery('[name=\"' + fieldName + '\"]', editElement),\n\t\t\t\t\tcallbackFunction = () => {\n\t\t\t\t\t\tlet previousValue = fieldnameElement.data('prevValue'),\n\t\t\t\t\t\t\tajaxEditNewValue = fieldElement.val(),\n\t\t\t\t\t\t\tajaxEditNewLable = fieldElement.val(),\n\t\t\t\t\t\t\tactivityDiv = currentDiv.closest('.activityEntries'),\n\t\t\t\t\t\t\tactivityId = activityDiv.find('.activityId').val(),\n\t\t\t\t\t\t\tmoduleName = activityDiv.find('.activityModule').val(),\n\t\t\t\t\t\t\tactivityType = activityDiv.find('.activityType').val();\n\t\t\t\t\t\tif (previousValue == ajaxEditNewValue) {\n\t\t\t\t\t\t\tcloseDescription();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurrentDiv.progressIndicator();\n\t\t\t\t\t\t\teditElement.add(activityButtonContainer).addClass('d-none');\n\t\t\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\t\t\tresolve(fieldElement.validationEngine('validate'));\n\t\t\t\t\t\t\t}).then((errorExists) => {\n\t\t\t\t\t\t\t\t//If validation fails\n\t\t\t\t\t\t\t\tif (errorExists) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(currentDiv, callbackFunction);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tajaxEditNewValue = fieldElement.val(); //update editor value after conversion\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\t\t\t\t\trecord: activityId,\n\t\t\t\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t\t\t\t\tvalue: ajaxEditNewValue,\n\t\t\t\t\t\t\t\t\t\tmodule: moduleName,\n\t\t\t\t\t\t\t\t\t\tactivitytype: activityType\n\t\t\t\t\t\t\t\t\t}).done(() => {\n\t\t\t\t\t\t\t\t\t\tcurrentDiv.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tdetailViewElement.removeClass('d-none');\n\t\t\t\t\t\t\t\t\t\tcurrentTarget.show();\n\t\t\t\t\t\t\t\t\t\tdescriptionText.html(ajaxEditNewLable);\n\t\t\t\t\t\t\t\t\t\tfieldnameElement.data('prevValue', ajaxEditNewValue);\n\t\t\t\t\t\t\t\t\t\tif (ajaxEditNewValue === '') {\n\t\t\t\t\t\t\t\t\t\t\tdescriptionEmpty.removeClass('d-none');\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tdescriptionEmpty.addClass('d-none');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcloseDescription = function () {\n\t\t\t\t\t\tfieldElement.val(fieldnameElement.data('prevValue'));\n\t\t\t\t\t\teditElement.add(activityButtonContainer).addClass('d-none');\n\t\t\t\t\t\tdetailViewElement.removeClass('d-none');\n\t\t\t\t\t\tcurrentTarget.show();\n\t\t\t\t\t};\n\t\t\t\tApp.Fields.Text.Editor.register(currentDiv, { toolbar: 'Min' });\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tdetailViewElement.addClass('d-none');\n\t\t\t\tactivityButtonContainer.removeClass('d-none');\n\t\t\t\teditElement.removeClass('d-none').show();\n\t\t\t\tsaveButton.off('click').one('click', callbackFunction);\n\t\t\t\tcloseButton.off('click').one('click', closeDescription);\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * Register click event for add button in Related widgets\n\t\t\t * to add record from widget\n\t\t\t */\n\n\t\t\tjQuery('.changeDetailViewMode').on('click', function (e) {\n\t\t\t\tthisInstance\n\t\t\t\t\t.getTabs()\n\t\t\t\t\t.filter('[data-link-key=\"' + thisInstance.detailViewDetailsTabLabel + '\"]:not(.d-none)')\n\t\t\t\t\t.trigger('click');\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * Register click event for add button in Related widgets\n\t\t\t * to add record from widget\n\t\t\t */\n\t\t\tjQuery('.createRecord').on('click', function (e) {\n\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\tlet summaryWidgetContainer = currentElement.closest('.js-detail-widget');\n\t\t\t\tlet widgetHeaderContainer = summaryWidgetContainer.find('.js-detail-widget-header');\n\t\t\t\tlet referenceModuleName = widgetHeaderContainer.find('[name=\"relatedModule\"]').val();\n\t\t\t\tlet recordId = thisInstance.getRecordId();\n\t\t\t\tlet module = app.getModuleName();\n\t\t\t\tlet customParams = {};\n\t\t\t\tcustomParams['sourceModule'] = module;\n\t\t\t\tcustomParams['sourceRecord'] = recordId;\n\t\t\t\tif (\n\t\t\t\t\tmodule != '' &&\n\t\t\t\t\treferenceModuleName != '' &&\n\t\t\t\t\ttypeof thisInstance.referenceFieldNames[referenceModuleName] !== 'undefined' &&\n\t\t\t\t\ttypeof thisInstance.referenceFieldNames[referenceModuleName][module] !== 'undefined'\n\t\t\t\t) {\n\t\t\t\t\tlet fieldName = thisInstance.referenceFieldNames[referenceModuleName][module];\n\t\t\t\t\tcustomParams[fieldName] = recordId;\n\t\t\t\t}\n\n\t\t\t\tlet postQuickCreateSave = function (data) {\n\t\t\t\t\tthisInstance.postSummaryWidgetAddRecord(data, currentElement);\n\t\t\t\t};\n\n\t\t\t\tlet goToFullFormcallback = function (data) {\n\t\t\t\t\tthisInstance.addElementsToQuickCreateForCreatingRelation(data, customParams);\n\t\t\t\t};\n\n\t\t\t\tlet QuickCreateParams = {};\n\t\t\t\tQuickCreateParams['callbackFunction'] = postQuickCreateSave;\n\t\t\t\tQuickCreateParams['goToFullFormcallback'] = goToFullFormcallback;\n\t\t\t\tQuickCreateParams['data'] = customParams;\n\t\t\t\tQuickCreateParams['noCache'] = false;\n\t\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, QuickCreateParams);\n\t\t\t});\n\t\t\tthis.registerFastEditingFiels();\n\t\t},\n\t\taddRelationBetweenRecords: function (relatedModule, relatedModuleRecordId, selectedTabElement, params = {}, url) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet thisInstance = this;\n\t\t\tlet relatedController;\n\t\t\tif (selectedTabElement == undefined) {\n\t\t\t\tselectedTabElement = thisInstance.getSelectedTab();\n\t\t\t}\n\t\t\tif (url) {\n\t\t\t\trelatedController = Vtiger_RelatedList_Js.getInstanceByUrl(url, selectedTabElement);\n\t\t\t} else {\n\t\t\t\trelatedController = Vtiger_RelatedList_Js.getInstance(\n\t\t\t\t\tthisInstance.getRecordId(),\n\t\t\t\t\tapp.getModuleName(),\n\t\t\t\t\tselectedTabElement,\n\t\t\t\t\trelatedModule\n\t\t\t\t);\n\t\t\t}\n\t\t\trelatedController\n\t\t\t\t.addRelations(relatedModuleRecordId, params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet summaryViewContainer = thisInstance.getContentHolder();\n\t\t\t\t\tlet updatesWidget = summaryViewContainer.find(\"[data-type='Updates']\");\n\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\tlet params = thisInstance.getFiltersData(updatesWidget);\n\t\t\t\t\t\tupdatesWidget.find('.btnChangesReviewedOn').parent().remove();\n\t\t\t\t\t\tthisInstance.loadWidget(updatesWidget, params['params']);\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to handle Post actions after adding record from\n\t\t * summary view widget\n\t\t */\n\t\tpostSummaryWidgetAddRecord: function (data, currentElement) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet summaryWidgetContainer = currentElement.closest('.js-detail-widget');\n\t\t\tlet widgetContainer = summaryWidgetContainer.find('[class^=\"widgetContainer_\"]');\n\t\t\tlet widgetHeaderContainer = summaryWidgetContainer.find('.js-detail-widget-header');\n\t\t\tlet referenceModuleName = widgetHeaderContainer.find('[name=\"relatedModule\"]').val();\n\t\t\tlet idList = [];\n\t\t\tidList.push(data.result._recordId);\n\t\t\tlet params = {};\n\t\t\tif (summaryWidgetContainer.data('relationId')) {\n\t\t\t\tparams.relationId = summaryWidgetContainer.data('relationId');\n\t\t\t}\n\t\t\tthis.addRelationBetweenRecords(referenceModuleName, idList, null, params, widgetContainer.data('url')).done(\n\t\t\t\tfunction (data) {\n\t\t\t\t\tthisInstance.loadWidget(widgetContainer);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tregisterChangeEventForModulesList: function () {\n\t\t\tjQuery('#tagSearchModulesList').on('change', function (e) {\n\t\t\t\tlet modulesSelectElement = jQuery(e.currentTarget);\n\t\t\t\tif (modulesSelectElement.val() == 'all') {\n\t\t\t\t\tjQuery('[name=\"tagSearchModuleResults\"]').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tjQuery('[name=\"tagSearchModuleResults\"]').removeClass('d-none');\n\t\t\t\t\tlet selectedOptionValue = modulesSelectElement.val();\n\t\t\t\t\tjQuery('[name=\"tagSearchModuleResults\"]')\n\t\t\t\t\t\t.filter(':not(#' + selectedOptionValue + ')')\n\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEventForRelatedTabClick: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tlet detailContainer = detailContentsHolder.closest('div.detailViewInfo');\n\n\t\t\tjQuery('.related', detailContainer).on('click', 'li:not(.spaceRelatedList)', function (e, urlAttributes) {\n\t\t\t\tlet tabElement = jQuery(e.currentTarget);\n\t\t\t\tif (!tabElement.hasClass('dropdown')) {\n\t\t\t\t\tlet element = jQuery('<div></div>');\n\t\t\t\t\telement.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: detailContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlet url = tabElement.data('url');\n\t\t\t\t\tif (typeof urlAttributes !== 'undefined') {\n\t\t\t\t\t\tlet callBack = urlAttributes.callback;\n\t\t\t\t\t\tdelete urlAttributes.callback;\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.loadContents(url, urlAttributes)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tthisInstance.deSelectAllrelatedTabs();\n\t\t\t\t\t\t\tthisInstance.markTabAsSelected(tabElement);\n\t\t\t\t\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.registerModal(detailContentsHolder);\n\t\t\t\t\t\t\tif (typeof callBack == 'function') {\n\t\t\t\t\t\t\t\tcallBack(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Summary tab is clicked\n\t\t\t\t\t\t\tif (tabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\tthisInstance.loadWidgets();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.registerBasicEvents();\n\t\t\t\t\t\t\t// Let listeners know about page state change.\n\t\t\t\t\t\t\tapp.notifyPostAjaxReady();\n\t\t\t\t\t\t\tapp.event.trigger('DetailView.Tab.AfterLoad', data, thisInstance);\n\t\t\t\t\t\t\tapp.registerBlockAnimationEvent(detailContentsHolder);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register event for setting up picklistdependency\n\t\t * for a module if exist on change of picklist value\n\t\t */\n\t\tregisterEventForPicklistDependencySetup: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet picklistDependcyElemnt = jQuery('[name=\"picklistDependency\"]', container);\n\t\t\tif (picklistDependcyElemnt.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet picklistDependencyMapping = JSON.parse(picklistDependcyElemnt.val());\n\t\t\tlet sourcePicklists = Object.keys(picklistDependencyMapping);\n\t\t\tif (sourcePicklists.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet sourcePickListNames = [];\n\t\t\tfor (let i = 0; i < sourcePicklists.length; i++) {\n\t\t\t\tsourcePickListNames.push('[name=\"' + sourcePicklists[i] + '\"]');\n\t\t\t}\n\t\t\tsourcePickListNames = sourcePickListNames.join(',');\n\t\t\tlet sourcePickListElements = container.find(sourcePickListNames);\n\t\t\tsourcePickListElements.on('change', function (e) {\n\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\tlet sourcePicklistname = currentElement.attr('name');\n\n\t\t\t\tlet configuredDependencyObject = picklistDependencyMapping[sourcePicklistname];\n\t\t\t\tlet selectedValue = currentElement.val();\n\t\t\t\tlet targetObjectForSelectedSourceValue = configuredDependencyObject[selectedValue];\n\t\t\t\tlet picklistmap = configuredDependencyObject['__DEFAULT__'];\n\n\t\t\t\tif (typeof targetObjectForSelectedSourceValue === 'undefined') {\n\t\t\t\t\ttargetObjectForSelectedSourceValue = picklistmap;\n\t\t\t\t}\n\t\t\t\tjQuery.each(picklistmap, function (targetPickListName, targetPickListValues) {\n\t\t\t\t\tlet targetPickListMap = targetObjectForSelectedSourceValue[targetPickListName];\n\t\t\t\t\tif (typeof targetPickListMap === 'undefined') {\n\t\t\t\t\t\ttargetPickListMap = targetPickListValues;\n\t\t\t\t\t}\n\t\t\t\t\tlet targetPickList = jQuery('[name=\"' + targetPickListName + '\"]', container);\n\t\t\t\t\tif (targetPickList.length <= 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//On change of SourceField value, If TargetField value is not there in mapping, make user to select the new target value also.\n\t\t\t\t\tlet selectedValue = targetPickList.data('selectedValue');\n\t\t\t\t\tif (jQuery.inArray(selectedValue, targetPickListMap) == -1) {\n\t\t\t\t\t\tthisInstance.targetPicklistChange = true;\n\t\t\t\t\t\tthisInstance.targetPicklist = targetPickList.closest('td');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthisInstance.targetPicklistChange = false;\n\t\t\t\t\t\tthisInstance.targetPicklist = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet listOfAvailableOptions = targetPickList.data('availableOptions');\n\t\t\t\t\tif (typeof listOfAvailableOptions === 'undefined') {\n\t\t\t\t\t\tlistOfAvailableOptions = jQuery('option', targetPickList);\n\t\t\t\t\t\ttargetPickList.data('available-options', listOfAvailableOptions);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet targetOptions = new jQuery();\n\t\t\t\t\tlet optionSelector = [];\n\t\t\t\t\toptionSelector.push('');\n\t\t\t\t\tfor (let i = 0; i < targetPickListMap.length; i++) {\n\t\t\t\t\t\toptionSelector.push(targetPickListMap[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.each(listOfAvailableOptions, function (i, e) {\n\t\t\t\t\t\tlet picklistValue = jQuery(e).val();\n\t\t\t\t\t\tif (jQuery.inArray(picklistValue, optionSelector) != -1) {\n\t\t\t\t\t\t\ttargetOptions = targetOptions.add(jQuery(e));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlet targetPickListSelectedValue = '';\n\t\t\t\t\ttargetPickListSelectedValue = targetOptions.filter('[selected]').val();\n\t\t\t\t\tif (targetPickListMap.length == 1) {\n\t\t\t\t\t\ttargetPickListSelectedValue = targetPickListMap[0]; // to automatically select picklist if only one picklistmap is present.\n\t\t\t\t\t}\n\t\t\t\t\ttargetPickList.html(targetOptions).val(targetPickListSelectedValue).trigger('change');\n\t\t\t\t});\n\t\t\t});\n\t\t\t//To Trigger the change on load\n\t\t\tsourcePickListElements.trigger('change');\n\t\t},\n\t\t/**\n\t\t * Function to get child comments\n\t\t */\n\t\tgetChildComments: function (commentId) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet url =\n\t\t\t\t'module=' +\n\t\t\t\tapp.getModuleName() +\n\t\t\t\t'&view=Detail&record=' +\n\t\t\t\tthis.getRecordId() +\n\t\t\t\t'&mode=showChildComments&commentid=' +\n\t\t\t\tcommentId;\n\t\t\tlet dataObj = this.getCommentThread(url);\n\t\t\tdataObj.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to get parent comment\n\t\t * @param {number} commentId\n\t\t * @returns {string}\n\t\t */\n\t\tgetParentComments(commentId) {\n\t\t\tlet aDeferred = $.Deferred(),\n\t\t\t\turl =\n\t\t\t\t\t'module=' +\n\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t'&view=Detail&record=' +\n\t\t\t\t\tthis.getRecordId() +\n\t\t\t\t\t'&mode=showParentComments&commentid=' +\n\t\t\t\t\tcommentId;\n\t\t\tthis.getCommentThread(url).done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to show total records count in listview on hover\n\t\t * of pageNumber text\n\t\t */\n\t\tregisterEventForTotalRecordsCount: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = this.getContentHolder();\n\t\t\tdetailContentsHolder.on('click', '.totalNumberOfRecords', function (e) {\n\t\t\t\tlet element = jQuery(e.currentTarget);\n\t\t\t\tlet totalNumberOfRecords = jQuery('#totalCount').val();\n\t\t\t\telement.addClass('d-none');\n\t\t\t\telement.parent().progressIndicator({});\n\t\t\t\tif (totalNumberOfRecords == '') {\n\t\t\t\t\tlet selectedTabElement = thisInstance.getSelectedTab();\n\t\t\t\t\tlet relatedModuleName = thisInstance.getRelatedModuleName();\n\t\t\t\t\tlet relatedController = Vtiger_RelatedList_Js.getInstance(\n\t\t\t\t\t\tthisInstance.getRecordId(),\n\t\t\t\t\t\tapp.getModuleName(),\n\t\t\t\t\t\tselectedTabElement,\n\t\t\t\t\t\trelatedModuleName\n\t\t\t\t\t);\n\t\t\t\t\trelatedController.getRelatedPageCount().done(function () {\n\t\t\t\t\t\tthisInstance.showPagingInfo();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.showPagingInfo();\n\t\t\t\t}\n\t\t\t\telement.parent().progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\t\tshowPagingInfo: function () {\n\t\t\tlet totalNumberOfRecords = jQuery('#totalCount').val();\n\t\t\tlet pageNumberElement = jQuery('.pageNumbersText');\n\t\t\tlet pageRange = pageNumberElement.text();\n\t\t\tlet newPagingInfo = pageRange + ' (' + totalNumberOfRecords + ')';\n\t\t\tlet listViewEntriesCount = parseInt(jQuery('#noOfEntries').val());\n\t\t\tif (listViewEntriesCount != 0) {\n\t\t\t\tjQuery('.pageNumbersText').html(newPagingInfo);\n\t\t\t} else {\n\t\t\t\tjQuery('.pageNumbersText').html('');\n\t\t\t}\n\t\t},\n\t\tgetCustomFieldNameValueMap: function (fieldNameValueMap) {\n\t\t\treturn fieldNameValueMap;\n\t\t},\n\t\tregisterSetReadRecord: function (detailContentsHolder) {\n\t\t\tlet thisInstance = this;\n\t\t\tdetailContentsHolder.on('click', '.setReadRecord', function (e) {\n\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\tcurrentElement.closest('.btn-group').addClass('d-none');\n\t\t\t\tjQuery('#Accounts_detailView_fieldValue_was_read').find('.value').text(app.vtranslate('LBL_YES'));\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\trecord: thisInstance.getRecordId(),\n\t\t\t\t\tfield: 'was_read',\n\t\t\t\t\tvalue: 'on'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_SET_READ_RECORD'),\n\t\t\t\t\t\ttitle: app.vtranslate('System'),\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t};\n\t\t\t\t\tapp.showNotify(params);\n\t\t\t\t\tlet relatedTabKey = jQuery('.related li.active');\n\t\t\t\t\tif (\n\t\t\t\t\t\trelatedTabKey.data('linkKey') == thisInstance.detailViewSummaryTabLabel ||\n\t\t\t\t\t\trelatedTabKey.data('linkKey') == thisInstance.detailViewDetailsTabLabel\n\t\t\t\t\t) {\n\t\t\t\t\t\tthisInstance.reloadTabContent();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterFastEditingFiels: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet fastEditingFiels = jQuery('.summaryWidgetFastEditing select');\n\t\t\tfastEditingFiels.on('change', function (e) {\n\t\t\t\tlet fieldElement = jQuery(e.currentTarget);\n\t\t\t\tlet fieldContainer = fieldElement.closest('.editField');\n\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\tposition: 'summaryWidgetFastEditing',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet fieldName = fieldContainer.data('fieldname');\n\t\t\t\tfieldName = fieldName.replace('q_', '');\n\t\t\t\tlet fieldValue = fieldElement.val();\n\t\t\t\tlet errorExists = fieldElement.validationEngine('validate');\n\t\t\t\tif (errorExists) {\n\t\t\t\t\tfieldContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet preFieldSaveEvent = jQuery.Event(thisInstance.fieldPreSave);\n\t\t\t\tfieldElement.trigger(preFieldSaveEvent, {\n\t\t\t\t\tfieldValue: fieldValue,\n\t\t\t\t\trecordId: thisInstance.getRecordId()\n\t\t\t\t});\n\t\t\t\tlet fieldNameValueMap = {};\n\t\t\t\tfieldNameValueMap['value'] = fieldValue;\n\t\t\t\tfieldNameValueMap['field'] = fieldName;\n\t\t\t\tfieldNameValueMap = thisInstance.getCustomFieldNameValueMap(fieldNameValueMap);\n\t\t\t\tthisInstance.saveFieldValues(fieldNameValueMap);\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet params = {\n\t\t\t\t\ttitle: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t};\n\t\t\t\tapp.showNotify(params);\n\t\t\t\tthisInstance.reloadTabContent();\n\t\t\t});\n\t\t},\n\t\tregisterHelpInfo: function (form) {\n\t\t\tif (!form) {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tapp.showPopoverElementView(form.find('.js-help-info'));\n\t\t},\n\t\t/**\n\t\t * Register related modules record cound\n\t\t * @param {jQuery} tabContainer\n\t\t */\n\t\tregisterRelatedModulesRecordCount(tabContainer) {\n\t\t\tconst moreList = $('.related .nav .dropdown-menu');\n\t\t\tlet relationContainer = tabContainer;\n\t\t\tif (!relationContainer || typeof relationContainer.length === 'undefined') {\n\t\t\t\trelationContainer = $(\n\t\t\t\t\t'.related .nav > .relatedNav, .related .nav > .mainNav, .detailViewBlockLink, .related .nav .dropdown-menu > .relatedNav'\n\t\t\t\t);\n\t\t\t}\n\t\t\trelationContainer.each((n, item) => {\n\t\t\t\titem = $(item);\n\t\t\t\tlet relationId = item.data('relationId'),\n\t\t\t\t\trelatedModule = item.data('reference');\n\t\t\t\tif (item.data('count') === 1) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\t\trelatedModule: relatedModule,\n\t\t\t\t\t\tmode: 'getRelatedListPageCount',\n\t\t\t\t\t\trelationId: relationId,\n\t\t\t\t\t\ttab_label: item.data('label-key')\n\t\t\t\t\t}).done((response) => {\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\tif (response.result.numberOfRecords === 0) {\n\t\t\t\t\t\t\t\tresponse.result.numberOfRecords = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem.find('.count').text(response.result.numberOfRecords);\n\t\t\t\t\t\t\tmoreList\n\t\t\t\t\t\t\t\t.find('[data-reference=\"${relatedModule}\"][data-relation-id=\"${relationId}\"] .count')\n\t\t\t\t\t\t\t\t.text(response.result.numberOfRecords);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to display a new comments\n\t\t */\n\t\taddComment: function (currentTarget, data) {\n\t\t\tconst self = this;\n\t\t\tlet mode = currentTarget.data('mode'),\n\t\t\t\tclosestAddCommentBlock = currentTarget.closest('.js-add-comment-block'),\n\t\t\t\tcommentTextAreaElement = closestAddCommentBlock.find('.js-comment-content'),\n\t\t\t\tcommentInfoBlock = currentTarget.closest('.js-comment-single');\n\t\t\tcommentTextAreaElement.html('');\n\t\t\tif (mode == 'add') {\n\t\t\t\tlet commentId = data['result']['id'],\n\t\t\t\t\tcommentHtml = self.getCommentUI(commentId);\n\t\t\t\tcommentHtml.done(function (data) {\n\t\t\t\t\tlet commentBlock = closestAddCommentBlock.closest('.js-comment-details'),\n\t\t\t\t\t\tdetailContentsHolder = self.getContentHolder(),\n\t\t\t\t\t\tnoCommentsMsgContainer = $('.js-noCommentsMsgContainer', detailContentsHolder);\n\t\t\t\t\tnoCommentsMsgContainer.remove();\n\t\t\t\t\tif (commentBlock.length > 0) {\n\t\t\t\t\t\tclosestAddCommentBlock.remove();\n\t\t\t\t\t\tlet childComments = commentBlock.find('ul');\n\t\t\t\t\t\tif (childComments.length <= 0) {\n\t\t\t\t\t\t\tlet currentChildCommentsCount = commentInfoBlock\n\t\t\t\t\t\t\t\t\t.find('.js-view-thread-block')\n\t\t\t\t\t\t\t\t\t.data('data-child-comments-count'),\n\t\t\t\t\t\t\t\tnewChildCommentCount = currentChildCommentsCount + 1;\n\t\t\t\t\t\t\tcommentInfoBlock.find('.js-child-comments-count').text(newChildCommentCount);\n\t\t\t\t\t\t\tlet parentCommentId = commentInfoBlock.find('.js-comment-info-header').data('commentid');\n\t\t\t\t\t\t\tself.getChildComments(parentCommentId).done(function (responsedata) {\n\t\t\t\t\t\t\t\t$(responsedata).appendTo(commentBlock);\n\t\t\t\t\t\t\t\tcommentInfoBlock.find('.js-view-thread-block').hide();\n\t\t\t\t\t\t\t\tcommentInfoBlock.find('.hideThreadBlock').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('<li class=\"js-comment-details commentDetails\">' + data + '</li>').appendTo(\n\t\t\t\t\t\t\t\tcommentBlock.find('.js-comments-body')\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('<li class=\"js-comment-details commentDetails\">' + data + '</li>').prependTo(\n\t\t\t\t\t\t\tclosestAddCommentBlock.closest('.contents').find('.commentsList')\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcommentInfoBlock.find('.js-comment-container').show();\n\t\t\t\t\tapp.event.trigger('DetailView.SaveComment.AfterLoad', commentInfoBlock, data);\n\t\t\t\t});\n\t\t\t} else if (mode == 'edit') {\n\t\t\t\tlet modifiedTime = commentInfoBlock.find('.js-comment-modified-time'),\n\t\t\t\t\tcommentInfoContent = commentInfoBlock.find('.js-comment-info'),\n\t\t\t\t\tcommentEditStatus = commentInfoBlock.find('.js-edited-status'),\n\t\t\t\t\tcommentReason = commentInfoBlock.find('.js-edit-reason-span');\n\t\t\t\tcommentInfoContent.html(data.result.commentcontent);\n\t\t\t\tcommentReason.html(data.result.reasontoedit);\n\t\t\t\tmodifiedTime.html(data.result.modifiedtime);\n\t\t\t\tmodifiedTime.attr('title', data.result.modifiedtimetitle);\n\t\t\t\tif (commentEditStatus.hasClass('d-none')) {\n\t\t\t\t\tcommentEditStatus.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (data.result.reasontoedit != '') {\n\t\t\t\t\tcommentInfoBlock.find('.js-edit-reason').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tcommentInfoContent.show();\n\t\t\t\tcommentInfoBlock.find('.js-comment-container').show();\n\t\t\t\tclosestAddCommentBlock.remove();\n\t\t\t\tapp.event.trigger('DetailView.SaveComment.AfterUpdate', commentInfoBlock, data);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register all comment events\n\t\t * @param {jQuery} detailContentsHolder\n\t\t */\n\t\tregisterCommentEvents(detailContentsHolder) {\n\t\t\tconst self = this;\n\t\t\tdetailContentsHolder.on('click', '.js-close-comment-block', function (e) {\n\t\t\t\tlet commentInfoBlock = $(e.currentTarget.closest('.js-comment-single'));\n\t\t\t\tcommentInfoBlock.find('.js-comment-container').show();\n\t\t\t\tcommentInfoBlock.find('.js-comment-info').show();\n\t\t\t\tself.removeCommentBlock();\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-reply-comment', function (e) {\n\t\t\t\tself.removeCommentBlock();\n\t\t\t\tself.hideButtonAction();\n\t\t\t\tlet commentInfoBlock = $(e.currentTarget).closest('.js-comment-single');\n\t\t\t\tcommentInfoBlock.find('.js-comment-container').hide();\n\t\t\t\tself.getCommentBlock().appendTo(commentInfoBlock).show();\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-edit-comment', function (e) {\n\t\t\t\tself.removeCommentBlock();\n\t\t\t\tself.hideButtonAction();\n\t\t\t\tlet commentInfoBlock = $(e.currentTarget).closest('.js-comment-single'),\n\t\t\t\t\tcommentInfoContent = commentInfoBlock.find('.js-comment-info'),\n\t\t\t\t\teditCommentBlock = self.getEditCommentBlock();\n\t\t\t\teditCommentBlock.find('.js-comment-content').html(commentInfoContent.html());\n\t\t\t\teditCommentBlock.find('.js-reason-to-edit').html(commentInfoBlock.find('.js-edit-reason-span').text());\n\t\t\t\tcommentInfoContent.hide();\n\t\t\t\tcommentInfoBlock.find('.js-comment-container').hide();\n\t\t\t\teditCommentBlock.appendTo(commentInfoBlock).show();\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-detail-view-save-comment', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (!element.is(':disabled')) {\n\t\t\t\t\tself\n\t\t\t\t\t\t.saveComment(e)\n\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\tself.registerRelatedModulesRecordCount();\n\t\t\t\t\t\t\tself.loadWidget(detailContentsHolder.find(\"[data-type='Comments']\")).done(function () {\n\t\t\t\t\t\t\t\telement.removeAttr('disabled');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\telement.removeAttr('disabled');\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-save-comment', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (!element.is(':disabled')) {\n\t\t\t\t\tself\n\t\t\t\t\t\t.saveComment(e)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tself.registerRelatedModulesRecordCount(self.getTabByLabel(self.detailViewRecentCommentsTabLabel));\n\t\t\t\t\t\t\tself.addComment(element, data);\n\t\t\t\t\t\t\telement.removeAttr('disabled');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\telement.removeAttr('disabled');\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t\tself.showCommentBlock();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-more-recent-comments ', function () {\n\t\t\t\tself.getTabByLabel(self.detailViewRecentCommentsTabLabel).trigger('click');\n\t\t\t});\n\t\t\tdetailContentsHolder.find('.js-detail-hierarchy-comments').on('change', function (e) {\n\t\t\t\tlet recentCommentsTab = self.getTabByLabel(self.detailViewRecentCommentsTabLabel),\n\t\t\t\t\turl = recentCommentsTab.data('url'),\n\t\t\t\t\tregex = /&hierarchy=+([\\w,]+)/;\n\t\t\t\turl = url.replace(regex, '');\n\t\t\t\tlet hierarchy = [];\n\t\t\t\tdetailContentsHolder.find('.js-detail-hierarchy-comments:checked').each(function () {\n\t\t\t\t\thierarchy.push($(this).val());\n\t\t\t\t});\n\t\t\t\tif (hierarchy.length !== 0) {\n\t\t\t\t\turl += '&hierarchy=' + hierarchy.join(',');\n\t\t\t\t}\n\t\t\t\trecentCommentsTab.data('url', url);\n\t\t\t\trecentCommentsTab.trigger('click');\n\t\t\t});\n\t\t\tdetailContentsHolder.on('keypress', '.js-comment-search', function (e) {\n\t\t\t\tif (13 === e.which) {\n\t\t\t\t\tself.submitSearchForm(detailContentsHolder);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-search-icon', function (e) {\n\t\t\t\tself.submitSearchForm(detailContentsHolder);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Submit search comment form\n\t\t * @param {jQuery} detailContentsHolder\n\t\t */\n\t\tsubmitSearchForm(detailContentsHolder) {\n\t\t\tlet searchTextDom = detailContentsHolder.find('.js-comment-search'),\n\t\t\t\twidgetContainer = searchTextDom.closest('[data-name=\"ModComments\"]'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator();\n\t\t\tif (searchTextDom.data('container') === 'widget' && !searchTextDom.val()) {\n\t\t\t\tlet request = widgetContainer.data('url');\n\t\t\t\tAppConnector.request(request).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tdetailContentsHolder.find('.js-comments-container').html(data);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet hierarchy = [],\n\t\t\t\t\tlimit = '',\n\t\t\t\t\tisWidget = false;\n\t\t\t\tif (searchTextDom.data('container') === 'widget') {\n\t\t\t\t\t(limit = widgetContainer.data('limit')), (isWidget = true);\n\t\t\t\t\twidgetContainer.find('.js-hierarchy-comments:checked').each(function () {\n\t\t\t\t\t\thierarchy.push($(this).val());\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdetailContentsHolder.find('.js-detail-hierarchy-comments:checked').each(function () {\n\t\t\t\t\t\thierarchy.push($(this).val());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Detail',\n\t\t\t\t\tmode: 'showSearchComments',\n\t\t\t\t\thierarchy: hierarchy.join(','),\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tsearch_key: searchTextDom.val(),\n\t\t\t\t\tis_widget: isWidget\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (!searchTextDom.val()) {\n\t\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdetailContentsHolder.find('.js-comments-body').html(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register hierarchy comments buttons\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tregisterCommentEventsInDetail(widgetContainer) {\n\t\t\tnew App.Fields.Text.Completions($('.js-completions').eq(0), { emojiPanel: false });\n\t\t\twidgetContainer.on('change', '.js-hierarchy-comments', function (e) {\n\t\t\t\tlet hierarchy = [];\n\t\t\t\twidgetContainer.find('.js-hierarchy-comments').each(function () {\n\t\t\t\t\tif ($(this).is(':checked')) {\n\t\t\t\t\t\thierarchy.push($(this).val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!hierarchy.length) {\n\t\t\t\t\twidgetContainer.find('.js-detail-widget-content').html('');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Detail',\n\t\t\t\t\tmode: 'showRecentComments',\n\t\t\t\t\thierarchy: hierarchy.join(','),\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tlimit: widgetContainer.find('.widgetContentBlock').data('limit')\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet widgetDataContainer = widgetContainer.find('.js-detail-widget-content');\n\t\t\t\t\twidgetDataContainer.html(data);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetDataContainer.find('.select2'));\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterMailPreviewWidget: function (container) {\n\t\t\tconst self = this;\n\t\t\tcontainer.on('click', '.showMailBody', (e) => {\n\t\t\t\tlet row = $(e.currentTarget).closest('.js-mail-row'),\n\t\t\t\t\tmailBody = row.find('.mailBody'),\n\t\t\t\t\tmailTeaser = row.find('.mailTeaser');\n\t\t\t\tmailBody.toggleClass('d-none');\n\t\t\t\tmailTeaser.toggleClass('d-none');\n\t\t\t});\n\t\t\tcontainer.find('[name=\"mail-type\"]').on('change', function (e) {\n\t\t\t\tself.loadMailPreviewWidget(container);\n\t\t\t});\n\t\t\tcontainer.find('[name=\"mailFilter\"]').on('change', function (e) {\n\t\t\t\tself.loadMailPreviewWidget(container);\n\t\t\t});\n\t\t\tcontainer.on('click', '.showMailsModal', (e) => {\n\t\t\t\tlet url = $(e.currentTarget).data('url');\n\t\t\t\tlet type = container.find('[name=\"mail-type\"]');\n\t\t\t\tlet typeValue = '';\n\t\t\t\tif (type.length > 0) {\n\t\t\t\t\ttypeValue = type.val();\n\t\t\t\t} else {\n\t\t\t\t\ttypeValue = 'All';\n\t\t\t\t}\n\t\t\t\turl += '&type=' + typeValue;\n\t\t\t\tif (container.find('[name=\"mailFilter\"]').length > 0) {\n\t\t\t\t\turl += '&mailFilter=' + container.find('[name=\"mailFilter\"]').val();\n\t\t\t\t}\n\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow('', url, (data) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tself.registerMailPreviewWidget(data);\n\t\t\t\t\tVtiger_Index_Js.registerMailButtons(data);\n\t\t\t\t\tdata.find('.expandAllMails').click();\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.expandAllMails').on('click', function (e) {\n\t\t\t\tcontainer.find('.mailBody').removeClass('d-none');\n\t\t\t\tcontainer.find('.mailTeaser').addClass('d-none');\n\t\t\t\tcontainer.find('.showMailBody .js-toggle-icon').removeClass('fa-caret-down').addClass('fa-caret-up');\n\t\t\t});\n\t\t\tcontainer.find('.collapseAllMails').on('click', function (e) {\n\t\t\t\tcontainer.find('.mailBody').addClass('d-none');\n\t\t\t\tcontainer.find('.mailTeaser').removeClass('d-none');\n\t\t\t\tcontainer.find('.showMailBody .js-toggle-icon').removeClass('fa-caret-up').addClass('fa-caret-down');\n\t\t\t});\n\t\t\tcontainer\n\t\t\t\t.find('.showMailModal')\n\t\t\t\t.off('click')\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\t\tapp.showModalWindow('', $(e.currentTarget).data('url') + '&noloadlibs=1', function (data) {\n\t\t\t\t\t\tVtiger_Index_Js.registerMailButtons(data);\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tloadMailPreviewWidget: function (widgetContent) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet widgetDataContainer = widgetContent.find('.js-detail-widget-content');\n\t\t\tlet recordId = $('#recordId').val();\n\t\t\tlet progress = widgetDataContainer.progressIndicator();\n\t\t\tlet params = {};\n\t\t\tparams['module'] = 'OSSMailView';\n\t\t\tparams['view'] = 'Widget';\n\t\t\tparams['smodule'] = $('#module').val();\n\t\t\tparams['srecord'] = recordId;\n\t\t\tparams['mode'] = 'showEmailsList';\n\t\t\tparams['type'] = $('[name=\"mail-type\"]').val();\n\t\t\tparams['mailFilter'] = $('[name=\"mailFilter\"]').val();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\twidgetDataContainer.html(data);\n\t\t\t\tapp.event.trigger('DetailView.Widget.AfterLoad', widgetDataContainer, params['module'], thisInstance);\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\t\tregisterEmailEvents: function (detailContentsHolder) {\n\t\t\tVtiger_Index_Js.registerMailButtons(detailContentsHolder);\n\t\t},\n\t\tregisterMapsEvents: function (container) {\n\t\t\tif (container.find('#coordinates').length) {\n\t\t\t\tlet mapView = new OpenStreetMap_Map_Js();\n\t\t\t\tmapView.registerDetailView(container);\n\t\t\t}\n\t\t},\n\t\tregisterSocialMediaEvents(container) {\n\t\t\tlet socialMediaContainer = container.find('.tpl-Detail-SocialMedia');\n\t\t\tif (socialMediaContainer.length) {\n\t\t\t}\n\t\t},\n\t\tregisterShowSummary: function (container) {\n\t\t\tcontainer.on('click', '.showSummaryRelRecord', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet id = currentTarget.data('id');\n\t\t\t\tlet summaryView = container.find('.summaryRelRecordView' + id);\n\t\t\t\tcontainer.find('.listViewEntriesTable').css('display', 'none');\n\t\t\t\tsummaryView.show();\n\t\t\t});\n\t\t\tcontainer.on('click', '.hideSummaryRelRecordView', function (e) {\n\t\t\t\tlet summaryView = container.find('.summaryRelRecordView');\n\t\t\t\tcontainer.find('.listViewEntriesTable').css('display', 'table');\n\t\t\t\tsummaryView.hide();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation(element, picklistName) {\n\t\t\tconst self = this;\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\tmessage: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION')\n\t\t\t}).done(() => {\n\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\tself\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\t\tfield: picklistName\n\t\t\t\t\t})\n\t\t\t\t\t.done(() => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Change status from progress\n\t\t */\n\t\tregisterProgress() {\n\t\t\tconst self = this;\n\t\t\t$('.js-header-progress-bar').each((index, element) => {\n\t\t\t\tlet picklistName = $(element).data('picklistName');\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-access')\n\t\t\t\t\t.on('click', (e) => {\n\t\t\t\t\t\tself.showProgressConfirmation(e.currentTarget, picklistName);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tloadChat() {\n\t\t\tlet chatVue = $('#ChatRecordRoomVue', this.detailViewContentHolder);\n\t\t\tif (chatVue.length) {\n\t\t\t\tlet chatContainer = this.detailViewContentHolder.find('.js-chat-container');\n\t\t\t\tconst padding = 10;\n\t\t\t\tchatContainer.height(\n\t\t\t\t\t$(document).height() - chatContainer.offset().top - $('.js-footer').outerHeight() - padding\n\t\t\t\t);\n\t\t\t\twindow.ChatRecordRoomVueComponent.mount({\n\t\t\t\t\tel: '#ChatRecordRoomVue'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterChat() {\n\t\t\tif (window.ChatRecordRoomVueComponent !== undefined) {\n\t\t\t\tthis.loadChat();\n\t\t\t\tapp.event.on('DetailView.Tab.AfterLoad', (e, data, instance) => {\n\t\t\t\t\tinstance.detailViewContentHolder.ready(() => {\n\t\t\t\t\t\tthis.loadChat();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tlet selectedTabElement = thisInstance.getSelectedTab();\n\t\t\t//register all the events for summary view container\n\n\t\t\tif (this.getSelectedTab().data('labelKey') === 'ModComments') {\n\t\t\t\tnew App.Fields.Text.Completions(detailContentsHolder.find('.js-completions'), {\n\t\t\t\t\temojiPanel: false\n\t\t\t\t});\n\t\t\t}\n\t\t\tapp.registerBlockAnimationEvent(this.getForm());\n\t\t\tthisInstance.registerSummaryViewContainerEvents(detailContentsHolder);\n\t\t\tthisInstance.registerCommentEvents(detailContentsHolder);\n\t\t\tthisInstance.registerEmailEvents(detailContentsHolder);\n\t\t\tthisInstance.registerMapsEvents(detailContentsHolder);\n\t\t\tthisInstance.registerSocialMediaEvents(detailContentsHolder);\n\t\t\tthisInstance.registerSubProducts(detailContentsHolder);\n\t\t\tthisInstance.registerCollapsiblePanels(detailContentsHolder);\n\t\t\tApp.Fields.Date.register(detailContentsHolder);\n\t\t\tApp.Fields.DateTime.register(detailContentsHolder);\n\t\t\tApp.Fields.MultiImage.register(detailContentsHolder);\n\t\t\t//Attach time picker event to time fields\n\t\t\tapp.registerEventForClockPicker();\n\t\t\tthis.registerHelpInfo(detailContentsHolder);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(detailContentsHolder.find('select.select2'));\n\t\t\tApp.Fields.Text.Editor.register(detailContentsHolder, { toolbar: 'Min' });\n\t\t\tdetailContentsHolder.on('click', '#detailViewNextRecordButton', function (e) {\n\t\t\t\tlet url = selectedTabElement.data('url');\n\t\t\t\tlet currentPageNum = thisInstance.getRelatedListCurrentPageNum();\n\t\t\t\tlet requestedPage = parseInt(currentPageNum) + 1;\n\t\t\t\tlet nextPageUrl = url + '&page=' + requestedPage;\n\t\t\t\tthisInstance.loadContents(nextPageUrl);\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '#detailViewPreviousRecordButton', function (e) {\n\t\t\t\tlet url = selectedTabElement.data('url');\n\t\t\t\tlet currentPageNum = thisInstance.getRelatedListCurrentPageNum();\n\t\t\t\tlet requestedPage = parseInt(currentPageNum) - 1;\n\t\t\t\tlet nextPageUrl = url + '&page=' + requestedPage;\n\t\t\t\tthisInstance.loadContents(nextPageUrl);\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-detail-quick-edit', function (e) {\n\t\t\t\tthisInstance.ajaxEditHandling(jQuery(e.currentTarget).closest('.fieldValue'));\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', 'div.recordDetails span.squeezedWell', function (e) {\n\t\t\t\tlet currentElement = jQuery(e.currentTarget);\n\t\t\t\tlet relatedLabel = currentElement.data('reference');\n\t\t\t\tjQuery('.detailViewInfo .related .nav > li[data-reference=\"' + relatedLabel + '\"]').trigger('click');\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.relatedPopup', function (e) {\n\t\t\t\tlet editViewObj = new Vtiger_Edit_Js();\n\t\t\t\teditViewObj.showRecordsList(e);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tlet moduleList = detailContentsHolder.find('.referenceModulesList');\n\t\t\tmoduleList.on('change', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentElem = element.closest('.fieldValue');\n\t\t\t\tlet popupReferenceModule = element.val();\n\t\t\t\tlet referenceModuleElement = $('input[name=\"popupReferenceModule\"]', parentElem);\n\t\t\t\tlet prevSelectedReferenceModule = referenceModuleElement.val();\n\t\t\t\treferenceModuleElement.val(popupReferenceModule);\n\t\t\t\t//If Reference module is changed then we should clear the previous value\n\t\t\t\tif (prevSelectedReferenceModule != popupReferenceModule) {\n\t\t\t\t\tparentElem.find('.clearReferenceSelection').trigger('click');\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.clearReferenceSelection', function (e) {\n\t\t\t\tlet editViewInstance = Vtiger_Edit_Js.getInstance();\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\teditViewInstance.clearFieldValue(element);\n\t\t\t\telement.closest('.fieldValue').find('.sourceField').trigger(Vtiger_Edit_Js.referenceDeSelectionEvent);\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.createReferenceRecord', function (e) {\n\t\t\t\tlet editViewInstance = Vtiger_Edit_Js.getInstance();\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet controlElementDiv = element.closest('.fieldValue');\n\t\t\t\teditViewInstance.referenceCreateHandler(controlElementDiv);\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.viewThread', function (e) {\n\t\t\t\tthisInstance.hideButtonAction();\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget),\n\t\t\t\t\tcurrentTargetParent = currentTarget.parent(),\n\t\t\t\t\tcommentActionsBlock = currentTarget.closest('.js-comment-actions'),\n\t\t\t\t\tcurrentCommentBlock = currentTarget.closest('.js-comment-details'),\n\t\t\t\t\tulElements = currentCommentBlock.find('ul');\n\t\t\t\tif (ulElements.length > 0) {\n\t\t\t\t\tulElements.show();\n\t\t\t\t\tcommentActionsBlock.find('.hideThreadBlock').show();\n\t\t\t\t\tcurrentTargetParent.hide();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet commentId = currentTarget.closest('.js-comment-div').find('.js-comment-info-header').data('commentid');\n\t\t\t\tthisInstance.getChildComments(commentId).done(function (data) {\n\t\t\t\t\tjQuery(data).appendTo(jQuery(e.currentTarget).closest('.js-comment-details'));\n\t\t\t\t\tcommentActionsBlock.find('.hideThreadBlock').show();\n\t\t\t\t\tcurrentTargetParent.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.js-view-parent-thread', function (e) {\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget),\n\t\t\t\t\tcurrentTargetParent = currentTarget.parent(),\n\t\t\t\t\tcommentId = currentTarget.closest('.js-comment-div').find('.js-comment-info-header').data('commentid');\n\t\t\t\tthisInstance.getParentComments(commentId).done(function (data) {\n\t\t\t\t\t$(e.currentTarget.closest('.js-comment-details')).html(data);\n\t\t\t\t\tcurrentTarget.closest('.js-comment-actions').find('.hideThreadBlock').show();\n\t\t\t\t\tcurrentTargetParent.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.hideThread', function (e) {\n\t\t\t\tlet currentTarget = jQuery(e.currentTarget);\n\t\t\t\tlet currentTargetParent = currentTarget.parent();\n\t\t\t\tlet commentActionsBlock = currentTarget.closest('.js-comment-actions');\n\t\t\t\tlet currentCommentBlock = currentTarget.closest('.js-comment-details');\n\t\t\t\tcurrentCommentBlock.find('ul').hide();\n\t\t\t\tcurrentTargetParent.hide();\n\t\t\t\tcommentActionsBlock.find('.js-view-thread-block').show();\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.detailViewThread', function (e) {\n\t\t\t\tlet recentCommentsTab = thisInstance.getTabByLabel(thisInstance.detailViewRecentCommentsTabLabel);\n\t\t\t\tlet commentId = jQuery(e.currentTarget)\n\t\t\t\t\t.closest('.js-comment-single')\n\t\t\t\t\t.find('.js-comment-info-header')\n\t\t\t\t\t.data('commentid');\n\t\t\t\tlet commentLoad = function (data) {\n\t\t\t\t\twindow.location.href = window.location.href + '#' + commentId;\n\t\t\t\t};\n\t\t\t\trecentCommentsTab.trigger('click', { commentid: commentId, callback: commentLoad });\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreRecentRecords', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet recentCommentsTab = thisInstance.getTabByModule($(this).data('label-key'), $(this).data('relation-id'));\n\t\t\t\tif (recentCommentsTab.length) {\n\t\t\t\t\trecentCommentsTab.trigger('click');\n\t\t\t\t} else {\n\t\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\t\tcontainer = currentTarget.closest(\"[class^='widgetContainer_']\");\n\t\t\t\t\tif (container.length) {\n\t\t\t\t\t\tlet page = container.find('[name=\"page\"]:last').val(),\n\t\t\t\t\t\t\turl = container.data('url');\n\t\t\t\t\t\tcurrentTarget.prop('disabled', true);\n\t\t\t\t\t\turl = url.replace('&page=1', '&page=' + ++page);\n\t\t\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\t\t\tlet dataObj = $(data),\n\t\t\t\t\t\t\t\tcontainerTable = container.find('.js-detail-widget-content table');\n\t\t\t\t\t\t\tcurrentTarget.prop('disabled', false).addClass('d-none');\n\t\t\t\t\t\t\tcontainer.find('[name=\"page\"]:last').val(dataObj.find('[name=\"page\"]').val());\n\t\t\t\t\t\t\tif (containerTable.length) {\n\t\t\t\t\t\t\t\tcontainerTable.append(dataObj.find('tbody tr'));\n\t\t\t\t\t\t\t\tif (dataObj.find('.moreRecentRecords').length) {\n\t\t\t\t\t\t\t\t\tcurrentTarget.removeClass('d-none');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcontainer.find('.js-detail-widget-content').append(dataObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdetailContentsHolder.on('change', '.relatedHistoryTypes', function (e) {\n\t\t\t\tlet widgetContent = jQuery(this).closest('.widgetContentBlock').find('.widgetContent'),\n\t\t\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: widgetContent\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Detail',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'showRecentRelation',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: widgetContent.find('.js-relatedHistoryPageLimit').val(),\n\t\t\t\t\ttype: $(e.currentTarget).val()\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twidgetContent.find('#relatedHistoryCurrentPage').remove();\n\t\t\t\t\twidgetContent.find('#moreRelatedUpdates').remove();\n\t\t\t\t\twidgetContent.html(data);\n\t\t\t\t\tVtiger_Index_Js.registerMailButtons(widgetContent);\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreProductsService', function () {\n\t\t\t\tjQuery('.related .mainNav[data-reference=\"ProductsAndServices\"]:not(.d-none)').trigger('click');\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreRelatedUpdates', function () {\n\t\t\t\tlet widgetContainer = jQuery(this).closest('.widgetContentBlock');\n\t\t\t\tlet widgetContent = widgetContainer.find('.widgetContent');\n\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\telementToBlock: widgetContent\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentPage = widgetContent.find('#relatedHistoryCurrentPage').val();\n\t\t\t\tlet nextPage = parseInt(currentPage) + 1;\n\t\t\t\tlet types = widgetContainer.find('.relatedHistoryTypes').val();\n\t\t\t\tlet pageLimit = widgetContent.find('#relatedHistoryPageLimit').val();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Detail',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'showRecentRelation',\n\t\t\t\t\tpage: nextPage,\n\t\t\t\t\tlimit: pageLimit,\n\t\t\t\t\ttype: types\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twidgetContent.find('#relatedHistoryCurrentPage').remove();\n\t\t\t\t\twidgetContent.find('#moreRelatedUpdates').remove();\n\t\t\t\t\twidgetContent.find('#relatedUpdates').append(data);\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreRecentUpdates', function (e) {\n\t\t\t\tconst container = $(e.currentTarget).closest('.recentActivitiesContainer');\n\t\t\t\tlet newChange = container.find('#newChange').val(),\n\t\t\t\t\tnextPage = parseInt(container.find('#updatesCurrentPage').val()) + 1,\n\t\t\t\t\turl;\n\t\t\t\tif (container.closest('.js-detail-widget').length) {\n\t\t\t\t\tlet data = thisInstance.getFiltersData(\n\t\t\t\t\t\te,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpage: nextPage,\n\t\t\t\t\t\t\ttab_label: 'LBL_UPDATES',\n\t\t\t\t\t\t\tnewChange: newChange\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontainer.find('#updates')\n\t\t\t\t\t);\n\t\t\t\t\turl = data['params'];\n\t\t\t\t} else {\n\t\t\t\t\turl = thisInstance.getTabByLabel(thisInstance.detailViewRecentUpdatesTabLabel).data('url');\n\t\t\t\t\turl = url.replace('&page=1', '&page=' + nextPage) + '&skipHeader=true&newChange=' + newChange;\n\t\t\t\t\tif (url.indexOf('&whereCondition') === -1) {\n\t\t\t\t\t\tlet switchBtn = jQuery('.active .js-switch--recentActivities');\n\t\t\t\t\t\turl +=\n\t\t\t\t\t\t\t'&whereCondition=' +\n\t\t\t\t\t\t\t(typeof switchBtn.data('on-val') === 'undefined' ? switchBtn.data('off-val') : switchBtn.data('on-val'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\tlet dataContainer = jQuery(data);\n\t\t\t\t\tcontainer.find('#newChange').val(dataContainer.find('#newChange').val());\n\t\t\t\t\tcontainer.find('#updatesCurrentPage').val(dataContainer.find('#updatesCurrentPage').val());\n\t\t\t\t\tcontainer.find('.js-more-link').html(dataContainer.find('.js-more-link').html());\n\t\t\t\t\tcontainer.find('#updates ul').append(dataContainer.find('#updates ul').html());\n\t\t\t\t\tapp.event.trigger('DetailView.UpdatesWidget.AddMore', data, thisInstance);\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.btnChangesReviewedOn', function (e) {\n\t\t\t\tlet progressInstance = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet url = 'index.php?module=ModTracker&action=ChangesReviewedOn&record=' + app.getRecordId();\n\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tjQuery(e.currentTarget).parent().remove();\n\t\t\t\t\tthisInstance.getTabByLabel(thisInstance.detailViewRecentUpdatesTabLabel).find('.count.badge').text('');\n\t\t\t\t\tif (selectedTabElement.data('labelKey') == thisInstance.detailViewRecentUpdatesTabLabel) {\n\t\t\t\t\t\tthisInstance.reloadTabContent();\n\t\t\t\t\t} else if (selectedTabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\tlet updatesWidget = detailContentsHolder.find(\"[data-type='Updates']\");\n\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\tlet params = thisInstance.getFiltersData(updatesWidget);\n\t\t\t\t\t\t\tthisInstance.loadWidget(updatesWidget, params['params']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreRecentDocuments', function () {\n\t\t\t\tlet recentDocumentsTab = thisInstance.getTabByLabel(thisInstance.detailViewRecentDocumentsTabLabel);\n\t\t\t\trecentDocumentsTab.trigger('click');\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.moreRecentActivities', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tcurrentTarget.prop('disabled', true);\n\t\t\t\tlet container = currentTarget.closest('.activityWidgetContainer');\n\t\t\t\tlet page = container.find('.currentPage').val();\n\t\t\t\tlet records = container.find('.countActivities').val();\n\t\t\t\tlet data = thisInstance.getFiltersData(e, { page: ++page });\n\t\t\t\tAppConnector.request({\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tasync: false,\n\t\t\t\t\tdataType: 'html',\n\t\t\t\t\tdata: data['params']\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tcurrentTarget.prop('disabled', false);\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tcontainer.find('.currentPage').remove();\n\t\t\t\t\tcontainer.find('.countActivities').remove();\n\t\t\t\t\tcontainer.find('.js-detail-widget-content').append(data);\n\t\t\t\t\tlet newRecords = container.find('.countActivities').val();\n\t\t\t\t\tcontainer.find('.countActivities').val(parseInt(newRecords) + parseInt(records));\n\t\t\t\t\tthisInstance.reloadWidgetActivitesStats(container);\n\t\t\t\t});\n\t\t\t});\n\t\t\tdetailContentsHolder.on('click', '.widgetFullscreen', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet widgetContentBlock = currentTarget.closest('.widgetContentBlock');\n\t\t\t\tlet url = widgetContentBlock.data('url');\n\t\t\t\turl = url.replace('&view=Detail&', '&view=WidgetFullscreen&');\n\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.showModalWindow(null, 'index.php?' + url, function (modal) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t\tthisInstance.registerEventForRelatedList();\n\t\t\tthisInstance.registerMailPreviewWidget(detailContentsHolder.find('.widgetContentBlock[data-type=\"EmailList\"]'));\n\t\t\tthisInstance.registerMailPreviewWidget(\n\t\t\t\tdetailContentsHolder.find('.widgetContentBlock[data-type=\"HistoryRelation\"]')\n\t\t\t);\n\t\t\tdetailContentsHolder\n\t\t\t\t.find('.js-switch--recentActivities')\n\t\t\t\t.off()\n\t\t\t\t.on('change', function (e) {\n\t\t\t\t\tconst currentTarget = jQuery(e.currentTarget),\n\t\t\t\t\t\ttabElement = thisInstance.getTabByLabel(thisInstance.detailViewRecentUpdatesTabLabel),\n\t\t\t\t\t\tvariableName = currentTarget.data('urlparams'),\n\t\t\t\t\t\tvalueOn = $(this).data('on-val'),\n\t\t\t\t\t\tvalueOff = $(this).data('off-val');\n\t\t\t\t\tlet url = tabElement.data('url');\n\t\t\t\t\turl = url.replace('&' + variableName + '=' + valueOn, '').replace('&' + variableName + '=' + valueOff, '');\n\t\t\t\t\tif (typeof currentTarget.data('on-val') !== 'undefined') {\n\t\t\t\t\t\turl += '&' + variableName + '=' + valueOn;\n\t\t\t\t\t} else if (typeof currentTarget.data('off-val') !== 'undefined') {\n\t\t\t\t\t\turl += '&' + variableName + '=' + valueOff;\n\t\t\t\t\t}\n\t\t\t\t\ttabElement.data('url', url);\n\t\t\t\t\ttabElement.trigger('click');\n\t\t\t\t});\n\t\t\tapp.registerIframeEvents(detailContentsHolder);\n\t\t},\n\t\treloadWidgetActivitesStats: function (container) {\n\t\t\tlet countElement = container.find('.countActivities');\n\t\t\tlet totalElement = container.find('.totaltActivities');\n\t\t\tlet switchBtn = container.find('.active .js-switch');\n\t\t\tif (!switchBtn.length) {\n\t\t\t\tswitchBtn = container.find('.js-switch.previousMark');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.js-switch').removeClass('previousMark');\n\t\t\t\tswitchBtn.addClass('previousMark');\n\t\t\t}\n\t\t\tcontainer.find('.js-switch').toggleClass('previousMark');\n\t\t\tif (!countElement.length || !totalElement.length || totalElement.val() === '') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet stats = ' (' + countElement.val() + '/' + totalElement.val() + ')';\n\t\t\tlet switchBtnParent = switchBtn.parent();\n\t\t\tlet text = switchBtn.data('basic-text') + stats;\n\t\t\tswitchBtnParent.removeTextNode();\n\t\t\tswitchBtnParent.append(text);\n\t\t},\n\t\trefreshCommentContainer: function (commentId) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet commentContainer = $('.commentsBody');\n\t\t\tlet params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Detail',\n\t\t\t\trecord: thisInstance.getRecordId(),\n\t\t\t\tmode: 'showThreadComments',\n\t\t\t\tcommentid: commentId\n\t\t\t};\n\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: commentContainer\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tcommentContainer.html(data);\n\t\t\t});\n\t\t},\n\t\tupdateRecordsPDFTemplateBtn: function (form) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet btnToolbar = $('.js-btn-toolbar .js-pdf');\n\t\t\tif (btnToolbar.length) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\taction: 'PDF',\n\t\t\t\t\t\tmode: 'hasValidTemplate',\n\t\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\t\tview: app.getViewName()\n\t\t\t\t\t},\n\t\t\t\t\tdataType: 'json'\n\t\t\t\t})\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tif (data['result'].valid === false) {\n\t\t\t\t\t\t\tbtnToolbar.addClass('d-none');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbtnToolbar.removeClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tupdateWindowHeight: function (currentHeight, frame) {\n\t\t\tframe.height(currentHeight);\n\t\t},\n\t\tloadSubProducts: function (parentRow) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet recordId = parentRow.data('product-id'),\n\t\t\t\tsubProrductParams = {\n\t\t\t\t\tmodule: 'Products',\n\t\t\t\t\taction: 'SubProducts',\n\t\t\t\t\trecord: recordId\n\t\t\t\t};\n\t\t\tAppConnector.request(subProrductParams).done(function (data) {\n\t\t\t\tlet responseData = data.result;\n\t\t\t\tthisInstance.addSubProducts(parentRow, responseData);\n\t\t\t});\n\t\t},\n\t\taddSubProducts: function (parentRow, responseData) {\n\t\t\tlet subProductsContainer = $('.js-subproducts-container ul', parentRow);\n\t\t\tfor (let id in responseData) {\n\t\t\t\tlet productText = $('<li>').text(responseData[id]);\n\t\t\t\tsubProductsContainer.append(productText);\n\t\t\t}\n\t\t},\n\t\tregisterSubProducts: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('.inventoryItems .js-inventory-row').each(function (index) {\n\t\t\t\tthisInstance.loadSubProducts($(this), false);\n\t\t\t});\n\t\t},\n\t\tregisterCollapsiblePanels(detailViewContainer) {\n\t\t\tconst panels = detailViewContainer.find('.js-detail-widget-collapse');\n\t\t\tconst storageName = `yf-${app.getModuleName()}-detail-widgets`;\n\t\t\tif (Quasar.plugins.LocalStorage.has(storageName)) {\n\t\t\t\tthis.setPanels({ panels, storageName });\n\t\t\t} else {\n\t\t\t\tpanels.collapse('show');\n\t\t\t\tlet panelsStorage = {};\n\t\t\t\tpanels.each((i, item) => {\n\t\t\t\t\tpanelsStorage[item.dataset.storageId] = 'shown';\n\t\t\t\t});\n\t\t\t\tQuasar.plugins.LocalStorage.set(storageName, panelsStorage);\n\t\t\t}\n\t\t\tpanels.on('hidden.bs.collapse shown.bs.collapse', (e) => {\n\t\t\t\tthis.updatePanelsStorage({ id: e.target.dataset.storageKey, type: e.type, storageName });\n\t\t\t});\n\t\t\tpanels.on('hide.bs.collapse show.bs.collapse', function (e) {\n\t\t\t\t$(e.currentTarget).siblings('.js-detail-widget-header').toggleClass('collapsed');\n\t\t\t});\n\t\t},\n\t\tsetPanels({ panels, storageName }) {\n\t\t\tconst panelsStorage = Quasar.plugins.LocalStorage.getItem(storageName);\n\t\t\tpanels.each((i, item) => {\n\t\t\t\tif (\n\t\t\t\t\tpanelsStorage[item.dataset.storageKey] === 'shown' ||\n\t\t\t\t\tundefined === panelsStorage[item.dataset.storageKey]\n\t\t\t\t) {\n\t\t\t\t\t$(item).collapse('show');\n\t\t\t\t\t$(item).siblings('.js-detail-widget-header').toggleClass('collapsed');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdatePanelsStorage({ id, type, storageName }) {\n\t\t\tconst panelsStorage = Quasar.plugins.LocalStorage.getItem(storageName);\n\t\t\tpanelsStorage[id] = type;\n\t\t\tQuasar.plugins.LocalStorage.set(storageName, panelsStorage);\n\t\t},\n\t\tgetMappingRelatedField: function (sourceField, sourceFieldModule, container) {\n\t\t\tconst mappingRelatedField = container.find('input[name=\"mappingRelatedField\"]').val();\n\t\t\tconst mappingRelatedModule = mappingRelatedField ? JSON.parse(mappingRelatedField) : [];\n\t\t\tif (\n\t\t\t\ttypeof mappingRelatedModule[sourceField] !== 'undefined' &&\n\t\t\t\ttypeof mappingRelatedModule[sourceField][sourceFieldModule] !== 'undefined'\n\t\t\t) {\n\t\t\t\treturn mappingRelatedModule[sourceField][sourceFieldModule];\n\t\t\t}\n\t\t\treturn [];\n\t\t},\n\t\tsetReferenceFieldValue: function (container, params) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sourceFieldElement = container.find('input.sourceField');\n\t\t\tlet sourceField = sourceFieldElement.attr('name');\n\t\t\tlet fieldElement = container.find('input[name=\"' + sourceField + '\"]');\n\t\t\tlet sourceFieldDisplay = sourceField + '_display';\n\t\t\tlet fieldDisplayElement = container.find('input[name=\"' + sourceFieldDisplay + '\"]');\n\t\t\tlet popupReferenceModule = container.find('input[name=\"popupReferenceModule\"]').val();\n\t\t\tlet selectedName = params.name;\n\t\t\tlet id = params.id;\n\n\t\t\tcontainer.find('.clearReferenceSelection').trigger('click');\n\n\t\t\tfieldElement.val(id);\n\t\t\tfieldDisplayElement.val(app.decodeHTML(selectedName)).attr('readonly', true);\n\t\t\tfieldElement.trigger(Vtiger_Edit_Js.referenceSelectionEvent, {\n\t\t\t\tmodule: popupReferenceModule,\n\t\t\t\trecord: id,\n\t\t\t\tselectedName: selectedName\n\t\t\t});\n\t\t\tfieldElement.trigger('change');\n\t\t\tfieldDisplayElement.validationEngine('closePrompt', fieldDisplayElement);\n\t\t\tif (sourceFieldElement.data('type') == 'inventory') {\n\t\t\t\treturn params;\n\t\t\t}\n\t\t\tlet formElement = container.closest('form');\n\t\t\tlet mappingRelatedField = this.getMappingRelatedField(sourceField, popupReferenceModule, formElement);\n\t\t\tif (typeof mappingRelatedField !== 'undefined') {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: popupReferenceModule,\n\t\t\t\t\trecord: id\n\t\t\t\t};\n\t\t\t\tapp.getRecordDetails(params).done(function (data) {\n\t\t\t\t\tlet response = (params.data = data['result']['data']);\n\t\t\t\t\tapp.event.trigger('EditView.SelectReference', params, formElement);\n\t\t\t\t\t$.each(mappingRelatedField, function (key, value) {\n\t\t\t\t\t\tif (response[value[0]] != 0) {\n\t\t\t\t\t\t\tlet mapFieldElement = formElement.find('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tlet fieldinfo = mapFieldElement.data('fieldinfo');\n\t\t\t\t\t\t\tif (data['result']['type'][value[0]] === 'date' || data['result']['type'][value[0]] === 'datetime') {\n\t\t\t\t\t\t\t\tmapFieldElement.val(data['result']['displayData'][value[0]]);\n\t\t\t\t\t\t\t} else if (data['result']['type'][value[0]] === 'multipicklist') {\n\t\t\t\t\t\t\t\tlet mapFieldElementMultiselect = formElement.find('[name=\"' + key + '[]\"]');\n\t\t\t\t\t\t\t\tif (mapFieldElementMultiselect.length > 0) {\n\t\t\t\t\t\t\t\t\tlet multipleAttr = mapFieldElement.attr('multiple');\n\t\t\t\t\t\t\t\t\tlet splitValues = response[value[0]].split(' |##| ');\n\t\t\t\t\t\t\t\t\tif (typeof multipleAttr !== 'undefined' && multipleAttr !== false && splitValues.length > 0) {\n\t\t\t\t\t\t\t\t\t\tmapFieldElementMultiselect.val(splitValues).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (mapFieldElement.is('select')) {\n\t\t\t\t\t\t\t\tif (mapFieldElement.find('option[value=\"' + response[value[0]] + '\"]').length) {\n\t\t\t\t\t\t\t\t\tmapFieldElement.val(response[value[0]]).trigger('change');\n\t\t\t\t\t\t\t\t} else if (mapFieldElement.data('fieldinfo').picklistvalues.hasOwnProperty(response[value[0]])) {\n\t\t\t\t\t\t\t\t\tlet newOption = new Option(response[value[0]], response[value[0]], true, true);\n\t\t\t\t\t\t\t\t\tmapFieldElement.append(newOption).trigger('change');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (mapFieldElement.length == 0) {\n\t\t\t\t\t\t\t\t$(\"<input type='hidden'/>\").attr('name', key).attr('value', response[value[0]]).appendTo(formElement);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmapFieldElement.val(response[value[0]]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet mapFieldDisplayElement = formElement.find('input[name=\"' + key + '_display\"]');\n\t\t\t\t\t\t\tif (mapFieldDisplayElement.length > 0) {\n\t\t\t\t\t\t\t\tmapFieldDisplayElement.val(data['result']['displayData'][value[0]]).attr('readonly', true);\n\t\t\t\t\t\t\t\tif (fieldinfo.type === 'reference') {\n\t\t\t\t\t\t\t\t\tlet referenceModulesList = mapFieldElement.closest('.fieldValue').find('.referenceModulesList');\n\t\t\t\t\t\t\t\t\tif (referenceModulesList.length > 0 && value[1]) {\n\t\t\t\t\t\t\t\t\t\treferenceModulesList.val(value[1]).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.setReferenceFieldValue(mapFieldDisplayElement.closest('.fieldValue'), {\n\t\t\t\t\t\t\t\t\t\tname: data['result']['displayData'][value[0]],\n\t\t\t\t\t\t\t\t\t\tid: response[value[0]]\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetReferencedModuleName: function (parenElement) {\n\t\t\treturn $('input[name=\"popupReferenceModule\"]', parenElement).val();\n\t\t},\n\t\tsearchModuleNames: function (params) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tif (typeof params.module === 'undefined') {\n\t\t\t\tparams.module = this.moduleName;\n\t\t\t}\n\t\t\tif (typeof params.action === 'undefined') {\n\t\t\t\tparams.action = 'BasicAjax';\n\t\t\t}\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to get reference search params\n\t\t */\n\t\t getReferenceSearchParams: function (element) {\n\t\t\tlet tdElement = $(element).closest('.fieldValue');\n\t\t\tlet params = {};\n\t\t\tlet searchModule = this.getReferencedModuleName(tdElement);\n\t\t\tparams.search_module = searchModule;\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Function which will handle the reference auto complete event registrations\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\t registerAutoCompleteFields: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tcontainer.find('input.autoComplete').autocomplete({\n\t\t\t\tdelay: '600',\n\t\t\t\tminLength: '3',\n\t\t\t\tsource: function (request, response) {\n\t\t\t\t\t//element will be array of dom elements\n\t\t\t\t\t//here this refers to auto complete instance\n\t\t\t\t\tlet inputElement = $(this.element[0]);\n\t\t\t\t\tlet searchValue = request.term;\n\t\t\t\t\tlet params = thisInstance.getReferenceSearchParams(inputElement);\n\t\t\t\t\tparams.search_value = searchValue;\n\t\t\t\t\t//params.parent_id = app.getRecordId();\n\t\t\t\t\t//params.parent_module = app.getModuleName();\n\t\t\t\t\tthisInstance.searchModuleNames(params).done(function (data) {\n\t\t\t\t\t\tlet reponseDataList = [];\n\t\t\t\t\t\tlet serverDataFormat = data.result;\n\t\t\t\t\t\tif (serverDataFormat.length <= 0) {\n\t\t\t\t\t\t\t$(inputElement).val('');\n\t\t\t\t\t\t\tserverDataFormat = new Array({\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\t\ttype: 'no results'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let id in serverDataFormat) {\n\t\t\t\t\t\t\tlet responseData = serverDataFormat[id];\n\t\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t\t\tapp.event.trigger('EditView.AfterSearch', {\n\t\t\t\t\t\t\tfield: inputElement,\n\t\t\t\t\t\t\tparams: params\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tselect: function (event, ui) {\n\t\t\t\t\tlet selectedItemData = ui.item;\n\t\t\t\t\t//To stop selection if no results is selected\n\t\t\t\t\tif (typeof selectedItemData.type !== 'undefined' && selectedItemData.type == 'no results') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tselectedItemData.name = selectedItemData.value;\n\t\t\t\t\tlet element = $(this);\n\t\t\t\t\tlet tdElement = element.closest('.fieldValue');\n\t\t\t\t\tthisInstance.setReferenceFieldValue(tdElement, selectedItemData);\n\t\t\t\t},\n\t\t\t\tchange: function (event, ui) {\n\t\t\t\t\tlet element = $(this);\n\t\t\t\t\t//if you dont have readonly attribute means the user didnt select the item\n\t\t\t\t\tif (element.attr('readonly') == undefined) {\n\t\t\t\t\t\telement.closest('.fieldValue').find('.clearReferenceSelection').trigger('click');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t//To Make the menu come up in the case of quick create\n\t\t\t\t\t$(this).data('ui-autocomplete').menu.element.css('z-index', '100001');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Change status from progress\n\t\t */\n\t\tregisterDotsPopupMessage() {\n\t\t\t// check if popup message is set\n\t\t\t// if it is set, check dots-popup-message cookie and compare record id-hash\n\t\t\t// if different, show popup (closed only by ok button!)\n\t\t\t// on popup close, save value to cookie\n\t\t\tconst popupMessage = $('#dotsPopupMessage').val();\n\t\t\tif (popupMessage) {\n\t\t\t\tconst popupMessageHash = $('#dotsPopupMessageHash').val();\n\t\t\t\tconst cookie = Object.fromEntries(document.cookie.split('; ').map(v=>v.split(/=(.*)/s).map(decodeURIComponent)))['dots-popup-message'];\n\t\t\t\tconst cookieValue = JSON.parse(cookie ? cookie : '{}');\n\t\t\t\tconst detailInstance = Vtiger_Detail_Js.getInstance();\n\t\t\t\tconst recordId = detailInstance.getRecordId();\n\n\t\t\t\tif (!(recordId in cookieValue) || !cookieValue[recordId].includes(popupMessageHash)) {\n\t\t\t\t\t// show popup\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: popupMessage.replaceAll('\\n', '<br/>') }).done(() => {\n\t\t\t\t\t\t// ideally, set cookie after popup is closed with ok\n\t\t\t\t\t\tif (!Array.isArray(cookieValue[recordId])) {\n\t\t\t\t\t\t\tcookieValue[recordId] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcookieValue[recordId].push(popupMessageHash);\n\t\t\t\t\t\tdocument.cookie = 'dots-popup-message=' + JSON.stringify(cookieValue) + '; SameSite=Lax; Secure=true;';\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\t//this.triggerDisplayTypeEvent();\n\t\t\tthis.registerSendSmsSubmitEvent();\n\t\t\tthis.registerAjaxEditEvent();\n\t\t\tthis.registerRelatedRowClickEvent();\n\t\t\tthis.registerBlockStatusCheckOnLoad();\n\t\t\tthis.registerEmailFieldClickEvent();\n\t\t\tthis.registerPhoneFieldClickEvent();\n\t\t\tthis.registerEventForRelatedTabClick();\n\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\tthis.registerUrlFieldClickEvent();\n\t\t\tlet detailViewContainer = jQuery('div.detailViewContainer');\n\t\t\tif (detailViewContainer.length <= 0) {\n\t\t\t\t// Not detail view page\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.registerSetReadRecord(detailViewContainer);\n\t\t\tthis.registerEventForPicklistDependencySetup(this.getForm());\n\t\t\tthis.getForm().validationEngine(app.validationEngineOptionsForRecord);\n\t\t\tthis.loadWidgetsEvents();\n\t\t\tthis.loadWidgets();\n\t\t\tthis.registerBasicEvents();\n\t\t\tthis.registerEventForTotalRecordsCount();\n\t\t\tthis.registerProgress();\n\t\t\tthis.registerChat(detailViewContainer);\n\t\t\tthis.registerAutoCompleteFields(detailViewContainer);\n\t\t\tthis.registerDotsPopupMessage();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","detailInstance","getInstance","moduleClassName","app","getModuleName","getViewName","instance","Vtiger_Detail_Js","triggerAjaxAction","moduleName","action","actionParams","type","module","record","getRecordId","AppConnector","request","done","data","result","notify","showNotify","title","vtranslate","text","fail","error","err","triggerDetailViewAction","detailActionUrl","callBackFunction","selectedIds","push","selected_ids","JSON","stringify","url","dataType","postData","showModalWindow","triggerSendSms","triggerTransferOwnership","massActionUrl","thisInstance","getRelatedModulesContainer","validationEngineOptions","params","onValidationComplete","form","valid","attr","transferOwnershipSave","validationEngine","getRelatedModuleContainer","App","Fields","Picklist","changeSelectElementView","selectElement","callback","val","relatedModules","recordId","transferOwnerId","transferOwner","related_modules","success","hideModalWindow","oldvalue","element","find","removeAttr","trigger","closest","html","Fieldname","reloadRelatedList","length","page","loadRelatedList","runRecordChanger","id","mode","window","location","reload","jqXHR","textStatus","showWorkflowTriggerView","$","popover","treeInstance","jstree","core","parse","themes","name","responsive","icons","multiple","checkbox","three_state","plugins","one","callOnce","selected","each","index","treeElement","original","tasks","parent","keys","user","reloadTabContent","view","targetPicklistChange","targetPicklist","detailViewContentHolder","detailViewForm","detailViewDetailsTabLabel","detailViewSummaryTabLabel","detailViewRecentCommentsTabLabel","detailViewRecentActivitiesTabLabel","detailViewRecentUpdatesTabLabel","detailViewRecentDocumentsTabLabel","fieldUpdatedEvent","updatedFields","fieldPreSave","tempData","referenceFieldNames","Calendar","Accounts","Leads","Vendors","OSSEmployees","Contacts","Campaigns","HelpDesk","Projects","ServiceContracts","OutsourcedProducts","Assets","OSSOutsourcedServices","OSSSoldServices","init","loadWidgetsEvents","event","on","e","widgetContent","relatedModuleName","reloadWidgetActivitesStats","registerCommentEventsInDetail","registerShowSummary","Vtiger_Index_Js","registerMailButtons","preventDefault","progressIndicator","currentTarget","progressIndicatorElement","registerEmailEvents","registerBlockStatusCheckOnLoad","registerCollapsiblePanels","registerAutoCompleteFields","loadWidgets","container","getForm","widgetList","widget","is","loadWidget","validationEngineOptionsForRecord","registerRelatedModulesRecordCount","widgetContainer","contentContainer","registerFilterForAddingModuleRelatedRecordFromSummaryWidget","queryParameters","urlParams","split","keyValueMap","queryParamComponents","Deferred","async","showSelect2ElementView","registerModal","Components","DropFile","register","Vtiger_RelatedList_Js","getInstanceByUrl","getSelectedTab","relatedController","setRelatedContainer","registerRelatedEvents","widgetRelatedRecordView","chart","Vtiger_Widget_Js","widgetInstance","loadChart","aDeferred","resolve","reject","promise","load","relatedRecordCacheID","moduleCacheGet","cacheKey","newActive","removeClass","addClass","prev","controlBox","next","active","hasClass","nextElement","moduleCacheSet","prevElement","loadContents","detailContentsHolder","getContentHolder","requestPjax","responseData","Date","getUpdateFieldsArray","getTabByLabel","tabLabel","getTabs","targetTab","labelKey","tab","getTabByModule","tabs","relationId","selectModuleTab","getTabContainer","moduleTab","relatedTabContainer","deSelectAllrelatedTabs","markTabAsSelected","tabElement","dropdownMenuTabs","iteration","className","filter","topTabs","get","getRelatedModuleName","saveFieldValues","fieldDetailList","preSaveValidation","then","response","errorThrown","errorLog","document","progressLoader","message","position","blockInfo","enabled","i","getRelatedListCurrentPageNum","removeCommentBlock","remove","hideButtonAction","showCommentBlock","show","getCommentThread","saveCommentAjax","commentMode","commentContentValue","editCommentReason","commentId","parentCommentId","commentInfoBlock","relatedTo","commentcontent","related_to","addRelationBetweenRecords","saveComment","closestCommentBlock","commentContent","errorMsg","commentInfoHeader","getCommentUI","getCommentBlock","clone","clonedCommentBlock","getEditCommentBlock","Text","Completions","emojiPanel","registerSendSmsSubmitEvent","smsTextLength","submitButton","SendSmsSave","SendSmsUrl","serializeFormData","progressInstance","registerNameAjaxEditEvent","nameFields","recordLabel","nameFieldName","recordLabelElement","updateHeaderNameFields","nameField","salutatioField","salutatioValue","registerAjaxEditEvent","updateHeaderValues","currentElement","inArray","registerEmailFieldClickEvent","stopPropagation","registerPhoneFieldClickEvent","registerUrlFieldClickEvent","registerRelatedRowClickEvent","target","targetElement","children","recordUrl","elem","href","registerEventForRelatedList","n","block","blockContent","parents","isEmpty","registerPostLoadEvents","registerListEvents","blocks","dynamicAttr","currentBlock","not","bodyContents","blockId","headerAnimationElement","value","cacheGet","ajaxEditHandling","currentTdElement","readRecord","detailViewValue","editElement","actionElement","fieldElement","prop","elementTarget","elementName","fieldName","inputmask","focus","v","selectReference","contains","createReference","previousValue","ajaxEditNewValue","fieldInfo","Vtiger_Field_Js","dateTimeField","field","toStr","off","Event","fieldNameValueMap","preFieldSaveEvent","fieldValue","isDefaultPrevented","getCustomFieldNameValueMap","Object","postSaveRecordDetails","displayValue","display_value","prevDisplayValue","prev_display_value","label","textTrusted","convertUrlToObject","urlObject","indexOf","replace","old","new","selectedTabElement","registerSummaryViewContainerEvents","registerEventForPicklistDependencySetup","updateRecordsPDFTemplateBtn","saveHandler","triggerDisplayTypeEvent","widthType","elements","addElementsToQuickCreateForCreatingRelation","customParams","appendTo","registerEventForActivityWidget","relField","QuickCreateParams","eventsGoToFullFormButton","taskFullFormUrl","taskGoToFullFormButton","fullFormUrl","eventsFullFormUrl","getFiltersDataAndLoad","assign","QuickCreate","createRecord","getEndDate","startDate","date","dateTab","newDate","setDate","getDate","getStringDate","getSingleEventType","modDay","dateStartVal","dateStartEl","dateStartFormat","validDateFromat","Vtiger_Helper_Js","convertToDateString","map","extend","start","end","mapping","events","isEmptyObject","ev","testDate","append","summaryWidgetContainer","referenceModuleName","quickcreateUrl","quickCreateParams","autoCompleteFields","relatedParams","postSummaryWidgetAddRecord","loadModuleSummary","quickCreate","showModal","progress","restrictionsField","src_module","src_record","multi_select","key","showRecordsList","modal","setSelectEvent","registerAddingInventoryRecords","createUrl","addidtionalParams","concat","registerEmailEvent","showConfirmationBox","d","showMessage","getFiltersData","m","item","fieldlable","selectedFilter","additionalParams","paramName","paramValue","urlNewParams","registerChangeFilterForWidget","siblings","summaryViewContainer","updatesWidget","noCache","callbackFunction","currentDiv","detailViewElement","descriptionText","descriptionEmpty","saveButton","closeButton","activityButtonContainer","fieldnameElement","ajaxEditNewLable","activityDiv","activityId","activityType","add","errorExists","addClickOutSideEvent","activitytype","closeDescription","Editor","toolbar","hide","widgetHeaderContainer","registerFastEditingFiels","relatedModule","relatedModuleRecordId","addRelations","idList","_recordId","registerChangeEventForModulesList","modulesSelectElement","selectedOptionValue","registerEventForRelatedTabClick","detailContainer","urlAttributes","elementToBlock","showHorizontalTopScrollBar","callBack","registerBasicEvents","notifyPostAjaxReady","registerBlockAnimationEvent","picklistDependcyElemnt","sourcePicklists","picklistDependencyMapping","sourcePickListNames","join","sourcePickListElements","sourcePicklistname","configuredDependencyObject","selectedValue","targetObjectForSelectedSourceValue","picklistmap","targetPickListName","targetPickListValues","targetPickListMap","targetPickList","listOfAvailableOptions","optionSelector","picklistValue","targetOptions","targetPickListSelectedValue","getChildComments","dataObj","getParentComments","registerEventForTotalRecordsCount","totalNumberOfRecords","getRelatedPageCount","showPagingInfo","pageNumberElement","pageRange","listViewEntriesCount","parseInt","registerSetReadRecord","relatedTabKey","fastEditingFiels","fieldContainer","registerHelpInfo","showPopoverElementView","tabContainer","relationContainer","tab_label","numberOfRecords","moreList","addComment","closestAddCommentBlock","commentTextAreaElement","commentHtml","self","noCommentsMsgContainer","commentBlock","currentChildCommentsCount","responsedata","prependTo","commentInfoContent","commentEditStatus","commentReason","reasontoedit","modifiedTime","modifiedtime","modifiedtimetitle","registerCommentEvents","editCommentBlock","recentCommentsTab","regex","hierarchy","which","submitSearchForm","searchTextDom","limit","isWidget","search_key","is_widget","eq","widgetDataContainer","registerMailPreviewWidget","mailBody","row","mailTeaser","toggleClass","loadMailPreviewWidget","typeValue","click","registerMapsEvents","mapView","registerDetailView","registerSocialMediaEvents","socialMediaContainer","summaryView","css","showProgressConfirmation","picklistName","registerProgress","loadChat","chatVue","chatContainer","height","offset","top","outerHeight","ChatRecordRoomVueComponent","mount","el","registerChat","ready","registerSubProducts","DateTime","MultiImage","registerEventForClockPicker","currentPageNum","requestedPage","relatedLabel","moduleList","parentElem","popupReferenceModule","referenceModuleElement","prevSelectedReferenceModule","Vtiger_Edit_Js","editViewInstance","clearFieldValue","referenceDeSelectionEvent","controlElementDiv","referenceCreateHandler","currentTargetParent","commentActionsBlock","currentCommentBlock","ulElements","commentid","containerTable","currentPage","nextPage","types","pageLimit","newChange","switchBtn","dataContainer","recentDocumentsTab","records","newRecords","widgetContentBlock","variableName","valueOn","valueOff","registerIframeEvents","totalElement","countElement","switchBtnParent","stats","removeTextNode","refreshCommentContainer","commentContainer","btnToolbar","updateWindowHeight","currentHeight","frame","loadSubProducts","parentRow","addSubProducts","subProductsContainer","productText","detailViewContainer","panels","storageName","Quasar","LocalStorage","has","setPanels","collapse","panelsStorage","dataset","storageId","set","updatePanelsStorage","storageKey","getItem","getMappingRelatedField","sourceField","sourceFieldModule","mappingRelatedModule","mappingRelatedField","setReferenceFieldValue","sourceFieldElement","fieldDisplayElement","selectedName","decodeHTML","referenceSelectionEvent","formElement","getRecordDetails","fieldinfo","mapFieldElement","splitValues","mapFieldElementMultiselect","picklistvalues","hasOwnProperty","newOption","mapFieldDisplayElement","referenceModulesList","getReferencedModuleName","parenElement","searchModuleNames","getReferenceSearchParams","searchModule","tdElement","search_module","autocomplete","delay","minLength","source","searchValue","term","inputElement","search_value","serverDataFormat","reponseDataList","select","ui","selectedItemData","change","open","menu","registerDotsPopupMessage","popupMessage","cookie","fromEntries","decodeURIComponent","cookieValue","includes","popupMessageHash","replaceAll","Array","isArray","registerEvents"],"mappings":"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"}