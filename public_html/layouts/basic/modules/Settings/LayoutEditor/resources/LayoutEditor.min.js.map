{"version":3,"file":"LayoutEditor.min.js","sources":["LayoutEditor.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Settings_LayoutEditor_Js',\n\t{},\n\t{\n\t\tupdatedBlockSequence: {},\n\t\tinActiveFieldsList: false,\n\t\tupdatedBlockFieldsList: [],\n\t\tupdatedBlocksList: [],\n\t\tblockNamesList: [],\n\t\t/**\n\t\t * Function to set the inactive fields list used to show the inactive fields\n\t\t */\n\t\tsetInactiveFieldsList: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar json = contents.find('.inActiveFieldsArray');\n\t\t\tif (0 < json.length) {\n\t\t\t\tthisInstance.inActiveFieldsList = JSON.parse(json.val());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the blocks sortable\n\t\t */\n\t\tmakeBlocksListSortable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.blockSortable');\n\t\t\tcontents.sortable({\n\t\t\t\tcontainment: contents,\n\t\t\t\titems: table,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tthisInstance.updateBlockSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will update block sequence\n\t\t */\n\t\tupdateBlockSequence: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar sequence = JSON.stringify(thisInstance.updateBlocksListByOrder());\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'updateSequenceNumber';\n\t\t\tparams['sequence'] = sequence;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will arrange the sequence number of blocks\n\t\t */\n\t\tupdateBlocksListByOrder: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.editFieldsTable.blockSortable').each(function (index, domElement) {\n\t\t\t\tvar blockTable = $(domElement);\n\t\t\t\tvar blockId = blockTable.data('blockId');\n\t\t\t\tvar actualBlockSequence = blockTable.data('sequence');\n\t\t\t\tvar expectedBlockSequence = index + 1;\n\n\t\t\t\tif (expectedBlockSequence != actualBlockSequence) {\n\t\t\t\t\tblockTable.data('sequence', expectedBlockSequence);\n\t\t\t\t}\n\t\t\t\tthisInstance.updatedBlockSequence[blockId] = expectedBlockSequence;\n\t\t\t});\n\t\t\treturn thisInstance.updatedBlockSequence;\n\t\t},\n\t\t/**\n\t\t * Function to register all the relatedList Events\n\t\t */\n\t\tregisterRelatedListEvents: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\trelatedList = $('#relatedTabOrder');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(\n\t\t\t\trelatedList.find('.relatedTabModulesList .js-related-column-list-container .select2_container'),\n\t\t\t\t{\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tsortableCb: (currentTarget) => {\n\t\t\t\t\t\tthisInstance.updateSelectedFields(currentTarget);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(\n\t\t\t\trelatedList.find('.relatedTabModulesList .js-related-custom-view-container .select2_container'),\n\t\t\t\t{\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tsortableCb: (currentTarget) => {\n\t\t\t\t\t\tthisInstance.updateCustomView(currentTarget);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\trelatedList.on('click', '.inActiveRelationModule', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule.find('.activeRelationModule').removeClass('d-none').show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), false);\n\t\t\t});\n\t\t\trelatedList.on('click', '.activeRelationModule', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule.find('.inActiveRelationModule').removeClass('d-none').show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), true);\n\t\t\t});\n\t\t\trelatedList.on('click', '.removeRelation', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\tthisInstance.removeRelation(relatedModule);\n\t\t\t});\n\t\t\trelatedList.on('click', '.addToFavorites', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.changeStateFavorites(currentTarget);\n\t\t\t});\n\t\t\trelatedList.on('change', '.relatedViewType', function (e) {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tvar value = currentTarget.val();\n\t\t\t\tif (!value) {\n\t\t\t\t\tcurrentTarget.validationEngine('showPrompt', app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcurrentTarget.validationEngine('hide');\n\t\t\t\tthisInstance.changeRelatedViewType(currentTarget);\n\t\t\t});\n\t\t\trelatedList.find('.js-related-column-list').on('change', function (e) {\n\t\t\t\tthisInstance.updateSelectedFields($(e.currentTarget));\n\t\t\t});\n\t\t\trelatedList.find('.js-related-custom-view').on('change', function (e) {\n\t\t\t\tthisInstance.updateCustomView($(e.currentTarget));\n\t\t\t});\n\t\t\trelatedList.on('click', '.addRelation', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar container = currentTarget.closest('#relatedTabOrder');\n\t\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\t\t\t\tvar addRelationContainer = relatedList.find('.addRelationContainer').clone(true, true);\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tdata.find('.relLabel').val(data.find('.target option:selected').val());\n\t\t\t\t\tdata.on('change', '.target', function (e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tdata.find('.relLabel').val(currentTarget.find('option:selected').val());\n\t\t\t\t\t});\n\t\t\t\t\tdata.find('[name=\"type\"]').on('change', function () {\n\t\t\t\t\t\tif ($(this).val() === 'getAttachments') {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option').not('[value=\"Documents\"]').addClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdata.on('click', '.addButton', function (e) {\n\t\t\t\t\t\tvar form = data.find('form').serializeFormData();\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\t\tparams['mode'] = 'addRelation';\n\t\t\t\t\t\t$.extend(params, form);\n\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t\t.getRelModuleLayoutEditor(container.find('[name=\"layoutEditorRelModules\"]').val())\n\t\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\t\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (response && response.message) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'error', text: response.message });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(addRelationContainer, function (data) {\n\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetSelectedFields: function (target) {\n\t\t\tvar selectedFields = [];\n\t\t\ttarget.find(':selected').each(function (e) {\n\t\t\t\tselectedFields.push({\n\t\t\t\t\tid: $(this).val(),\n\t\t\t\t\tname: $(this).data('field-name') ? $(this).data('field-name') : $(this).data('name')\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn selectedFields;\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the related modules sortable\n\t\t */\n\t\tmakeRelatedModuleSortable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar modulesList = relatedModulesContainer.find('.relatedModule');\n\t\t\trelatedModulesContainer.sortable({\n\t\t\t\tcontainment: relatedModulesContainer,\n\t\t\t\titems: modulesList,\n\t\t\t\thandle: '.mainBlockTableLabel',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tthisInstance.updateSequenceRelatedModule();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchangeRelatedViewType: function (currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Relation',\n\t\t\t\tmode: 'updateRelatedViewType',\n\t\t\t\trelationId: relatedModule.data('relation-id'),\n\t\t\t\ttypes: currentTarget.val()\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: data.result.text\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: data.error.message\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: error.message\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeStateFavorites: function (currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tvar status = currentTarget.data('state') == 1 ? 0 : 1;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateStateFavorites';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['status'] = status;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tcurrentTarget.data('state', status);\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tcurrentTarget.find('.far').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.fas').removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTarget.find('.fas').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.far').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_NOTIFY_OK') });\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tchangeStatusRelatedModule: function (relationId, status) {\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'changeStatusRelation';\n\t\t\tparams['relationId'] = relationId;\n\t\t\tparams['status'] = status;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_1');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_0');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tremoveRelation: function (relatedModule) {\n\t\t\tvar message = app.vtranslate('JS_DELETE_RELATION_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function (e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\tparams['mode'] = 'removeRelation';\n\t\t\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_REMOVE_RELATION_OK');\n\t\t\t\t\t\t\trelatedModule.remove();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t},\n\t\tupdateSequenceRelatedModule: function () {\n\t\t\tvar modules = [];\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar params = {};\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedModulesContainer.find('.relatedModule').each(function (index, domElement) {\n\t\t\t\tvar relationId = $(domElement).data('relationId');\n\t\t\t\tmodules.push({ relationId: relationId, index: index });\n\t\t\t});\n\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSequenceRelatedModule';\n\t\t\tparams['modules'] = modules;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATE_SEQUENCE');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tupdateSelectedFields: function (target) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet params = {},\n\t\t\t\trelatedModule = $(target).closest('.relatedModule'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tselectedFields;\n\t\t\tif ($(target).data('type') == 'inventory') {\n\t\t\t\tparams['inventory'] = true;\n\t\t\t\tselectedFields = $(target).val();\n\t\t\t} else {\n\t\t\t\tselectedFields = thisInstance.getSelectedFields($(target));\n\t\t\t}\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSelectedFields';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['fields'] = selectedFields;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function () {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATED_FIELD_LIST_MODULE_RELATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tupdateCustomView: function (target) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet params = {},\n\t\t\t\trelatedModule = $(target).closest('.relatedModule'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateCustomView';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['cv'] = target.val();\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function () {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the fields sortable\n\t\t */\n\t\tmakeFieldsListSortable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.editFieldsTable');\n\t\t\ttable.each(function () {\n\t\t\t\tvar containment = $(this).closest('.moduleBlocks');\n\t\t\t\t$(this)\n\t\t\t\t\t.find('ul[name=sortable1], ul[name=sortable2]')\n\t\t\t\t\t.sortable({\n\t\t\t\t\t\tcontainment: containment,\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\tcursor: 'move',\n\t\t\t\t\t\tconnectWith: containment.find('.connectedSortable'),\n\t\t\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\t\t\tvar currentField = ui['item'];\n\t\t\t\t\t\t\tif (currentField.closest('.moduleBlocks').hasClass('inventoryBlock')) {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(currentField.closest('.editFieldsTable'));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(thisInstance.getDetailViewLayout());\n\t\t\t\t\t\t\t\tthisInstance.createUpdatedBlocksList(currentField);\n\t\t\t\t\t\t\t\t// rearrange the older block fields\n\t\t\t\t\t\t\t\tif (ui.sender) {\n\t\t\t\t\t\t\t\t\tvar olderBlock = ui.sender.closest('.editFieldsTable');\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(olderBlock);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetDetailViewLayout: function () {\n\t\t\treturn $('#detailViewLayout');\n\t\t},\n\t\tgetInventoryViewLayout: function () {\n\t\t\treturn $('#inventoryViewLayout');\n\t\t},\n\t\t/**\n\t\t * Function to show the save button of fieldSequence\n\t\t */\n\t\tshowSaveFieldSequenceButton: function (layout) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tif (app.isHidden(saveButton) || app.isInvisible(saveButton)) {\n\t\t\t\tif (!saveButton.hasClass('inventorySequence')) {\n\t\t\t\t\tthisInstance.updatedBlocksList = [];\n\t\t\t\t\tthisInstance.updatedBlockFieldsList = [];\n\t\t\t\t}\n\t\t\t\tsaveButton.removeClass('d-none');\n\t\t\t\tsaveButton.removeClass('invisible');\n\t\t\t\tvar params = {};\n\t\t\t\tparams['text'] = app.vtranslate('JS_SAVE_THE_CHANGES_TO_UPDATE_FIELD_SEQUENCE');\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will hide the saveFieldSequence button\n\t\t */\n\t\thideSaveFieldSequenceButton: function () {\n\t\t\tvar layout = $('#detailViewLayout');\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tsaveButton.addClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Function to create the blocks list which are updated while sorting\n\t\t */\n\t\tcreateUpdatedBlocksList: function (currentField) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar block = currentField.closest('.editFieldsTable');\n\t\t\tvar updatedBlockId = block.data('blockId');\n\t\t\tif ($.inArray(updatedBlockId, thisInstance.updatedBlocksList) == -1) {\n\t\t\t\tthisInstance.updatedBlocksList.push(updatedBlockId);\n\t\t\t}\n\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t},\n\t\t/**\n\t\t * Function that rearranges fields in the block when the fields are moved\n\t\t * @param <jQuery object> block\n\t\t */\n\t\treArrangeBlockFields: function (block) {\n\t\t\t// 1.get the containers, 2.compare the length, 3.if uneven then move the last element\n\t\t\tvar leftSideContainer = block.find('ul[name=sortable1]');\n\t\t\tvar rightSideContainer = block.find('ul[name=sortable2]');\n\t\t\tif (leftSideContainer.children().length < rightSideContainer.children().length) {\n\t\t\t\tvar lastElementInRightContainer = rightSideContainer.children(':last');\n\t\t\t\tleftSideContainer.append(lastElementInRightContainer);\n\t\t\t} else if (leftSideContainer.children().length > rightSideContainer.children().length + 1) {\n\t\t\t\t//greater than 1\n\t\t\t\tvar lastElementInLeftContainer = leftSideContainer.children(':last');\n\t\t\t\trightSideContainer.append(lastElementInLeftContainer);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to create the list of updated blocks with all the fields and their sequences\n\t\t */\n\t\tcreateUpdatedBlockFieldsList: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\n\t\t\tfor (var index in thisInstance.updatedBlocksList) {\n\t\t\t\tvar updatedBlockId = thisInstance.updatedBlocksList[index];\n\t\t\t\tvar updatedBlock = contents.find('.block_' + updatedBlockId);\n\t\t\t\tvar firstBlockSortFields = updatedBlock.find('ul[name=sortable1]');\n\t\t\t\tvar editFields = firstBlockSortFields.find('.editFields');\n\t\t\t\tvar expectedFieldSequence = 1;\n\t\t\t\teditFields.each(function (i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: expectedFieldSequence,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\texpectedFieldSequence = expectedFieldSequence + 2;\n\t\t\t\t});\n\t\t\t\tvar secondBlockSortFields = updatedBlock.find('ul[name=sortable2]');\n\t\t\t\tvar secondEditFields = secondBlockSortFields.find('.editFields');\n\t\t\t\tvar sequenceValue = 2;\n\t\t\t\tsecondEditFields.each(function (i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: sequenceValue,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\tsequenceValue = sequenceValue + 2;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterFieldSequenceSaveClick: function () {\n\t\t\tthis.getDetailViewLayout()\n\t\t\t\t.find('.saveFieldSequence')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.hideSaveFieldSequenceButton();\n\t\t\t\t\tthis.createUpdatedBlockFieldsList();\n\t\t\t\t\tthis.updateFieldSequence();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function will save the field sequences\n\t\t */\n\t\tupdateFieldSequence: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'move';\n\t\t\tparams['updatedFields'] = thisInstance.updatedBlockFieldsList;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_FIELD_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to check if picklist exist\n\t\t */\n\t\tcheckPicklistExist(fieldNameValue) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Field',\n\t\t\t\tmode: 'checkPicklistExist',\n\t\t\t\tfieldName: fieldNameValue.toLowerCase()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.result) {\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_EXIST_PICKLIST_NAME')\n\t\t\t\t\t})\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register click evnet add custom field button\n\t\t */\n\t\tregisterAddCustomFieldEvent() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = $('#layoutEditorContainer'),\n\t\t\t\tcontents = container.find('.contents');\n\t\t\tcontents.find('.addCustomField').on('click', (e) => {\n\t\t\t\tlet blockId = $(e.currentTarget).closest('.editFieldsTable').data('blockId'),\n\t\t\t\t\taddFieldContainer = container.find('.createFieldModal').clone(true, true);\n\t\t\t\taddFieldContainer.removeClass('d-none').show();\n\t\t\t\tlet callBackFunction = (data) => {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'), { width: '100%' });\n\t\t\t\t\tlet form = data.find('.createCustomFieldForm');\n\t\t\t\t\tform.attr('id', 'createFieldForm');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"pickListValues\"]'), {\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\ttokenSeparators: [',']\n\t\t\t\t\t});\n\t\t\t\t\tthis.registerFieldTypeChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFieldsChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFilterFieldChangeEvent(form);\n\t\t\t\t\tthis.registerReferenceModuleChangeEvent(form);\n\t\t\t\t\tthis.registerViewRelatedChangeEvent(form);\n\t\t\t\t\tlet params = app.getvalidationEngineOptions(true);\n\t\t\t\t\tparams.onValidationComplete = (form, valid) => {\n\t\t\t\t\t\tif (valid && thisInstance.validateFieldsValue(form)) {\n\t\t\t\t\t\t\tlet saveButton = form.find(':submit'),\n\t\t\t\t\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\t\t\t\t\tfieldTypeValue = $('[name=\"fieldType\"]', form).val();\n\t\t\t\t\t\t\tsaveButton.attr('disabled', 'disabled');\n\t\t\t\t\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\t\t\t\t\tthisInstance.checkPicklistExist(fieldNameValue).done((result) => {\n\t\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddFieldContainer,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to validate fields value\n\t\t */\n\t\tvalidateFieldsValue: function (form) {\n\t\t\tlet fieldTypeValue = $('[name=\"fieldType\"]', form).val(),\n\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\tmessage;\n\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\tlet pickListValueElement = $('#pickListValues', form),\n\t\t\t\t\tpickListValuesArray = pickListValueElement.val(),\n\t\t\t\t\tpickListValuesArraySize = pickListValuesArray.length,\n\t\t\t\t\ti,\n\t\t\t\t\tselect2Element,\n\t\t\t\t\tspecialChars = /[\"]/;\n\t\t\t\tif (fieldNameValue.toLowerCase() === 'status' || 'picklist' === fieldNameValue.toLowerCase()) {\n\t\t\t\t\tmessage = app.vtranslate('JS_RESERVED_PICKLIST_NAME');\n\t\t\t\t\t$('[name=\"fieldName\"]', form).validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < pickListValuesArraySize; i++) {\n\t\t\t\t\tif (specialChars.test(pickListValuesArray[i])) {\n\t\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\t\tmessage = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' \" ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet lowerCasedpickListValuesArray = $.map(pickListValuesArray, (item, index) => {\n\t\t\t\t\t\treturn item.toLowerCase();\n\t\t\t\t\t}),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArray = $.uniqueSort(lowerCasedpickListValuesArray),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArraySize = uniqueLowerCasedpickListValuesArray.length,\n\t\t\t\t\tarrayDiffSize = pickListValuesArraySize - uniqueLowerCasedpickListValuesArraySize;\n\t\t\t\tif (arrayDiffSize > 0) {\n\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\tmessage = app.vtranslate('JS_DUPLICATES_VALUES_FOUND');\n\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'Tree' || fieldTypeValue == 'CategoryMultipicklist') {\n\t\t\t\tlet treeListElement = form.find('select.TreeList');\n\t\t\t\tif (treeListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tform.find('.TreeList').validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'ServerAccess') {\n\t\t\t\tlet serverListElement = form.find('select[name=\"server\"]');\n\t\t\t\tif (serverListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tserverListElement.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Function to save field and show message\n\t\t */\n\t\tsaveCustomField: function (blockId, form) {\n\t\t\tlet saveButton = form.find(':submit');\n\t\t\tthis.addCustomField(blockId, form).done((data) => {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_FIELD_ADDED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\tthis.showCustomField(result);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = data['error']['message'];\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\tdata['error']['code'] != 513 ? form.find('.fieldNameForm').text() : form.find('.fieldLabelForm').text(),\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: data['error']['message']\n\t\t\t\t\t});\n\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the array of block names list\n\t\t */\n\t\tsetBlocksListArray: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.blockNamesList = [];\n\t\t\tvar blocksListSelect = form.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option').each(function (index, ele) {\n\t\t\t\tvar option = $(ele);\n\t\t\t\tvar label = option.data('label');\n\t\t\t\tthisInstance.blockNamesList.push(label.toLowerCase());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the custom field details\n\t\t */\n\t\taddCustomField: function (blockId, form) {\n\t\t\tvar modalHeader = form.closest('#' + Window.lastModalId).find('.modal-header h3');\n\t\t\tvar aDeferred = $.Deferred();\n\n\t\t\tmodalHeader.progressIndicator({\n\t\t\t\tsmallLoadingImage: true,\n\t\t\t\timageContainerCss: { display: 'inline', 'margin-left': '18%', position: 'absolute' }\n\t\t\t});\n\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'add';\n\t\t\tparams['blockid'] = blockId;\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (err, error, errorObj) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (errorObj.responseText !== undefined) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttitle: JSON.parse(errorObj.responseText).error.message,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register change event for fieldType while adding custom field\n\t\t */\n\t\tregisterFieldTypeChangeEvent(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\n\t\t\t//special validators while adding new field\n\t\t\tvar lengthValidator = [{ name: 'DecimalMaxLength' }];\n\t\t\tvar maxLengthValidator = [{ name: 'MaxLength' }];\n\t\t\tvar decimalValidator = [{ name: 'FloatingDigits' }];\n\n\t\t\t//By default add the max length validator\n\t\t\tlengthInput.data('validator', maxLengthValidator);\n\n\t\t\t//register the change event for field types\n\t\t\tform.find('[name=\"fieldType\"]').on('change', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\t\t\t\tvar selectedOption = currentTarget.find('option:selected');\n\n\t\t\t\t//hide all the elements like length, decimal,picklist\n\t\t\t\tform.find('.supportedType').addClass('d-none');\n\t\t\t\tif (selectedOption.data('lengthsupported')) {\n\t\t\t\t\tform.find('.lengthsupported').removeClass('d-none');\n\t\t\t\t\tif (!selectedOption.data('nolimitforlength')) {\n\t\t\t\t\t\tlengthInput.data('validator', maxLengthValidator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlengthInput.data('validator', [{ name: 'WholeNumberGreaterThanZero' }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('decimalsupported')) {\n\t\t\t\t\tvar decimalFieldUi = form.find('.decimalsupported');\n\t\t\t\t\tdecimalFieldUi.removeClass('d-none');\n\n\t\t\t\t\tvar decimalInput = decimalFieldUi.find('[name=\"decimal\"]');\n\t\t\t\t\tvar maxFloatingDigits = selectedOption.data('maxfloatingdigits');\n\n\t\t\t\t\tif (typeof maxFloatingDigits !== 'undefined') {\n\t\t\t\t\t\tdecimalInput.data('validator', decimalValidator);\n\t\t\t\t\t\tlengthInput.data('validator', lengthValidator);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selectedOption.data('decimalreadonly')) {\n\t\t\t\t\t\tdecimalInput.val(maxFloatingDigits).attr('readonly', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecimalInput.removeAttr('readonly').val('');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('predefinedvalueexists')) {\n\t\t\t\t\tvar pickListUi = form.find('.preDefinedValueExists');\n\t\t\t\t\tpickListUi.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('picklistoption')) {\n\t\t\t\t\tvar pickListOption = form.find('.picklistOption');\n\t\t\t\t\tpickListOption.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Related1M') {\n\t\t\t\t\tform.find('.preDefinedModuleList').removeClass('d-none');\n\t\t\t\t\tform.find('.preDefinedModuleFilterList').addClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Tree' || selectedOption.val() == 'CategoryMultipicklist') {\n\t\t\t\t\tform.find('.preDefinedTreeList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'ServerAccess') {\n\t\t\t\t\tform.find('.js-server-access-list').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'MultiReferenceValue') {\n\t\t\t\t\tform.find('.preMultiReferenceValue').removeClass('d-none');\n\t\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'ViewRelatedField') {\n\t\t\t\t\tform.find('.viewRelatedFieldList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to add new custom field ui to the list\n\t\t */\n\t\tshowCustomField: function (result) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedBlock = contents.find('.block_' + result['blockid']);\n\t\t\tvar fieldCopy = contents.find('.newCustomFieldCopy').clone(true, true);\n\t\t\tvar fieldContainer = fieldCopy.find('.js-custom-field');\n\t\t\tfieldContainer\n\t\t\t\t.addClass('opacity editFields')\n\t\t\t\t.attr('data-field-id', result['id'])\n\t\t\t\t.attr('data-block-id', result['blockid']);\n\t\t\tfieldContainer.find('.deleteCustomField, .saveFieldDetails').attr('data-field-id', result['id']);\n\t\t\tfieldContainer\n\t\t\t\t.find('.fieldLabel')\n\t\t\t\t.html(result['label'] + '<span class=\"ml-3 font-weight-normal\">[' + result['name'] + ']</span>');\n\t\t\tfieldContainer\n\t\t\t\t.find('#relatedFieldValue')\n\t\t\t\t.val(result['name'])\n\t\t\t\t.prop('id', 'relatedFieldValue' + result['id']);\n\t\t\tfieldContainer.find('.copyFieldLabel').attr('data-target', 'relatedFieldValue' + result['id']);\n\t\t\tthisInstance.registerCopyClipboard();\n\t\t\tif (!result['customField']) {\n\t\t\t\tfieldContainer.find('.deleteCustomField').remove();\n\t\t\t}\n\t\t\tif ($.inArray(result['type'], ['string', 'phone', 'currency', 'url', 'integer', 'double']) == -1) {\n\t\t\t\tfieldContainer.find('.maskField').remove();\n\t\t\t}\n\t\t\tvar block = relatedBlock.find('.blockFieldsList');\n\t\t\tvar sortable1 = block.find('.js-sort-table1');\n\t\t\tvar length1 = sortable1.children().length;\n\t\t\tvar sortable2 = block.find('.js-sort-table2');\n\t\t\tvar length2 = sortable2.children().length;\n\t\t\t// Deciding where to add the new field\n\t\t\tif (length1 > length2) {\n\t\t\t\tsortable2.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t} else {\n\t\t\t\tsortable1.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t}\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddCustomBlockEvent: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.addCustomBlock').on('click', function (e) {\n\t\t\t\tlet addBlockContainer = contents.find('.addBlockModal').clone(true, true),\n\t\t\t\t\tcallBackFunction = function (data) {\n\t\t\t\t\t\tdata.find('.addBlockModal').removeClass('d-none').show();\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\t\tlet form = data.find('.addCustomBlockForm');\n\t\t\t\t\t\tthisInstance.setBlocksListArray(form);\n\t\t\t\t\t\tlet fieldLabel = form.find('[name=\"label\"]'),\n\t\t\t\t\t\t\tparams = Object.create(app.validationEngineOptions);\n\t\t\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tif ($.inArray(formData['label'].toLowerCase(), thisInstance.blockNamesList) == -1) {\n\t\t\t\t\t\t\t\t\tthisInstance.saveBlockDetails(form).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\t\t\t\tlet result = data['result'];\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.displayNewCustomBlock(result);\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.updateNewSequenceForBlocks(result['sequenceList']);\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.appendNewBlockToBlocksList(result, form);\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlet result = app.vtranslate('JS_BLOCK_NAME_EXISTS');\n\t\t\t\t\t\t\t\t\tfieldLabel.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the new custom block details\n\t\t */\n\t\tsaveBlockDetails: function (form) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_BLOCK_ADDED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.reject(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to display the new custom block ui after save\n\t\t */\n\t\tdisplayNewCustomBlock: function (result) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar beforeBlockId = result['beforeBlockId'];\n\t\t\tvar beforeBlock = contents.find('.block_' + beforeBlockId);\n\n\t\t\tvar newBlockCloneCopy = contents.find('.newCustomBlockCopy').clone(true, true);\n\t\t\tnewBlockCloneCopy\n\t\t\t\t.data('blockId', result['id'])\n\t\t\t\t.find('.blockLabel')\n\t\t\t\t.append($('<strong class=\"align-middle\">' + result['label'] + '</strong>'));\n\t\t\tnewBlockCloneCopy.find('.js-block-visibility').data('blockId', result['id']);\n\t\t\tif (result['isAddCustomFieldEnabled']) {\n\t\t\t\tnewBlockCloneCopy.find('.addCustomField').removeClass('d-none');\n\t\t\t}\n\t\t\tbeforeBlock.after(\n\t\t\t\tnewBlockCloneCopy.removeClass('d-none newCustomBlockCopy').addClass('editFieldsTable block_' + result['id'])\n\t\t\t);\n\n\t\t\tnewBlockCloneCopy.find('.blockFieldsList').sortable({ connectWith: '.blockFieldsList' });\n\t\t},\n\t\t/**\n\t\t * Function to update the sequence for all blocks after adding new Block\n\t\t */\n\t\tupdateNewSequenceForBlocks: function (sequenceList) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\t$.each(sequenceList, function (blockId, sequence) {\n\t\t\t\tcontents.find('.block_' + blockId).data('sequence', sequence);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to update the block list with the new block label in the clone container\n\t\t */\n\t\tappendNewBlockToBlocksList: function (result, form) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tvar option = $('<option>', {\n\t\t\t\tvalue: result['id'],\n\t\t\t\ttext: result['label']\n\t\t\t});\n\t\t\tblocksListSelect.append(option.attr('data-label', result['label']));\n\t\t},\n\t\t/**\n\t\t * Function to update the block list to remove the deleted custom block label in the clone container\n\t\t */\n\t\tremoveBlockFromBlocksList: function (blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option[value=\"' + blockId + '\"]').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for block visibility\n\t\t */\n\t\tregisterBlockVisibilityEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-block-visibility', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.updateBlockStatus(currentTarget);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the changed visibility for the block\n\t\t */\n\t\tupdateBlockStatus: function (currentTarget) {\n\t\t\tvar blockStatus = currentTarget.data('visible');\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\t\t\tparams['blockid'] = currentTarget.data('blockId');\n\t\t\tparams['display_status'] = blockStatus;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (blockStatus == '1') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_SHOW');\n\t\t\t\t\t} else if (blockStatus == '2') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_DYNAMIC');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_HIDE');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for inactive fields list\n\t\t */\n\t\tregisterInactiveFieldsEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-inactive-fields-btn', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar currentBlock = currentTarget.closest('.editFieldsTable');\n\t\t\t\t//If there are no hidden fields, show pnotify\n\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList)) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_NO_HIDDEN_FIELDS_EXISTS');\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tvar inActiveFieldsContainer = contents.find('.inactiveFieldsModal').clone(true, true);\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tdata.find('.inactiveFieldsModal').removeClass('d-none').show();\n\t\t\t\t\t\tvar form = data.find('.inactiveFieldsForm');\n\t\t\t\t\t\tthisInstance.showHiddenFields(form);\n\t\t\t\t\t\t//register click event for reactivate button in the inactive fields modal\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\tthisInstance.createReactivateFieldslist(form);\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tinActiveFieldsContainer,\n\t\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the list of inactive fields in the modal\n\t\t */\n\t\tshowHiddenFields: function (form) {\n\t\t\tconst self = this;\n\t\t\tlet detail = $('#detailViewLayout');\n\t\t\t$.each(self.inActiveFieldsList, function (blockId, fields) {\n\t\t\t\tform\n\t\t\t\t\t.find('.inActiveList')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t'<h5 class=\"\">' +\n\t\t\t\t\t\t\tdetail.find(`.js-block-container[data-block-id=\"${blockId}\"] .js-block-label`).text() +\n\t\t\t\t\t\t\t'</h5>'\n\t\t\t\t\t);\n\t\t\t\t$.each(fields, function (key, value) {\n\t\t\t\t\tform\n\t\t\t\t\t\t.find('.inActiveList')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t`<div class=\"checkbox\"><label><input type=\"checkbox\" class=\"inActiveField mr-2\" value=\"${key}\" data-block=\"${blockId}\"/>${value}</label></div>`\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tform.find('.inActiveList').append('<hr>');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the list of reactivate fields list\n\t\t */\n\t\tcreateReactivateFieldslist: function (form) {\n\t\t\tconst self = this;\n\t\t\tlet blocks = [];\n\t\t\tform.find('.inActiveField').each(function (index, domElement) {\n\t\t\t\tlet element = $(domElement);\n\t\t\t\tlet fieldId = element.val();\n\t\t\t\tlet blockId = element.data('block');\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tdelete self.inActiveFieldsList[blockId][fieldId];\n\t\t\t\t\tif (!self.inActiveFieldsList[blockId]) {\n\t\t\t\t\t\tdelete self.inActiveFieldsList[blockId];\n\t\t\t\t\t}\n\t\t\t\t\tif (!blocks[blockId]) {\n\t\t\t\t\t\tblocks[blockId] = [];\n\t\t\t\t\t}\n\t\t\t\t\tblocks[blockId].push(fieldId);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$.each(blocks, function (blockId, fields) {\n\t\t\t\tif (fields) {\n\t\t\t\t\tself.reActivateHiddenFields(blockId, fields);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to unHide the selected fields in the inactive fields modal\n\t\t */\n\t\treActivateHiddenFields: function (blockId, fields) {\n\t\t\tconst self = this;\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Field',\n\t\t\t\t\tmode: 'unHide',\n\t\t\t\t\tblockId: blockId,\n\t\t\t\t\tfieldIdList: JSON.stringify(fields)\n\t\t\t\t},\n\t\t\t\tmessageParams = {};\n\t\t\tif (params.fieldIdList !== '[]') {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tfor (let index in data.result) {\n\t\t\t\t\t\t\tself.showCustomField(data.result[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmessageParams.text = app.vtranslate('JS_NO_ITEM_SELECTED');\n\t\t\t\tmessageParams.type = 'error';\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('blockId');\n\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function (e) {\n\t\t\t\t\t\tthisInstance.deleteCustomBlock(blockId);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom block\n\t\t */\n\t\tdeleteCustomBlock: function (blockId) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['blockid'] = blockId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tlet result = data.result;\n\t\t\t\t\tif (data['success'] && result.success) {\n\t\t\t\t\t\tthisInstance.removeDeletedBlock(blockId);\n\t\t\t\t\t\tthisInstance.removeBlockFromBlocksList(blockId);\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_BLOCK_DELETED');\n\t\t\t\t\t} else if (result && result.message) {\n\t\t\t\t\t\tparams['text'] = result.message;\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to remove the deleted custom block from the ui\n\t\t */\n\t\tremoveDeletedBlock: function (blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar deletedTable = contents.find('.block_' + blockId);\n\t\t\tdeletedTable.fadeOut('slow').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom field\n\t\t */\n\t\tregisterDeleteCustomFieldEvent: function (contents) {\n\t\t\tconst thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.deleteCustomField').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\tfieldId = currentTarget.data('fieldId'),\n\t\t\t\t\tmessage = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function (e) {\n\t\t\t\t\t\tthisInstance.deleteCustomField(fieldId).done(function (data) {\n\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\tlet field = currentTarget.closest('div.editFields'),\n\t\t\t\t\t\t\t\t\tblockId = field.data('blockId');\n\t\t\t\t\t\t\t\tfield.parent().fadeOut('slow').remove();\n\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields($('#block_' + blockId));\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_FIELD_DELETED')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'error', text: response.message });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom field\n\t\t */\n\t\tdeleteCustomField: function (fieldId) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['fieldid'] = fieldId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the cahnge event for mandatory & default checkboxes in edit field details\n\t\t */\n\t\tregisterFieldDetailsChange: function (contents) {\n\t\t\tcontents.find('[name=\"mandatory\"]').on('change', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') !== 'readonly') {\n\t\t\t\t\tvar form = currentTarget.closest('.fieldDetailsForm');\n\t\t\t\t\tvar quickcreateEle = form.find('[name=\"quickcreate\"]').filter(':checkbox').not('.optionDisabled');\n\t\t\t\t\tvar presenceEle = form.find('[name=\"presence\"]').filter(':checkbox').not('.optionDisabled');\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tquickcreateEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t\tpresenceEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquickcreateEle.removeAttr('readonly');\n\t\t\t\t\t\tpresenceEle.removeAttr('readonly');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontents.find('[name=\"defaultvalue\"],[name=\"header_field\"]').on('change', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar defaultValueUi = currentTarget.closest('.checkbox').find('.js-toggle-hide');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tdefaultValueUi.removeClass('zeroOpacity');\n\t\t\t\t} else {\n\t\t\t\t\tdefaultValueUi.addClass('zeroOpacity');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontents.find('.js-header_type').on('change', function (e) {\n\t\t\t\tlet el = $(e.currentTarget);\n\t\t\t\tlet relFieldsElement = el.closest('.js-toggle-hide').find('.js-header_rel_fields');\n\t\t\t\tif (el.val() === 'value') {\n\t\t\t\t\trelFieldsElement.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\trelFieldsElement.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for related modules list tab\n\t\t */\n\t\trelatedModulesTabClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedContainer = contents.find('#relatedTabOrder');\n\t\t\tvar relatedTab = contents.find('.relatedListTab');\n\t\t\trelatedTab.on('click', function () {\n\t\t\t\tif (relatedContainer.find('.relatedTabModulesList').length > 0) {\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.showRelatedTabModulesList(relatedContainer);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the related tab modules list in the tab\n\t\t */\n\t\tshowRelatedTabModulesList: function (relatedContainer) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\trelatedContainer.html(data);\n\t\t\t\t\tif ($(data).find('.relatedListContainer').length > 0) {\n\t\t\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {});\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function (selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelModuleLayoutEditor: function (selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorModules\"]', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getModuleLayoutEditor(selectedModule).done(function (data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterRelModulesChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorRelModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorRelModules\"]', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getRelModuleLayoutEditor(selectedModule).done(function (data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCheckbox: function (contents) {\n\t\t\tcontents.on('change', ':checkbox', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') === 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditFieldDetailsClick: function (contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.editFieldDetails').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar fieldRow = currentTarget.closest('div.editFields');\n\t\t\t\tvar fieldId = fieldRow.data('fieldId');\n\t\t\t\tvar block = fieldRow.closest('.editFieldsTable');\n\t\t\t\tvar blockId = block.data('blockId');\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: 'index.php?parent=Settings&module=LayoutEditor&view=EditField&fieldId=' + fieldRow.data('fieldId'),\n\t\t\t\t\tcb: function (modalContainer) {\n\t\t\t\t\t\tthisInstance.registerFieldDetailsChange(modalContainer);\n\t\t\t\t\t\tthisInstance.lockCheckbox(modalContainer);\n\t\t\t\t\t\tthisInstance.registerVaribleToParsers(modalContainer);\n\t\t\t\t\t\tapp.registerEventForClockPicker(modalContainer.find('.clockPicker'));\n\t\t\t\t\t\tthisInstance.registerViewRelatedChangeEvent(modalContainer);\n\t\t\t\t\t\tmodalContainer.find('[data-inputmask]').inputmask();\n\t\t\t\t\t},\n\t\t\t\t\tsendByAjaxCb: (formData, response) => {\n\t\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_FIELD_DETAILS_SAVED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet result = response['result'];\n\t\t\t\t\t\tlet fieldLabel = fieldRow.find('.fieldLabel');\n\t\t\t\t\t\tif (result['presence'] === '1') {\n\t\t\t\t\t\t\tfieldRow.parent().fadeOut('slow').remove();\n\t\t\t\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\t\t\t\tif (thisInstance.inActiveFieldsList.length === 0) {\n\t\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList = {};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId] = {};\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result['mandatory']) {\n\t\t\t\t\t\t\tif (fieldLabel.find('.redColor').length === 0) {\n\t\t\t\t\t\t\t\tfieldRow.find('.fieldLabel').append($('<span class=\"redColor\">*</span>'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldRow.find('.fieldLabel').find('.redColor').remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterVaribleToParsers: function (container) {\n\t\t\tcontainer.find('.configButton').on('click', function (e) {\n\t\t\t\tcontainer.find('.js-toggle-hide .js-base-element').each(function (n, e) {\n\t\t\t\t\tvar currentElement = $(e);\n\t\t\t\t\tif (currentElement.hasClass('d-none')) {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentElement.toggleClass('d-none');\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.varibleToParsers').on('click', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet container = element.closest('.js-base-element');\n\t\t\t\tlet input = container.find('[name=\"' + container.data('name') + '\"]');\n\t\t\t\tlet fieldId = element.closest('form').find('[name=\"fieldid\"]').val();\n\t\t\t\tlet id = 'varibleToParsersModal';\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\tid: id,\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=VaribleToParsers&fieldId=' +\n\t\t\t\t\t\tfieldId +\n\t\t\t\t\t\t'&defaultValue=' +\n\t\t\t\t\t\tinput.val(),\n\t\t\t\t\tcb: function (modalContainer) {\n\t\t\t\t\t\tmodalContainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\t\t\t\tinput.val(modalContainer.find('select').val());\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tApp.Fields.Tree.register(container);\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for blocks\n\t\t */\n\t\tregisterBlockEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.makeBlocksListSortable();\n\t\t\tthisInstance.registerAddCustomFieldEvent();\n\t\t\tthisInstance.registerBlockVisibilityEvent();\n\t\t\tthisInstance.registerInactiveFieldsEvent();\n\t\t\tthisInstance.registerDeleteCustomBlockEvent();\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for fields\n\t\t */\n\t\tregisterFieldEvents: function (contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tApp.Fields.Date.register(contents);\n\t\t\tApp.Fields.Picklist.changeSelectElementView(contents);\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\tthisInstance.registerDeleteCustomFieldEvent(contents);\n\t\t\tthisInstance.registerEditFieldDetailsClick(contents);\n\n\t\t\tcontents.find(':checkbox').on('change', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') == 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register switch\n\t\t */\n\t\tregisterSwitch: function () {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tcontainer.find('.js-switch--inventory').on('click', function (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar switchBtn = $(event.currentTarget);\n\t\t\t\tvar state = switchBtn.data('value');\n\t\t\t\tvar message = app.vtranslate('JS_EXTENDED_MODULE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\tmessage: '<span class=\"message-medium\">' + message + '</span>',\n\t\t\t\t\tclassName: 'test'\n\t\t\t\t}).done(function (e) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['sourceModule'] = container.find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\t\tparams['type'] = state;\n\t\t\t\t\tapp.saveAjax('changeModuleType', null, params).done(function (data) {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\tcontainer.find('.js-switch--inventory').prop('disabled', true);\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: data.result.message\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field\n\t\t */\n\t\tregisterAddInventoryField() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.addInventoryField').on('click', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\tlet blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tconst progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step1&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&block=' +\n\t\t\t\t\t\tblockId,\n\t\t\t\t\t(modalContainer) => {\n\t\t\t\t\t\tapp.showScrollBar(modalContainer.find('.well'), {\n\t\t\t\t\t\t\theight: '300px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthisInstance.registerStep1(modalContainer, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to editing inventory field\n\t\t */\n\t\tregisterEditInventoryField: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.editInventoryField').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\tvar blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tvar editField = currentTarget.closest('.editFields');\n\t\t\t\tvar progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\teditField.data('type') +\n\t\t\t\t\t\t'&fieldName=' +\n\t\t\t\t\t\teditField.data('name'),\n\t\t\t\t\tfunction (container) {\n\t\t\t\t\t\tapp.showPopoverElementView(container.find('.js-help-info'));\n\t\t\t\t\t\tthisInstance.registerStep2(container, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field first step\n\t\t *\n\t\t * @param {jQuery} container\n\t\t * @param {int} blockId\n\t\t */\n\t\tregisterStep1(container, blockId) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('.js-next-button').on('click', (e) => {\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\tlet type = container.find('select.type').val();\n\t\t\t\tif (type === null) {\n\t\t\t\t\tcontainer\n\t\t\t\t\t\t.find('select.type')\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_REQUIRED_FIELD'), 'error', 'topRight', true);\n\t\t\t\t} else {\n\t\t\t\t\tapp.hideModalWindow(() => {\n\t\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t(modalContainer) => {\n\t\t\t\t\t\t\t\tthisInstance.registerStep2(modalContainer, blockId);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save inventory field\n\t\t */\n\t\tregisterStep2: function (container, blockId) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tlet form = container.find('form');\n\t\t\tlet selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet paramsName = container.find('#params');\n\t\t\t\tif (paramsName.length) {\n\t\t\t\t\tparamsName = JSON.parse(paramsName.val());\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tfor (let i in formData) {\n\t\t\t\t\t\tif ($.inArray(i, paramsName) != -1) {\n\t\t\t\t\t\t\tlet value = formData[i];\n\t\t\t\t\t\t\tif (i === 'modules' && typeof value === 'string') {\n\t\t\t\t\t\t\t\tvalue = [value];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparams[i] = value;\n\t\t\t\t\t\t\tdelete formData[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tformData.params = JSON.stringify(params);\n\t\t\t\t}\n\t\t\t\tlet errorExists = form.validationEngine('validate');\n\t\t\t\tif (errorExists != false) {\n\t\t\t\t\tformData.block = blockId;\n\t\t\t\t\tformData.sourceModule = selectedModule;\n\t\t\t\t\tapp.saveAjax('saveInventoryField', null, formData).done(function (data) {\n\t\t\t\t\t\tlet result = data.result,\n\t\t\t\t\t\t\tsuccess = data.success;\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tif (success && result && result.edit) {\n\t\t\t\t\t\t\tlet liElement = containerInventory.find('[data-id=\"' + result.data.id + '\"]');\n\t\t\t\t\t\t\tliElement.find('.fieldLabel').text(result.data.translate);\n\t\t\t\t\t\t} else if (success && result) {\n\t\t\t\t\t\t\tlet newLiElement = containerInventory.find('.newLiElement').clone(true, true);\n\t\t\t\t\t\t\tnewLiElement\n\t\t\t\t\t\t\t\t.removeClass('d-none newLiElement')\n\t\t\t\t\t\t\t\t.find('.editFields')\n\t\t\t\t\t\t\t\t.attr('data-id', result.data.id)\n\t\t\t\t\t\t\t\t.attr('data-sequence', result.data.sequence)\n\t\t\t\t\t\t\t\t.attr('data-name', result.data.columnName)\n\t\t\t\t\t\t\t\t.attr('data-type', result.data.invtype)\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.text(result.data.translate);\n\t\t\t\t\t\t\tcontainerInventory\n\t\t\t\t\t\t\t\t.find('[data-block-id=\"' + result.data.block + '\"] .connectedSortable')\n\t\t\t\t\t\t\t\t.append(newLiElement);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('form').on('submit', function (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterInventoryFieldSequenceSaveClick: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\tcontainerInventory.on('click', '.saveFieldSequence', function (e) {\n\t\t\t\tvar button = $(e.currentTarget);\n\t\t\t\tvar target = button.closest('.inventoryBlock');\n\t\t\t\tvar fieldId = [];\n\t\t\t\ttarget.find('.editFields').each(function () {\n\t\t\t\t\tfieldId.push($(this).data('id'));\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSequence', null, { sourceModule: selectedModule, ids: fieldId }).done(function (data) {\n\t\t\t\t\tbutton.addClass('invisible');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * removing elements in advanced blocks\n\t\t */\n\t\tregisterDeleteInventoryField: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer').find('[name=\"layoutEditorModules\"]').val();\n\t\t\tcontainer.find('.deleteInventoryField').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar liElement = currentTarget.closest('li');\n\t\t\t\tvar message = app.vtranslate('JS_DELETE_INVENTORY_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function (e) {\n\t\t\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar editFields = liElement.find('.editFields');\n\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t.saveAjax('delete', null, {\n\t\t\t\t\t\t\t\tsourceModule: selectedModule,\n\t\t\t\t\t\t\t\tfieldName: editFields.data('name')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\t\t\tlet param = {};\n\t\t\t\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\t\t\t\tliElement.remove();\n\t\t\t\t\t\t\t\t\tparam = { type: 'success', text: app.vtranslate('JS_SAVE_CHANGES') };\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparam = { type: 'error', text: app.vtranslate('JS_ERROR') };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(param);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tloadMultiReferenceFields: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar module = form.find('[name=\"MRVModule\"]').val();\n\t\t\tform.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]').select2('destroy');\n\t\t\tform.find('[name=\"MRVField\"]').html(thisInstance.cacheMRVField.html());\n\t\t\tform.find('[name=\"MRVField\"] optgroup').each(function (index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.find('[name=\"MRVFilterField\"]').html(thisInstance.cacheMRVFilter.html());\n\t\t\tform.find('[name=\"MRVFilterField\"] option').each(function (index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]'), {\n\t\t\t\twidth: '100%'\n\t\t\t});\n\t\t},\n\t\tcacheMRVField: false,\n\t\tcacheMRVFilter: false,\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFieldsChangeEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.cacheMRVField = form.find('[name=\"MRVField\"]').clone(true, true);\n\t\t\tthisInstance.cacheMRVFilter = form.find('[name=\"MRVFilterField\"]').clone(true, true);\n\n\t\t\tform.find('[name=\"MRVModule\"]').on('change', function (e) {\n\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t});\n\t\t},\n\n\t\tregisterReferenceModuleChangeEvent: function (form) {\n\t\t\tform.find('[name=\"referenceModule\"]').on('change', function (e) {\n\t\t\t\tif ($(e.currentTarget).select2('data') && $(e.currentTarget).select2('data').length === 1){\n\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'Filter';\n\t\t\t\t\tparams['mode'] = 'getFilters';\n\t\t\t\t\tparams['rmodule'] = form.find('[name=\"referenceModule\"]').val();\n\n\t\t\t\t\tform.find('[name=\"referenceModuleFilter\"]').select2('destroy');\n\t\t\t\t\tform.find('[name=\"referenceModuleFilter\"] option').remove();\n\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t$.each(data.result, function (index, value) {\n\t\t\t\t\t\t\t\tvar option = $('<option>', {\n\t\t\t\t\t\t\t\t\tvalue:value.cvid,\n\t\t\t\t\t\t\t\t\ttext: value.viewname\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tform.find('[name=\"referenceModuleFilter\"]').append(option);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"referenceModuleFilter\"]'), {\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tform.find('.preDefinedModuleFilterList').removeClass('d-none');\n\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tform.find('.preDefinedModuleFilterList').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFilterFieldChangeEvent: function (form) {\n\t\t\tform.find('[name=\"MRVFilterField\"]').on('change', function (e) {\n\t\t\t\tvar params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['action'] = 'Field';\n\t\t\t\tparams['mode'] = 'getPicklist';\n\t\t\t\tparams['rfield'] = form.find('[name=\"MRVFilterField\"]').val();\n\t\t\t\tparams['rmodule'] = form.find('[name=\"MRVModule\"]').val();\n\n\t\t\t\tform.find('[name=\"MRVFilterValue\"]').select2('destroy');\n\t\t\t\tform.find('[name=\"MRVFilterValue\"] option').remove();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t$.each(data.result, function (index, value) {\n\t\t\t\t\t\tform.find('[name=\"MRVFilterValue\"]').append($('<option>').val(index).html(value));\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVFilterValue\"]'), {\n\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register label copy\n\t\t */\n\t\tregisterCopyClipboard: function () {\n\t\t\tnew ClipboardJS('.copyFieldLabel', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn $('#layoutEditorContainer')\n\t\t\t\t\t\t.find('#' + trigger.getAttribute('data-target'))\n\t\t\t\t\t\t.val();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Context help\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterContextHelp: function () {\n\t\t\t$(document).on('click', '.js-context-help', function (e) {\n\t\t\t\tconst customConfig = {\n\t\t\t\t\ttoolbar: 'Min'\n\t\t\t\t};\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet progressInstance = $.progressIndicator({\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'HelpInfo',\n\t\t\t\t\tfield: element.data('field-id')\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tapp.showModalWindow(data, (modalContainer) => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.showPopoverElementView(modalContainer.find('.js-help-info'));\n\t\t\t\t\t\tApp.Fields.Text.Editor.register(modalContainer.find('.js-context-area:visible'), customConfig);\n\t\t\t\t\t\tmodalContainer.find('.js-lang').on('change', function (e) {\n\t\t\t\t\t\t\tlet previous = modalContainer.find('.js-editor:not([disabled])');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(previous);\n\t\t\t\t\t\t\tprevious.closest('.js-context-block').addClass('d-none');\n\t\t\t\t\t\t\tprevious.prop('disabled', true);\n\t\t\t\t\t\t\tlet element = $(e.currentTarget).val();\n\t\t\t\t\t\t\tlet textArea = modalContainer.find('#' + element + '.js-context-area');\n\t\t\t\t\t\t\ttextArea.prop('disabled', false);\n\t\t\t\t\t\t\ttextArea.closest('.js-context-block').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(textArea);\n\t\t\t\t\t\t\tmodalContainer.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\tApp.Fields.Text.Editor.register(textArea, customConfig);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalContainer.find('form').on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar form = $(e.currentTarget);\n\t\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\t\tif (typeof params.views === 'undefined') {\n\t\t\t\t\t\t\t\tparams.views = form.find('[name=\"views\"]').val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.saveAjax('contextHelp', '', params).done(function (data) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_CHANGES')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet prefix = form.find('.js-lang').val();\n\t\t\t\t\t\t\t\tlet textArea = form.find('#' + prefix + '.js-context-area');\n\t\t\t\t\t\t\t\tform.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterViewRelatedChangeEvent: function (form) {\n\t\t\tform.find('[name=\"referredField\"]').on('change', function (e) {\n\t\t\t\tlet params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['action'] = 'ViewRelated';\n\t\t\t\tparams['mode'] = 'getFields';\n\t\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\t\tparams['rfield'] = form.find('[name=\"referredField\"]').val();\n\n\t\t\t\tform.find('[name=\"viewField\"]').select2('destroy');\n\t\t\t\tform.find('[name=\"viewField\"] option,optgroup').remove();\n\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t$.each(data.result, function (index, block) {\n\t\t\t\t\t\t\tlet optionGroup = $('<optgroup>', { label: block.label, \"data-module\": block.module });\n\t\t\t\t\t\t\t$.each(block.fields, function (index, field) {\n\t\t\t\t\t\t\t\tlet option = $('<option>', {\n\t\t\t\t\t\t\t\t\tvalue: field.name,\n\t\t\t\t\t\t\t\t\ttext: field.label\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\toptionGroup.append(option);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tform.find('[name=\"viewField\"]').append(optionGroup);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"viewField\"]'), {\n\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar thisInstance = this;\n\n\t\t\tthisInstance.registerBlockEvents();\n\t\t\tthisInstance.registerFieldEvents();\n\t\t\tthisInstance.setInactiveFieldsList();\n\t\t\tthisInstance.registerAddCustomBlockEvent();\n\n\t\t\tthisInstance.relatedModulesTabClickEvent();\n\t\t\tthisInstance.registerModulesChangeEvent();\n\t\t\tthisInstance.registerRelModulesChangeEvent();\n\n\t\t\tif (1 === $('#relatedTabOrder').length) {\n\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t}\n\n\t\t\tthisInstance.registerSwitch();\n\t\t\tthisInstance.registerAddInventoryField();\n\t\t\tthisInstance.registerEditInventoryField();\n\t\t\tthisInstance.registerInventoryFieldSequenceSaveClick();\n\t\t\tthisInstance.registerDeleteInventoryField();\n\t\t\tthis.registerFieldSequenceSaveClick();\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tthis.registerEvents();\n\t\t\tthis.registerCopyClipboard();\n\t\t\tthis.registerContextHelp(container);\n\t\t}\n\t}\n);\n\n$(document).ready(function () {\n\tvar instance = new Settings_LayoutEditor_Js();\n\tinstance.registerBasicEvents();\n});\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_FloatingDigits_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_FloatingDigits_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the decimals length\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 2 || fieldValue > 5) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_2TO5');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_DecimalMaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tvar decimalFieldValue = $('#createFieldForm').find('[name=\"decimal\"]').val();\n\t\t\t\tvar fieldLength = parseInt(64) - parseInt(decimalFieldValue);\n\t\t\t\tif (fieldValue > fieldLength && !(fieldLength < 0) && fieldLength >= 59) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' ' + fieldLength;\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_MaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue > 255) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' 255';\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\t\tvalidateValue: function (fieldValue) {\n\t\t\tvar specialChars = /[&\\<\\>\\:\\'\\\"\\,]/;\n\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tvar errorInfo = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' & < > \\' \" : , ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\tthis.setError(errorInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_PicklistFieldValues_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tlet instance = new Vtiger_PicklistFieldValues_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tlet response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\treturn this.validateValue(this.getElement().val());\n\t\t},\n\t\tvalidateValue: function (fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tlet r = true;\n\t\t\t$.each(fieldValue, (i, val) => {\n\t\t\t\tif (specialChars.test(val)) {\n\t\t\t\t\tthis.setError(app.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED'));\n\t\t\t\t\tr = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\t}\n);\n"],"names":["$","Class","updatedBlockSequence","inActiveFieldsList","updatedBlockFieldsList","updatedBlocksList","blockNamesList","setInactiveFieldsList","contents","find","json","length","thisInstance","JSON","parse","val","makeBlocksListSortable","table","sortable","containment","items","revert","tolerance","cursor","update","updateBlockSequence","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","sequence","stringify","updateBlocksListByOrder","params","app","getModuleName","getParentModuleName","AppConnector","request","done","mode","vtranslate","Settings_Vtiger_Index_Js","showMessage","fail","each","index","domElement","blockId","blockTable","data","actualBlockSequence","expectedBlockSequence","registerRelatedListEvents","relatedList","App","Fields","Picklist","showSelect2ElementView","sortableCb","currentTarget","updateSelectedFields","updateCustomView","on","e","relatedModule","closest","removeClass","show","hide","changeStatusRelatedModule","removeRelation","changeStateFavorites","value","validationEngine","changeRelatedViewType","container","contentsDiv","addRelationContainer","clone","callBackFunction","not","addClass","serializeFormData","extend","form","result","response","success","getRelModuleLayoutEditor","html","registerEvents","message","type","text","showModalWindow","getSelectedFields","target","selectedFields","push","id","name","makeRelatedModuleSortable","relatedModulesContainer","modulesList","handle","updateSequenceRelatedModule","module","parent","action","relationId","types","error","status","Vtiger_Helper_Js","showConfirmationBox","remove","modules","showNotify","makeFieldsListSortable","connectWith","ui","currentField","hasClass","showSaveFieldSequenceButton","getDetailViewLayout","createUpdatedBlocksList","sender","reArrangeBlockFields","olderBlock","getInventoryViewLayout","layout","saveButton","isHidden","isInvisible","hideSaveFieldSequenceButton","block","updatedBlockId","inArray","rightSideContainer","leftSideContainer","children","append","lastElementInRightContainer","lastElementInLeftContainer","createUpdatedBlockFieldsList","updatedBlock","firstBlockSortFields","editFields","expectedFieldSequence","i","fieldId","fieldEle","fieldid","secondEditFields","secondBlockSortFields","sequenceValue","registerFieldSequenceSaveClick","updateFieldSequence","window","location","reload","checkPicklistExist","fieldNameValue","Deferred","fieldName","toLowerCase","aDeferred","resolve","promise","registerAddCustomFieldEvent","addFieldContainer","width","attr","tags","tokenSeparators","registerFieldTypeChangeEvent","registerMultiReferenceFieldsChangeEvent","registerMultiReferenceFilterFieldChangeEvent","registerReferenceModuleChangeEvent","registerViewRelatedChangeEvent","getvalidationEngineOptions","onValidationComplete","valid","validateFieldsValue","fieldTypeValue","saveCustomField","removeAttr","select2Element","pickListValueElement","pickListValuesArray","pickListValuesArraySize","specialChars","test","getSelect2ElementFromSelect","map","item","uniqueLowerCasedpickListValuesArray","uniqueSort","lowerCasedpickListValuesArray","uniqueLowerCasedpickListValuesArraySize","serverListElement","addCustomField","hideModalWindow","showCustomField","title","setBlocksListArray","blocksListSelect","ele","label","option","Window","lastModalId","modalHeader","smallLoadingImage","imageContainerCss","display","err","errorObj","responseText","reject","lengthInput","lengthValidator","maxLengthValidator","decimalValidator","selectedOption","decimalFieldUi","maxFloatingDigits","decimalInput","pickListUi","pickListOption","loadMultiReferenceFields","relatedBlock","fieldCopy","fieldContainer","prop","registerCopyClipboard","sortable1","length1","sortable2","length2","registerAddCustomBlockEvent","Object","create","validationEngineOptions","formData","saveBlockDetails","displayNewCustomBlock","updateNewSequenceForBlocks","appendNewBlockToBlocksList","preventDefault","addBlockContainer","beforeBlockId","beforeBlock","newBlockCloneCopy","after","sequenceList","hiddenAddBlockModel","removeBlockFromBlocksList","registerBlockVisibilityEvent","updateBlockStatus","blockStatus","registerInactiveFieldsEvent","currentBlock","isEmptyObject","showHiddenFields","createReactivateFieldslist","inActiveFieldsContainer","detail","self","fields","key","blocks","element","is","reActivateHiddenFields","fieldIdList","messageParams","registerDeleteCustomBlockEvent","deleteCustomBlock","removeDeletedBlock","errorLog","deletedTable","fadeOut","registerDeleteCustomFieldEvent","deleteCustomField","field","registerFieldDetailsChange","quickcreateEle","filter","presenceEle","defaultValueUi","relFieldsElement","el","relatedModulesTabClickEvent","relatedContainer","relatedTab","showRelatedTabModulesList","getModuleLayoutEditor","selectedModule","requestPjax","registerModulesChangeEvent","registerRelModulesChangeEvent","lockCheckbox","registerEditFieldDetailsClick","fieldRow","url","cb","modalContainer","registerVaribleToParsers","registerEventForClockPicker","inputmask","sendByAjaxCb","fieldLabel","n","currentElement","toggleClass","input","Tree","register","registerBlockEvents","registerFieldEvents","Date","changeSelectElementView","registerSwitch","event","state","switchBtn","className","saveAjax","progress","registerAddInventoryField","showScrollBar","height","registerStep1","registerEditInventoryField","editField","showPopoverElementView","registerStep2","containerInventory","paramsName","sourceModule","edit","liElement","translate","newLiElement","columnName","invtype","registerInventoryFieldSequenceSaveClick","button","ids","registerDeleteInventoryField","param","select2","cacheMRVField","cacheMRVFilter","cvid","viewname","trigger","getAttribute","registerContextHelp","document","toolbar","progressInstance","view","Text","Editor","customConfig","destroyEditor","previous","textArea","views","prefix","optionGroup","registerBasicEvents","ready","instance","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","rangeInstance","setElement","validate","getError","_super","getFieldValue","setError","errorInfo","fieldValue","decimalFieldValue","fieldLength","parseInt","Vtiger_Base_Validator_Js","validateValue","getElement","r"],"mappings":"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"}